(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{281:function(e){e.exports=JSON.parse('[{"_id":"b101","title":"Final Project","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u101","fullname":"Summer Smith","imgUrl":"https://static.wikia.nocookie.net/rickandmorty/images/a/ad/Summer_is_cool.jpeg/revision/latest?cb=20160919183158"},"style":{"imgUrl":"https://images.pexels.com/photos/2662116/pexels-photo-2662116.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Important","color":"#FF9F1A"},{"id":"l103","title":"Urgent","color":"#eb5a46"},{"id":"l104","title":"If time permits","color":"#C377E0"},{"id":"l105","title":"On hold","color":"#344563"},{"id":"l106","title":"Design","color":"#FF78CB"}],"members":[{"_id":"u101","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u104","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"groups":[{"id":"g102","title":"Bugs","cards":[{"id":"c103","title":"Notification not sending","description":"Notification on header doesn\'t apear in time","isComplete":false,"attachments":[{"id":"j0dq7e","url":"https://images.pexels.com/photos/1122626/pexels-photo-1122626.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","title":"Attachment","addedAt":1632823545000}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l102"],"createdAt":1590999730348},{"id":"c104","title":"Drag & drop issues","description":"description","isComplete":false,"comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"}}],"checklists":[{"id":"YEhmF","title":"react-beautiful-dnd","todos":[{"id":"212jX","title":"Go over the documentation again","isDone":true}]},{"id":"YEhmS","title":"Droppable & Draggable","todos":[{"id":"212jX","title":"Fix placeholder","isDone":false}]},{"id":"YEhmA","title":"Handle Drag End","todos":[{"id":"212jX","title":"Fix function","isDone":false},{"id":"212jY","title":"Console to check the result","isDone":true}]}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l103"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#5BA4CF"}},{"id":"c105","title":"Download img not working","isComplete":false,"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/2325446/pexels-photo-2325446.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}}],"style":{}},{"id":"g103","title":"In progress","cards":[{"id":"c1010","title":"Home page","isComplete":false},{"id":"c1040","title":"Work on JSON","description":"Make demo data perfect","isComplete":false,"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l101","l102"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}},{"id":"c107","title":"About page","description":"Finish about page","isComplete":true,"members":[{"_id":"u101","username":"summer@smith.com","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"}],"labelIds":["l101","l105","l106"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/8979724/pexels-photo-8979724.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}},{"id":"c108","title":"Create test data","description":"Create at least 3 objects for testing","isComplete":false,"checklists":[{"id":"Fkdgngrt12","title":"Test data","todos":[{"id":"212jX","title":"First test","isDone":true},{"id":"ffjenf54f","title":"Second data","isDone":false},{"id":"ggfvdf3d","title":"Third data","isDone":false}]}],"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l103"],"createdAt":1590999730348,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://clickup.com/blog/wp-content/uploads/2020/01/note-taking.png"}},{"id":"c110","title":"Finish basic css","isComplete":false,"members":[{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l105","l106"],"createdAt":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}}],"style":{}},{"id":"g106","title":"Backend","cards":[{"id":"c101012","title":"Sockets","createdAt":1590999817436,"isComplete":false},{"id":"c10434","title":"Connect mongo","description":"set up data base in mongoDB","isComplete":true,"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"},"style":{"bgColor":"#F5DD29"}}],"style":{}},{"id":"ghtrhthfgsf","title":"Next steps","cards":[{"id":"afgfv3ffs","title":"Responsivness"}]},{"id":"g1038yur673y","title":"QA","cards":[]},{"id":"4tesrgfg","title":"Done","cards":[]}],"activities":[]},{"_id":"b102","title":"Marshmello","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"},"style":{"bgColor":"#26de81"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Stuck","color":"#0079BF"},{"id":"l103","title":"In Progress","color":"#61bd4f"},{"id":"l104","title":"With Bugs","color":"#61bd4f"},{"id":"l105","title":"Ready","color":"#61bd4f"}],"members":[{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}],"groups":[{"id":"g102","title":"Group 1","cards":[{"id":"c103","title":"Do that","description":"description"},{"id":"c104","title":"Help me","description":"description","comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}}],"checklists":[{"id":"YEhmF","title":"Checklist","todos":[{"id":"212jX","title":"To Do 1","isDone":false},{"id":"212jF","title":"To Do 2","isDone":true},{"id":"212jN","title":"To Do 3","isDone":false}]},{"id":"YEhmR","title":"Checklist 2","todos":[{"id":"232jX","title":"To Do 4","isDone":false},{"id":"232jF","title":"To Do 5","isDone":true},{"id":"232jN","title":"To Do 6","isDone":true}]}],"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l101","l102","l103"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@abambi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}}],"style":{}}],"activities":[]}]')},282:function(e){e.exports=JSON.parse('[{"_id":"u101","fullname":"Summer Smith","username":"summer@Smith.com","password":"summer123","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif","mentions":[{"id":"m101","boardId":"b101","taskId":"t101"}]},{"_id":"u102","fullname":"Rick Sanchez","username":"rick@sanchez.com","password":"rick123","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv","mentions":[{"id":"m102","boardId":"b102","taskId":"t102"}]},{"_id":"u103","fullname":"Morty Smith","username":"morty@smith.com","password":"morty123","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u104","fullname":"Beth Smith","username":"beth@smith.com","password":"beth123","imgUrl":"https://i.imgur.com/pUVtIqL.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u105","fullname":"Jerry Smith","username":"jerry@smith.com","password":"jerry123","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u106","fullname":"Bird Person","username":"bird@person.com","password":"bird123","imgUrl":"https://robohash.org/bird.png?set=set2","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]}]')},533:function(e,t,r){},534:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(47),o=r.n(c),s=r(21),i=r(7),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=r(39),b=r(249),p=r(14),h=r(4),j={boards:[],currBoard:null,filteredBoard:null,lastRemovedBoard:null,isAddingBoard:!1,currCardId:null,filterBy:{txt:"",members:[],labels:[]}};var m=r(6),f=r.n(m),v=r(15);r(281),r(282);var g=r(116),O=r.n(g),x="/api/",C=O.a.create({withCredentials:!0}),y=function(e,t){return S(e,"GET",t)},k=function(e,t){return S(e,"POST",t)},w=function(e,t){return S(e,"PUT",t)},N=function(e,t){return S(e,"DELETE",t)};function S(e){return I.apply(this,arguments)}function I(){return I=Object(v.a)(f.a.mark((function e(t){var r,n,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,C({url:"".concat(x).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),I.apply(this,arguments)}var A=r(250),B=r.n(A),M=function(){var e=null,t={setup:function(){e=B()("")},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}();window.socketService=M,M.setup();var U={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],r="";for(;e>0;)e--,r+=t[Math.floor(Math.random()*t.length)]+" ";return r},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},debounce:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){e.apply(r,c)}),n)}}};var E="loggedinUser",D={login:function(e){return L.apply(this,arguments)},logout:function(){return G.apply(this,arguments)},signup:function(e){return P.apply(this,arguments)},getLoggedinUser:H,getMiniUser:function(){var e=H()||{_id:U.makeId(),fullname:"Guest"};return{_id:e._id,fullname:e.fullname,imgUrl:e.imgUrl}},getUsers:function(){return R.apply(this,arguments)},getById:function(e){return T.apply(this,arguments)},update:function(e){return _.apply(this,arguments)},getGueastUser:function(){return{_id:U.makeId(),fullname:"Guest"}},googleLogin:function(e){return F.apply(this,arguments)},addUserMention:function(e,t){w("user/".concat(e,"/mention"),t)},addMentionToStorage:function(e){return z.apply(this,arguments)}};function R(){return(R=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("user/".concat(t));case 2:return r=e.sent,r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("user/".concat(t._id),t);case 2:return r=e.sent,H()._id===t._id&&W(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",W(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("auth/googlelogin",{tokenId:t});case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",W(r));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function P(){return(P=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.imgUrl="",t.mentions=[],t.boards=[],e.next=5,k("auth/signup",t);case 5:return r=e.sent,e.abrupt("return",W(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.removeItem(E);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=D.getLoggedinUser()).mentions.unshift(t),W(r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return sessionStorage.setItem(E,JSON.stringify(e)),e}function H(){return JSON.parse(sessionStorage.getItem(E)||"null")}window.userService=D,Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=H())&&M.emit("set-user-socket",t._id);case 2:case"end":return e.stop()}}),e)})))();var V={user:D.getLoggedinUser()||D.getGueastUser(),users:[],watchedUser:null};var q={isLoading:!1};var J=Object(u.c)({boardModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0,n=t;switch(r.type){case"SET_BOARDS":n=Object(h.a)(Object(h.a)({},t),{},{boards:r.boards});break;case"UPDATE_FILTER":n=Object(h.a)(Object(h.a)({},t),{},{filterBy:r.filterBy});break;case"SET_CURR_BOARD":case"UPDATE_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{currBoard:r.board});break;case"SET_FILTERED_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{filteredBoard:r.board});break;case"REMOVE_BOARD":var a=t.boards.find((function(e){return e._id===r.boardId}));e=t.boards.filter((function(e){return e._id!==r.boardId})),n=Object(h.a)(Object(h.a)({},t),{},{boards:e,lastRemovedBoard:a});break;case"SET_ADDING_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{isAddingBoard:r.isAddingBoard});break;case"ADD_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[r.board])});break;case"SET_CARD_ID":n=Object(h.a)(Object(h.a)({},t),{},{currCardId:r.cardId});break;case"UNDO_REMOVE_BOARD":t.lastRemovedBoard&&(n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[t.lastRemovedBoard]),lastRemovedBoard:null}))}return n},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,r=e;switch(t.type){case"SET_USER":r=Object(h.a)(Object(h.a)({},e),{},{user:t.user});break;case"SET_WATCHED_USER":r=Object(h.a)(Object(h.a)({},e),{},{watchedUser:t.user});break;case"ADD_MENTION":var n=Object(h.a)(Object(h.a)({},e.user),{},{mentions:[t.mention].concat(Object(p.a)(e.user.mentions))});r=Object(h.a)(Object(h.a)({},e),{},{user:n});break;case"REMOVE_USER":r=Object(h.a)(Object(h.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});break;case"SET_USERS":r=Object(h.a)(Object(h.a)({},e),{},{users:t.users})}return r},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});default:return e}}}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,X=Object(u.e)(J,Q(Object(u.a)(b.a))),Y=r(8),K=r(9),Z=r(11),$=r(10),ee=r(18),te=r(56);var re={on:function(e,t){var r=function(e){var r=e.detail;t(r)};return window.addEventListener(e,r),function(){window.removeEventListener(e,r)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";re.emit("show-user-msg",{txt:e,type:t})}function ae(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getUsers();case 3:r=e.sent,t({type:"SET_USERS",users:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.login(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function oe(e){return function(t){D.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}function se(){return function(e){D.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}}function ie(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.update(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("cannot update user",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}window.myBus=re,window.showUserMsg=ne;var le=r.p+"static/media/hero.e8878a54.png",de=r.p+"static/media/homepage-product.162d5e7b.jpg",ue=r(1),be=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isNavbarBG:!1},e.changeHeaderStyle=function(){var t=e.state.isNavbarBG;window.scrollY>50&&!t?e.setState({isNavbarBG:!0}):window.scrollY<50&&t&&e.setState({isNavbarBG:!1})},e.onGuestLogin=function(){e.props.onLogin({username:"guest1",password:"guest123"}),e.props.history.push("/board")},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.changeHeaderStyle),document.body.style.overflowY="scroll"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.changeHeaderStyle),document.body.style.overflowY="hidden"}},{key:"render",value:function(){var e=this,t=this.state.isNavbarBG;return Object(ue.jsxs)("section",{className:"home-page main-container",children:[Object(ue.jsxs)("header",{className:"home-header ".concat(t?"bg-visible":""),children:[Object(ue.jsxs)("span",{className:"logo",children:[" ",Object(ue.jsx)(te.a,{})," Marshmello"]}),Object(ue.jsxs)("div",{className:"header-buttons",children:[Object(ue.jsx)(s.b,{to:"/login",children:Object(ue.jsx)("button",{className:"login-btn nav-button",children:"Log in"})}),Object(ue.jsx)(s.b,{to:"/signup",children:Object(ue.jsx)("button",{className:"signup-btn nav-button",children:"Sign up"})})]})]}),Object(ue.jsxs)("div",{className:"home-first-fold",children:[Object(ue.jsxs)("div",{className:"first-fold-text",children:[Object(ue.jsx)("h1",{children:"Marshmello helps teams move work forward."}),Object(ue.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Marshmello."}),Object(ue.jsx)("button",{className:"cta-btn nav-button",onClick:function(){return e.onGuestLogin()},children:"Try Demo Version"})]}),Object(ue.jsx)("div",{className:"first-fold-img",children:Object(ue.jsx)("img",{src:le,alt:"hero"})})]}),Object(ue.jsxs)("div",{className:"home-second-fold",children:[Object(ue.jsxs)("div",{className:"second-fold-text",children:[Object(ue.jsx)("h1",{children:"It\u2019s more than work. It\u2019s a way of working together."}),Object(ue.jsx)("p",{children:"Start with a Marshmello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place."})]}),Object(ue.jsx)("div",{className:"second-fold-img",children:Object(ue.jsx)("img",{src:de,alt:"hero"})})]})]})}}]),r}(a.a.Component);var pe={onLogin:ce},he=Object(i.b)((function(e){return{users:e.userModule.users}}),pe)(be),je=r(22);function me(e){var t=e.board,r=e.toggleStarredBoard,n=e.setFavicon;return Object(ue.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(ue.jsx)("div",{onClick:function(){return n(t.style)},className:"board-preview",style:t.style.bgColor?{backgroundColor:"".concat(t.style.bgColor)}:{backgroundImage:"url(".concat(t.style.imgUrl,")")},children:Object(ue.jsx)("div",{className:"preview-screen",children:Object(ue.jsxs)("div",{className:"preview-content",children:[Object(ue.jsx)("h4",{className:"board-title",children:t.title}),Object(ue.jsx)("button",{className:"star-btn ".concat(t.isStarred?"starred":""),onClick:function(e){return function(e){e.preventDefault(),e.stopPropagation(),r(t)}(e)},children:Object(ue.jsx)(je.g,{})})]})})})})}function fe(e){var t=e.boards,r=e.toggleStarredBoard,n=e.setFavicon,a=e.setAddBoard,c=e.isWorkspace;return Object(ue.jsxs)("div",{className:"board-list flex",children:[t.map((function(e){return Object(ue.jsx)(me,{board:e,toggleStarredBoard:r,setFavicon:n},e._id)})),c&&Object(ue.jsx)("div",{className:"board-preview create-board-btn",onClick:function(){return a()},children:Object(ue.jsx)("h4",{children:"Create New Board"})})]})}var ve=function(e){return"Added list: ".concat(e)},ge=function(){return"Added card:"},Oe=function(e){return"Renamed this board to: ".concat(e)},xe=function(e){return"Invited ".concat(e," to this board")},Ce=function(e){return"Removed ".concat(e," from this board")},ye=function(){return"Changed the background of this board"},ke=function(){return"Edited card title: "},we=function(e){return"Archived the list: ".concat(e)},Ne=function(){return"Marked the following card as complete: "},Se=function(){return"Marked the following card as incomplete: "},Ie=function(){return"Changed the description in card: "},Ae=function(e){return"Changed the title in list: ".concat(e)},Be=function(e){return"Added ".concat(e," to a card")},Me=function(e){return"Removed ".concat(e," from a card")},Ue=function(e){return"Added the label ".concat(e," to a card")},Ee=function(e){return"Removed the label ".concat(e," from a card")},De=function(e){return"Added checklist ".concat(e," to a card")},Re={query:function(e){return Te.apply(this,arguments)},getById:function(e,t){return _e.apply(this,arguments)},save:function(e){return Ge.apply(this,arguments)},remove:function(e){return Pe.apply(this,arguments)},dashboardQuery:function(e){return Le.apply(this,arguments)},getArchivedCards:function(e){return Fe.apply(this,arguments)}};function Te(){return(Te=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("board",t);case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading boards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _e(){return(_e=Object(v.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"object"===typeof r&&(r=new URLSearchParams(r).toString()),e.next=4,y("board/".concat(t),r);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("Front: Error loading board with ID: ".concat(t),e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Le(){return(Le=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("board/dashboard/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading chartsData",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Fe(){return(Fe=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("board/".concat(t,"/closed"));case 3:return r=e.sent,console.log("archivedChards:",r),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log("Front: Error loading archivedCards",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Pe(){return(Pe=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",N("board/".concat(t)));case 4:e.prev=4,e.t0=e.catch(0),console.log("Front: Error deleting board with ID: ".concat(t));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function Ge(){return Ge=Object(v.a)(f.a.mark((function e(t){var r,n,a,c,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:null,!t._id){e.next=10;break}if(!r){e.next=7;break}return n={txt:r.txt,id:U.makeId(),byMember:D.getMiniUser(),card:r.card?{id:r.card.id,title:r.card.title}:{},groupId:r.groupId?r.groupId:null},e.abrupt("return",w("board/".concat(t._id),{board:t,activity:n}));case 7:return e.abrupt("return",w("board/".concat(t._id),{board:t,activity:null}));case 8:e.next=15;break;case 10:return a={title:t.title,style:t.style,createdBy:D.getMiniUser(),members:[D.getMiniUser()]},e.next=13,k("board",a);case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}function ze(e,t){return function(){var r=Object(v.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Re.getById(e,t);case 3:a=r.sent,document.body.style.background=a.style.bgColor?a.style.bgColor:'url("'.concat(a.style.imgUrl,'")'),document.body.style.backgroundSize="cover",n({type:"SET_CURR_BOARD",board:a}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("Cannot load board",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}function We(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var n=Object(v.a)(f.a.mark((function n(a){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Ye(e,t),console.log(c),a({type:"UPDATE_BOARD",board:c}),n.prev=3,e.type||(e.board=t),M.emit("board-update",{action:e,activity:r}),n.next=8,Re.save(c,r);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.log("Cannot save board",n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}()}function He(e){return function(t){t({type:"SET_ADDING_BOARD",isAddingBoard:e})}}function Ve(e,t){var r=Object(h.a)({},t);return r.archivedCards=r.archivedCards.filter((function(t){return t.id!==e.id})),We({},r)}function qe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.isArchive=!0;var a=Object(h.a)({},r.groups.find((function(e){return e.id===t}))),c=a.cards.findIndex((function(t){return t.id===e.id})),o=Object(h.a)({},r);e.groupId=t,e.prevIndex=c,a.cards.splice(c,1),o.archivedCards=o.archivedCards?o.archivedCards:[],o.archivedCards.unshift(e);var s={type:"UPDATE_GROUP",group:a};return We(s,o,n)}function Je(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object(h.a)({},t.groups.find((function(t){return t.id===e.groupId})));if(n){var a=e.prevIndex;delete e.groupId,delete e.prevIndex,delete e.isArchive,n.cards.splice(a,0,e)}var c=Object(h.a)({},t);c.archivedCards=c.archivedCards.filter((function(t){return t.id!==e.id}));var o={type:"UPDATE_GROUP",group:n};return We(o,c,r)}function Qe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r.groups.find((function(e){return e.id===t})),c=a.cards.findIndex((function(t){return t.id===e.id}));a.cards.splice(c,1,e);var o={type:"UPDATE_GROUP",group:a};return We(o,r,n)}function Xe(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_CARD_ID",cardId:e})}catch(n){console.log("Cannot set card",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ye(e,t){var r=Object(h.a)({},t);switch(e.type){case"TOGGLE_STARRED":r.isStarred=e.isStarred;break;case"CHANGE_BOARD_STYLE":r.style=e.style,document.body.style.background=r.style.bgColor?r.style.bgColor:'no-repeat url("'.concat(r.style.imgUrl,'")'),document.body.style.backgroundSize="cover";break;case"CHANGE_TITLE":r.title=e.title;break;case"ADD_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=[].concat(Object(p.a)(r.members),[e.member]);break;case"REMOVE_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=Object(p.a)(r.members.filter((function(t){return t._id!==e.memberId})));break;case"ADD_GROUP":r.groups=[].concat(Object(p.a)(r.groups),[e.group]);break;case"UPDATE_GROUP":r.groups=Object(p.a)(r.groups.map((function(t){return t.id===e.group.id?e.group:t})));break;case"REMOVE_GROUP":r.groups=Object(p.a)(r.groups.filter((function(t){return t.id!==e.group.id})))}return r}function Ke(){return Object(ue.jsx)("div",{className:"overlay-screen"})}window.cs=Re;var Ze=r.p+"static/media/loader.1a7da032.svg";function $e(){return Object(ue.jsx)("div",{className:"loader",children:Object(ue.jsx)("img",{src:Ze,alt:"loading..."})})}var et=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={},e.getStarredBoards=function(){return e.props.boards.filter((function(e){return e.isStarred}))},e.toggleStarredBoard=function(t){var r=e.props.onUpdateBoard;t.isStarred=!t.isStarred,r({type:"TOGGLE_STARRED",isStarred:t.isStarred},t),M.emit("update",!0)},e.setFavicon=function(e){var t=document.getElementById("favicon");e.imgUrl?t.href=e.imgUrl:t.href="../../public/favicon.ico"},e.setAddBoard=function(){e.props.setAddingBoard(!0)},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D.getMiniUser(),e.next=3,this.props.loadBoards(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.boards,r=e.isAddingBoard;return t?Object(ue.jsx)("div",{className:"board-select-wrapper",children:Object(ue.jsxs)("div",{className:"boards-select main-container",children:[Object(ue.jsxs)("h2",{children:[" ",Object(ue.jsx)(je.a,{})," Starred Boards"]}),Object(ue.jsx)("div",{className:"starred-boards",children:Object(ue.jsx)(fe,{setFavicon:this.setFavicon,boards:this.getStarredBoards(),toggleStarredBoard:this.toggleStarredBoard})}),Object(ue.jsxs)("h2",{children:[" ",Object(ue.jsx)(te.a,{})," Workspace"]}),Object(ue.jsx)("div",{className:"workspace",children:Object(ue.jsx)(fe,{boards:t,toggleStarredBoard:this.toggleStarredBoard,setFavicon:this.setFavicon,setAddBoard:this.setAddBoard,isWorkspace:!0})}),r&&Object(ue.jsx)(Ke,{})]})}):Object(ue.jsx)($e,{})}}]),r}(a.a.Component);var tt={loadBoards:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.query(e);case 3:n=t.sent,r({type:"SET_BOARDS",boards:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot load boards",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:He,onUpdateBoard:We},rt=Object(i.b)((function(e){return{boards:e.boardModule.boards,isAddingBoard:e.boardModule.isAddingBoard,board:e.boardModule.currBoard,user:e.userModule.user}}),tt)(et),nt=r(63),at=r(19),ct=r(17),ot=r(20),st=r(60),it=r(117),lt=function(e,t){return X.getState().boardModule.currBoard.groups.find((function(e){return e.id===t})).cards.find((function(t){return t.id===e}))},dt=function(e){var t;return null===(t=X.getState().boardModule.currBoard.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})))||void 0===t?void 0:t.id},ut={handleChecklistChange:function(e,t,r,n){var a=X.getState().boardModule.currCardId,c=X.getState().boardModule.currBoard,o=dt(a),s=lt(a,o);if(t){var i=s.checklists.find((function(e){return e.id===t}));if("addTodo"===e)i.todos.push(r);else if("markTodo"===e){var l=i.todos.find((function(e){return e.id===r}));l.isDone=!l.isDone}else if("removeTodo"===e){var d=i.todos.findIndex((function(e){return e.id===r}));i.todos.splice(d,1)}else if("changeTitle"===e){var u=i.todos.find((function(e){return e.id===r}));u.title=n}else if("removeChecklist"===e){var b=s.checklists.findIndex((function(e){return e.id===t}));s.checklists.splice(b,1)}}else"addChecklist"===e&&(s.checklists||(s.checklists=[]),s.checklists.push({id:U.makeId(),title:r,todos:[]}));return[s,o,c]},handleMemberChange:function(e){var t,r,n,a=X.getState().boardModule.currCardId,c=X.getState().boardModule.currBoard,o=dt(a),s=lt(a,o);if(s.members||(s.members=[]),null===(t=s)||void 0===t||null===(r=t.members)||void 0===r?void 0:r.some((function(t){return t._id===e})))s=Object(h.a)(Object(h.a)({},s),{},{members:null===(n=s)||void 0===n?void 0:n.members.filter((function(t){return t._id!==e}))});else{var i=c.members.find((function(t){return t._id===e}));s.members.push(i)}return[s,o,c]},getGroupId:dt,getCardById:lt,handleLabelChange:function(e){var t,r,n=X.getState().boardModule.currCardId,a=X.getState().boardModule.currBoard,c=dt(n),o=lt(n,c);if(o.labelIds||(o.labelIds=[]),null===(t=o)||void 0===t?void 0:t.labelIds.some((function(t){return t===e})))o=Object(h.a)(Object(h.a)({},o),{},{labelIds:null===(r=o)||void 0===r?void 0:r.labelIds.filter((function(t){return t!==e}))});else{var s=a.labels.find((function(t){return t.id===e}));o.labelIds.push(s.id)}return[o,c,a]},handleDueDateChange:function(e){var t=X.getState().boardModule.currCardId,r=X.getState().boardModule.currBoard,n=dt(t),a=lt(t,n);return a.dueDate=e,[a,n,r]},getFormattedTime:function(e){if(!e)return"";var t=e-Date.now();if(t<0){var r=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getMonth()],a=r.getDate();return"".concat(n," ").concat(a," at 12:00 AM")}if(t<=864e5)return"tomorrow at 12:00 AM";var c=new Date(e),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],s=c.getDate();return"".concat(o," ").concat(s," at 12:00 AM")},getUploadTime:function(e){var t=Date.now()-e;if(t<6e4)return"Added a few seconds ago";if(t<12e4)return"Added 1 minute ago";if(t<36e5){var r=Math.floor(t/1e3/60);return"Added ".concat(r," minutes ago")}if(t<468e5){var n=Math.floor(t/1e3/60/60);return"Added ".concat(n," hours ago")}var a=new Date(e),c=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();if(t<864e5)return"Added today at ".concat(a.getHours(),":").concat(c," ");if(t<1728e5)return"Added yesterday at ".concat(a.getHours(),":").concat(c);var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return"Added ".concat(o," ").concat(s," at ").concat(a.getHours(),":").concat(c)},handleFileAdd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attachment",r=X.getState().boardModule.currCardId,n=X.getState().boardModule.currBoard,a=dt(r),c=lt(r,a);return c.attachments||(c.attachments=[]),c.attachments.push({id:U.makeId(),url:e,title:t,addedAt:Date.now()}),[c,a,n]},handleFileRemove:function(e){var t=X.getState().boardModule.currCardId,r=X.getState().boardModule.currBoard,n=dt(t),a=lt(t,n),c=a.attachments.findIndex((function(t){return t.id===e}));return a.attachments.splice(c,1),[a,n,r]},getGroupById:function(e){return X.getState().boardModule.currBoard.groups.find((function(t){return t.cards.find((function(t){return t.id===e}))}))},handleMoveCard:function(e,t,r){var n=X.getState().boardModule.currBoard,a=n.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),c=lt(e,a.id),o=a.cards.findIndex((function(t){return t.id===e}));return a.cards.splice(o,1),n.groups.find((function(e){return e.id===t})).cards.splice(r,0,c),n},handleCopyCard:function(e,t,r,n){var a=X.getState().boardModule.currBoard,c=a.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),o=lt(e,c.id);return a.groups.find((function(e){return e.id===t})).cards.splice(r,0,Object(h.a)(Object(h.a)({},o),{},{id:U.makeId(),title:n})),a},handleToggleArchive:function(e){var t=X.getState().boardModule.currBoard,r=dt(e),n=lt(e,r);return n.isArchive=!n.isArchive,[n,r,t]},handleRemoveCard:function(e){var t=Object(h.a)({},X.getState().boardModule.currBoard).groups.find((function(t){return t.cards.some((function(t){return t.id===e}))}));t.cards=t.cards.filter((function(t){return t.id!==e}))},onAddComment:function(e){var t=X.getState().boardModule.currCardId,r=X.getState().boardModule.currBoard,n=X.getState().userModule.user,a=dt(t),c=lt(t,a);return c.comments||(c.comments=[]),c.comments.unshift({id:U.makeId(),author:n,txt:e,addedAt:Date.now()}),[c,a,r]},handleCommentRemove:function(e){var t=X.getState().boardModule.currCardId,r=X.getState().boardModule.currBoard,n=dt(t),a=lt(t,n),c=a.comments.findIndex((function(t){return t.id===e}));return a.comments.splice(c,1),[a,n,r]},getCommentTime:function(e){var t=Date.now()-e;if(t<6e4)return"a few seconds ago";if(t<12e4)return"1 minute ago";if(t<36e5){var r=Math.floor(t/1e3/60);return"".concat(r," minutes ago")}if(t<468e5){var n=Math.floor(t/1e3/60/60);return"".concat(n," hours ago")}var a=new Date(e),c=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();if(t<864e5)return"today at ".concat(a.getHours(),":").concat(c," ");if(t<1728e5)return"yesterday at ".concat(a.getHours(),":").concat(c);var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return"".concat(o," ").concat(s," at ").concat(a.getHours(),":").concat(c)},handleAttachmentEdit:function(e,t){if(e){var r=X.getState().boardModule.currCardId,n=X.getState().boardModule.currBoard,a=dt(r),c=lt(r,a);return c.attachments.find((function(t){return t.id===e})).title=t,[c,a,n]}}};var bt={onUpdateBoard:We},pt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),bt)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,c=e.onClose,o=Object(n.useState)(null),s=Object(ct.a)(o,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(ct.a)(d,2),b=u[0],p=u[1];Object(n.useEffect)((function(){var e=ut.getGroupById(r,t._id);l(e);var n=e.cards.findIndex((function(e){return e.id===r}));p(n+1)}),[t]);var h=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var c=t.groups.find((function(e){return e.id===a}));l(c),p(c.cards.length+1)}else"position"===n&&p(a)};return i?Object(ue.jsxs)("div",{className:"move-card",children:[Object(ue.jsx)("h4",{children:"Select destination"}),Object(ue.jsxs)("div",{className:"select-board",children:[Object(ue.jsx)("span",{className:"label",children:"Board"}),Object(ue.jsx)("span",{className:"select-value",children:t.title}),Object(ue.jsx)("select",{name:"board",onChange:h,children:Object(ue.jsx)("option",{value:t._id,children:t.title})})]}),Object(ue.jsxs)("div",{className:"flex bottom-container",children:[Object(ue.jsxs)("div",{className:"select-group",children:[Object(ue.jsx)("span",{className:"label",children:"List"}),Object(ue.jsx)("span",{className:"select-value",children:i.title}),Object(ue.jsx)("select",{name:"group",onChange:h,children:t.groups.map((function(e){return Object(ue.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(ue.jsxs)("div",{className:"select-position",children:[Object(ue.jsx)("span",{className:"label",children:"Position"}),Object(ue.jsx)("span",{className:"select-value",children:b}),Object(ue.jsx)("select",{name:"position",onChange:h,children:function(){for(var e=i.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(ue.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(ue.jsx)("button",{className:"move-btn card-edit-btn secondary",onClick:function(){var e=i.id,t=b-1,n=ut.handleMoveCard(r,e,t);a({type:""},n),c()},children:"Move"})]}):null}));var ht={onUpdateBoard:We},jt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),ht)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,c=e.onClose,o=Object(n.useState)(""),s=Object(ct.a)(o,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(ct.a)(d,2),b=u[0],p=u[1],h=Object(n.useState)(null),j=Object(ct.a)(h,2),m=j[0],f=j[1];Object(n.useEffect)((function(){var e=ut.getGroupById(r,t._id),n=ut.getCardById(r,e.id);l(n.title),p(e);var a=e.cards.findIndex((function(e){return e.id===r}));f(a+1)}),[t]);var v=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var c=t.groups.find((function(e){return e.id===a}));p(c),f(c.cards.length+1)}else"position"===n?f(a):"title"===n&&l(a)};return b?Object(ue.jsxs)("div",{className:"copy-card",children:[Object(ue.jsx)("label",{children:"Title"}),Object(ue.jsx)("textarea",{name:"title",className:"search-input",autoFocus:!0,value:i,onChange:v}),Object(ue.jsx)("label",{children:"Copy to..."}),Object(ue.jsxs)("div",{className:"select-board",children:[Object(ue.jsx)("span",{className:"label",children:"Board"}),Object(ue.jsx)("span",{className:"select-value",children:t.title}),Object(ue.jsx)("select",{name:"board",onChange:v,children:Object(ue.jsx)("option",{value:t._id,children:t.title})})]}),Object(ue.jsxs)("div",{className:"flex bottom-container",children:[Object(ue.jsxs)("div",{className:"select-group",children:[Object(ue.jsx)("span",{className:"label",children:"List"}),Object(ue.jsx)("span",{className:"select-value",children:b.title}),Object(ue.jsx)("select",{name:"group",onChange:v,children:t.groups.map((function(e){return Object(ue.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(ue.jsxs)("div",{className:"select-position",children:[Object(ue.jsx)("span",{className:"label",children:"Position"}),Object(ue.jsx)("span",{className:"select-value",children:m}),Object(ue.jsx)("select",{name:"position",onChange:v,children:function(){for(var e=b.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(ue.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(ue.jsx)("button",{className:"copy-btn card-edit-btn secondary",onClick:function(){var e=b.id,t=m-1,n=ut.handleCopyCard(r,e,t,i);a({type:""},n),c()},children:"Create card"})]}):null})),mt=r(24),ft=a.a.forwardRef((function(e,t){var r=e.onClose,a=e.title,c=e.children,o=e.isLabel,s=e.handleEdit,i=Object(n.useRef)(),l=Object(n.useRef)(),d=Object(n.useState)({top:null,bottom:null,right:null,left:null}),u=Object(ct.a)(d,2),b=u[0],p=u[1];Object(n.useEffect)((function(){i.current&&j({width:i.current.offsetWidth,height:i.current.offsetHeight});var e=function(e){var n,a=i.current;(null===a||void 0===a?void 0:a.contains(e.target))||(null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.contains(e.target))||r()};return window.addEventListener("mouseup",e),window.addEventListener("resize",j),function(){window.removeEventListener("mouseup",e),window.removeEventListener("resize",j)}}),[r,t]);var j=function(e){var r,n=e.width,a=e.height,c=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(c){var o,s,i,d=window.innerWidth-(c.left+n)<100,u=window.innerHeight-a-45<0;if(i=c.height+8,d?s=0:o=0,console.log(window),console.log(c),u)l.current.style.maxHeight="".concat(window.innerHeight-c.bottom-60,"px");else{var b=350;a||(b=window.innerHeight-c.bottom-60),l.current&&(l.current.style.maxHeight="".concat(b,"px"))}p({top:i,bottom:undefined,right:s,left:o})}};return Object(ue.jsxs)("div",{ref:function(e){return i.current=e},className:"dynamic-popover",style:Object(h.a)({position:"absolute"},b),children:[a?Object(ue.jsxs)("div",{className:"popover-header",children:[o&&Object(ue.jsx)("span",{className:"back-btn",onClick:s,children:Object(ue.jsx)(ot.j,{})}),Object(ue.jsx)("p",{children:a}),Object(ue.jsx)("span",{className:"close-btn",onClick:r,children:Object(ue.jsx)(mt.b,{})})]}):Object(ue.jsx)("div",{className:"relative",style:{height:16},children:Object(ue.jsx)("span",{className:"close-popover-icon",onClick:r,children:Object(ue.jsx)(mt.b,{})})}),Object(ue.jsx)("div",{className:"popover-content",ref:l,children:c})]})}));function vt(e){var t=e.Icon,r=e.title;return Object(ue.jsx)("div",{className:"label-container",children:Object(ue.jsxs)("button",{className:"sidebar-label card-edit-btn sidebar-btn",style:Object(h.a)({position:"relative"},"Delete"===r?{backgroundColor:"#b04632",color:"#fff"}:{}),children:[Object(ue.jsx)("div",{className:"list-item-layover"}),Object(ue.jsxs)("div",{className:"btn-label-container flex",children:[Object(ue.jsx)(t,{}),Object(ue.jsx)("p",{children:r})]})]})})}function gt(e){var t=e.item,r=Object(n.useState)(!1),a=Object(ct.a)(r,2),c=a[0],o=a[1],s=Object(n.useRef)(),i=Object(n.useMemo)((function(){return t.component}),[t]);return Object(ue.jsx)("div",{className:"label-wrapper",children:Object(ue.jsxs)("div",{ref:s,className:"relative ".concat(c?"popover-open":""),children:[Object(ue.jsx)("span",{onClick:function(){return o(!c)},children:Object(ue.jsx)(vt,{Icon:t.icon,title:t.title})}),c&&Object(ue.jsx)(ft,{onClose:function(){return o(!1)},title:t.title,ref:s,children:Object(ue.jsx)(i,{onClose:function(){return o(!1)}})})]})})}var Ot=[{icon:ot.d,title:"Move",component:pt},{icon:st.a,title:"Copy",component:jt}],xt={onArchiveCard:qe,onUnArchiveCard:Je,onRemoveCard:Ve},Ct=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),xt)((function(e){var t=e.currCardId,r=e.board,a=e.onArchiveCard,c=e.onUnArchiveCard,o=e.onRemoveCard,s=e.goBack,i=Object(n.useState)(!1),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(null),p=Object(ct.a)(b,2),h=p[0],j=p[1],m=Object(n.useState)(null),f=Object(ct.a)(m,2),v=f[0],g=f[1];Object(n.useEffect)((function(){var e=ut.getGroupId(t),r=ut.getCardById(t,e);u(r.isArchive||!1),j(e),g(r)}),[]);return Object(ue.jsx)("div",{style:{position:"relative"},children:Object(ue.jsxs)("div",{className:"card-edit-actions",children:[Object(ue.jsx)("h3",{className:"sidebar-title",children:"Actions"}),Object(ue.jsxs)("div",{className:"actions-container",children:[Ot.map((function(e,t){return Object(ue.jsx)(gt,{item:e},e.title+t)})),d?Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"label-wrapper",onClick:function(){c(v,r),u(!1)},children:Object(ue.jsx)(vt,{Icon:ot.c,title:"Send to board"})}),Object(ue.jsx)("div",{className:"label-wrapper",onClick:function(){o(v,r)},children:Object(ue.jsx)(vt,{Icon:je.e,title:"Delete"})})]}):Object(ue.jsx)("div",{className:"label-wrapper",onClick:function(){a(v,h,r),u(!0),s()},children:Object(ue.jsx)(vt,{Icon:it.a,title:"Archive"})})]})]})})})),yt=r(268);function kt(e){var t=e.member,r=e.size,n=e.style,a=void 0===n?{}:n;return Object(ue.jsx)(yt.a,{name:t.fullname,src:t.imgUrl,size:function(){switch(r){case"sm":return 20;case"lg":return 50;default:return 32}}(),style:a,round:!0})}var wt={onUpdateCard:Qe},Nt=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId,user:e.userModule.user}}),wt)((function(e){var t=e.member,r=e.currCardId,a=e.onUpdateCard,c=e.user,o=(e.onAddUserMention,Object(n.useState)(!1)),s=Object(ct.a)(o,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){var e,n=ut.getGroupId(r),a=null===(e=ut.getCardById(r,n).members)||void 0===e?void 0:e.find((function(e){return e._id===t._id}));l(a)}),[r,t._id]),Object(ue.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){l(!i);var e=ut.handleMemberChange(t._id),n=i?{txt:Me(t.fullname),currCardId:r}:{txt:Be(t.fullname),currCardId:r};a.apply(void 0,Object(p.a)(e).concat([n]));var o=e[1],s=e[2],d=e[0],u={id:U.makeId(),user:c,action:i?"Removed":"Added",board:{boardId:s._id,title:s.title},card:{cardId:d.id,title:d.title},groupId:o,createdAt:Date.now()};M.emit("send-mention",{userId:t._id,mention:u}),D.addUserMention(t._id,u)},children:[Object(ue.jsx)("div",{className:"list-item-layover"}),Object(ue.jsx)("div",{style:{width:32},children:Object(ue.jsx)(kt,{member:t})}),Object(ue.jsx)("div",{className:"popper-member-name",children:Object(ue.jsx)("p",{children:t.fullname})}),i&&Object(ue.jsx)("div",{className:"popper-member-check",children:Object(ue.jsx)(ot.g,{})})]})})),St=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board,r=Object(n.useState)(t.members),a=Object(ct.a)(r,2),c=a[0],o=a[1];return Object(ue.jsxs)("div",{className:"member-list",children:[Object(ue.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search...",onChange:function(e){var r=e.target.value,n=t.members.filter((function(e){return e.fullname.toLowerCase().includes(r.toLowerCase())}));o(n)}}),Object(ue.jsx)("h4",{children:"Board Members"}),Object(ue.jsx)("div",{className:"flex column",children:c.map((function(e){return Object(ue.jsx)(Nt,{member:e},e._id)}))})]})})),It=r(254),At=r.n(It),Bt=(r(370),{onUpdateCard:Qe}),Mt=Object(i.b)(null,Bt)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useState)(new Date),c=Object(ct.a)(a,1)[0],o=Object(n.useState)(null),s=Object(ct.a)(o,1)[0],i=Object(n.useState)(null),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=function(){var e=ut.handleDueDateChange(d);t.apply(void 0,Object(p.a)(e)),r()};return Object(ue.jsxs)("div",{className:"date-picker",children:[Object(ue.jsx)(At.a,{selected:c,onChange:function(e){u(e.getTime())},startDate:c,endDate:s,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(ue.jsxs)("div",{className:"picker-btns flex column",children:[Object(ue.jsx)("button",{className:"card-edit-btn secondary long",onClick:b,children:"Save"}),Object(ue.jsx)("button",{className:"card-edit-btn long",onClick:function(){u(null),b()},children:"Remove"})]})]})})),Ut=r(61);var Et={onUpdateCard:Qe},Dt=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),Et)((function(e){var t=e.label,r=e.currCardId,a=e.onUpdateCard,c=e.handleEdit,o=Object(n.useState)(!1),s=Object(ct.a)(o,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){var e,n=ut.getGroupId(r),a=null===(e=ut.getCardById(r,n).labelIds)||void 0===e?void 0:e.some((function(e){return e===t.id}));l(a)}),[r,t.id]),Object(ue.jsx)("div",{className:"label-preview flex",children:Object(ue.jsxs)("div",{className:"label-preview flex",children:[Object(ue.jsxs)("div",{className:"popper-label ",style:{backgroundColor:t.color},onClick:function(){l(!i);var e=ut.handleLabelChange(t.id),n=ut.getGroupId(r),c=i?{txt:Ee(t.title),groupId:n}:{txt:Ue(t.title),groupId:n};a.apply(void 0,Object(p.a)(e).concat([c]))},children:[Object(ue.jsxs)("span",{children:[" ",t.title||""]}),i&&Object(ue.jsx)("div",{className:"popper-label-check",children:Object(ue.jsx)(ot.g,{})})]}),Object(ue.jsx)("div",{className:"icon-wrapper",onClick:function(){return c(t.color)},children:Object(ue.jsx)(Ut.a,{})})]})})}));var Rt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board,r=e.handleEdit,a=Object(n.useState)(t.labels),c=Object(ct.a)(a,2),o=c[0],s=c[1];return Object(ue.jsxs)("div",{className:"label-list-container",children:[Object(ue.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search labels...",onChange:function(e){var r=e.target.value,n=t.labels.filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())}));s(n)}}),Object(ue.jsx)("h4",{children:"Labels"}),Object(ue.jsx)("div",{className:"flex column label-list",children:o.map((function(e){return Object(ue.jsx)(Dt,{label:e,handleEdit:r},e.id)}))})]})})),Tt=r(83);var _t={onUpdateCard:Qe},Lt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),_t)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useRef)(),c=Object(n.useState)("Checklist"),o=Object(ct.a)(c,2),s=o[0],i=o[1];return Object(n.useEffect)((function(){a.current.focus(),a.current.select()}),[]),Object(ue.jsxs)("form",{className:"popover-checklist",onSubmit:function(e){e.preventDefault();var n=ut.handleChecklistChange("addChecklist",null,s),a={txt:De(s)};t.apply(void 0,Object(p.a)(n).concat([a])),i(""),r()},children:[Object(ue.jsx)("label",{htmlFor:"checklist-title",children:"Title"}),Object(ue.jsx)("input",{className:"search-input",ref:a,value:s,onChange:function(e){var t=e.target.value;i(t)}}),Object(ue.jsx)("button",{className:"card-edit-btn secondary",children:"Add"})]})}));function Ft(e){var t="https://api.cloudinary.com/v1_1/".concat("dh4cdbmav","/image/upload"),r=new FormData;return r.append("file",e.target.files[0]),console.log("ev.target.files[0]):",e.target.files[0]),r.append("upload_preset","wbls0qti"),fetch(t,{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return e.url})).catch((function(e){return console.error(e)}))}var Pt={onUpdateCard:Qe},Gt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Pt)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useState)(""),c=Object(ct.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(""),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=Object(n.useRef)(),h=function(){var e=Object(v.a)(f.a.mark((function e(n){var a,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0].name,e.next=3,Ft(n);case 3:c=e.sent,o=ut.handleFileAdd(c,a),t.apply(void 0,Object(p.a)(o)),r();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ue.jsxs)("div",{className:"popover-attach-file",children:[Object(ue.jsx)("div",{className:"attach-from",children:Object(ue.jsxs)("label",{htmlFor:"upload",children:[Object(ue.jsx)("span",{"aria-hidden":"true",children:"Computer"}),Object(ue.jsx)("input",{type:"file",id:"upload",style:{display:"none"},onChange:h})]})}),Object(ue.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=ut.handleFileAdd(d,o);t.apply(void 0,Object(p.a)(n)),r()},className:"attach-link",children:[Object(ue.jsx)("label",{children:"Attach a link"}),Object(ue.jsx)("input",{ref:b,className:"search-input",placeholder:"Paste any link here...",value:d,onChange:function(e){return u(e.target.value)}}),d&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("label",{children:"Link name (optional)"}),Object(ue.jsx)("input",{className:"search-input",value:o,onChange:function(e){return s(e.target.value)}})]}),Object(ue.jsx)("button",{className:"card-edit-btn",children:"Attach"})]})]})}));var zt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.item,r=e.currCardId,a=Object(n.useState)(!1),c=Object(ct.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(!1),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),p=Object(ct.a)(b,2),h=p[0],j=p[1],m=Object(n.useRef)(),f=Object(n.useMemo)((function(){return t.component}),[t]),v=Object(n.useMemo)((function(){return t.editComponent}),[t]),g=ut.getGroupId(r),O=ut.getCardById(r,g),x=function(e){d?u(!1):(j(e),u(!0))};return Object(ue.jsx)("div",{className:"label-wrapper",children:function(){var e,r;return"Cover"!==t.title||!(null===O||void 0===O||null===(e=O.style)||void 0===e?void 0:e.bgColor)&&!(null===O||void 0===O||null===(r=O.style)||void 0===r?void 0:r.imgUrl)}()&&Object(ue.jsxs)("div",{ref:m,className:"relative ".concat(o?"popover-open":""),children:[Object(ue.jsx)("span",{onClick:function(){return s(!o)},children:Object(ue.jsx)(vt,{Icon:t.icon,title:t.title})}),o&&Boolean(t.editComponent)&&Object(ue.jsx)(ft,{handleEdit:x,onClose:function(){return s(!1)},title:t.title,ref:m,isLabel:d,children:d?Object(ue.jsx)(v,{color:h,handleEdit:x,onClose:function(){return s(!1)}}):Object(ue.jsx)(f,{handleEdit:x,onClose:function(){return s(!1)}})}),o&&!Boolean(t.editComponent)&&Object(ue.jsx)(ft,{onClose:function(){return s(!1)},title:t.title,ref:m,children:Object(ue.jsx)(f,{onClose:function(){return s(!1)}})})]})})})),Wt=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={currCard:null,groupId:null,selectedEl:null,initialStyle:null,currStyle:null,selectedSize:"half"},e.handleClick=function(t,r,n){var a;t.target.classList.add("selected"),null===(a=e.state.selectedEl)||void 0===a||a.classList.remove("selected"),e.setState({selectedEl:t.target});var c=e.props,o=c.board,s=c.onUpdateCard,i=e.state,l=i.currCard,d=i.groupId;e.setState({currStyle:"color"===n?{backgroundColor:r}:{backgroundImage:"url(".concat(r,")")}}),l.style="color"===n?{bgColor:r}:{imgUrl:r},s(l,d,o)},e.handleCoverRemove=function(){var t=e.props,r=t.board,n=t.onUpdateCard,a=e.state,c=a.currCard,o=a.groupId;c.style=null,n(c,o,r)},e.handleSizeChange=function(t){var r=e.props,n=r.board,a=r.onUpdateCard,c=e.state,o=c.currCard,s=c.groupId;o.style.isFull="full"===t,e.setState({selectedSize:t}),a(o,s,n)},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.currCardId,t=ut.getGroupId(e),r=ut.getCardById(e,t);r.style&&(r.style.isFull&&this.setState({selectedSize:r.style.isFull?"full":"half"}),r.style.bgColor?this.setState({currStyle:{backgroundColor:r.style.bgColor}}):r.style.imgUrl&&this.setState({currStyle:{backgroundImage:"url(".concat(r.style.imgUrl,")")}})),this.setState({currCard:r,groupId:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.currCard,n=t.currStyle,a=t.selectedSize;if(!r)return"";return console.log(n),Object(ue.jsxs)("section",{className:"modal-cover-edit flex column",children:[Object(ue.jsxs)("div",{className:"size-container flex column",children:[Object(ue.jsx)("h4",{children:"Size"}),Object(ue.jsxs)("div",{className:"size-options flex",children:[Object(ue.jsxs)("div",{className:"size-option half ".concat("half"===a?"selected":""),onClick:function(){return e.handleSizeChange("half")},children:[Object(ue.jsx)("div",{className:"colored-half",style:n}),Object(ue.jsxs)("div",{className:"line-wrapper-half",children:[Object(ue.jsx)("div",{className:"first-line"}),Object(ue.jsx)("div",{className:"second-line"}),Object(ue.jsxs)("div",{className:"third-line flex",children:[Object(ue.jsx)("div",{className:"first-fragment"}),Object(ue.jsx)("div",{className:"second-fragment"})]}),Object(ue.jsx)("div",{className:"circle"})]})]}),Object(ue.jsx)("div",{className:"size-option full ".concat("full"===a?"selected":""),"data-size":"full",onClick:function(){return e.handleSizeChange("full")},style:n,children:Object(ue.jsxs)("div",{className:"line-wrapper-full",children:[Object(ue.jsx)("div",{className:"first-line"}),Object(ue.jsx)("div",{className:"second-line"})]})})]}),Object(ue.jsx)("button",{className:"card-edit-btn",onClick:this.handleCoverRemove,children:"Remove cover"})]}),Object(ue.jsxs)("div",{className:"flex column",children:[Object(ue.jsx)("h4",{children:"Colors"}),Object(ue.jsx)("div",{className:"color-container flex",children:["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#517dab","#29cce5","#6deca9","#ff8ed4","#172b4d"].map((function(t,r){return Object(ue.jsx)("div",{className:"cover-color-option",style:{backgroundColor:t},onClick:function(r){return e.handleClick(r,t,"color")}},r)}))})]}),r.attachments&&Boolean(r.attachments.length)&&Object(ue.jsxs)("div",{className:"flex column",children:[Object(ue.jsx)("h4",{children:"Attachments"}),Object(ue.jsx)("div",{className:"attachments-container flex",children:r.attachments.map((function(t){return Object(ue.jsx)("div",{className:"cover-image-option",style:{backgroundImage:"url(".concat(t.url,")")},onClick:function(r){return e.handleClick(r,t.url,"img")}},t.id)}))})]})]})}}]),r}(n.Component),Ht={onUpdateCard:Qe},Vt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Ht)(Wt),qt=r(35);var Jt=["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#517dab","#29cce5","#6deca9","#ff8ed4","#172b4d"],Qt={onUpdateCard:Qe,onUpdateBoard:We},Xt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Qt)((function(e){var t=e.color,r=e.board,a=e.onUpdateBoard,c=e.onClose,o=e.handleEdit,s=e.onUpdateCard,i=Object(n.useState)(null),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),j=Object(ct.a)(b,2),m=j[0],f=j[1],v=Object(n.useRef)();Object(n.useEffect)((function(){var e;u(t);var n=r.labels.find((function(e){return e.color===t}));f((null===n||void 0===n?void 0:n.title)||""),null===(e=v.current)||void 0===e||e.select()}),[]);var g=function(e){u(e.target.dataset.color);var t=r.labels.find((function(t){return t.color===e.target.dataset.color}));f((null===t||void 0===t?void 0:t.title)||"")};return Object(ue.jsxs)("div",{className:"label-edit",children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("label",{children:"Name"}),Object(ue.jsx)("input",{ref:v,className:"search-input",onChange:function(e){var t=e.target.value;f(t)},value:m})]}),Object(ue.jsxs)("div",{children:[Object(ue.jsx)("label",{children:"Select a color"}),Object(ue.jsx)("div",{className:"color-container flex",children:Jt.map((function(e,t){return Object(ue.jsx)("div",{"data-color":e,className:"label-color-option",style:{backgroundColor:e},onClick:g,children:e===d&&Object(ue.jsx)("span",{children:Object(ue.jsx)(je.c,{})})},t)}))})]}),Object(ue.jsxs)("div",{className:"btns-container",children:[Object(ue.jsx)("button",{className:"card-edit-btn save-btn",onClick:function(){var e=Object(h.a)({},r),t=e.labels.find((function(e){return e.color===d}));t?t.title=m:(t={id:U.makeId(),color:d,title:m},e.labels.push(t)),a({type:""},e),o(),c();var n=ut.handleLabelChange(t.id);s.apply(void 0,Object(p.a)(n))},children:"Save"}),Object(ue.jsx)("button",{className:"card-edit-btn delete-btn",children:"Delete"})]})]})})),Yt=function(){return Object(ue.jsx)("div",{style:{position:"relative"},children:Object(ue.jsxs)("div",{className:"add-to-card",children:[Object(ue.jsx)("h3",{className:"sidebar-title",children:"Add to card"}),Object(ue.jsx)("div",{className:"add-to-card-container",children:Kt.map((function(e,t){return Object(ue.jsx)(zt,{item:e},e.title+t)}))})]})})},Kt=[{icon:Ut.c,title:"Members",component:St},{icon:st.c,title:"Labels",component:Rt,editComponent:Xt},{icon:ot.e,title:"Checklist",component:Lt},{icon:ot.k,title:"Dates",component:Mt},{icon:Tt.b,title:"Attachment",component:Gt},{icon:qt.a,title:"Cover",component:Vt}],Zt=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){return Object(Y.a)(this,r),t.apply(this,arguments)}return Object(K.a)(r,[{key:"render",value:function(){return Object(ue.jsxs)("div",{className:"sidebar",children:[Object(ue.jsx)(Yt,{}),Object(ue.jsx)(Ct,{goBack:this.props.goBack})]})}}]),r}(n.Component),$t={onUpdateCard:Qe},er=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),$t)((function(e){var t=e.currCardId,r=e.onUpdateCard,a=e.board,c=Object(n.useState)(!1),o=Object(ct.a)(c,2),s=o[0],i=o[1],l=Object(n.useRef)(),d=ut.getGroupId(t),u=ut.getCardById(t,d),b=null===u||void 0===u?void 0:u.dueDate,p=ut.getFormattedTime(b),h=function(){return u.isComplete?{title:"Complete",bgColor:"#61bd4f"}:b-Date.now()<0?{title:"Overdue",bgColor:"#eb5a46"}:b-Date.now()<=864e5?{title:"Due soon",bgColor:"#f2d600"}:{title:"",bgColor:""}};return Object(ue.jsx)(ue.Fragment,{children:b&&Object(ue.jsxs)("div",{className:"due-date-container",children:[Object(ue.jsx)("h3",{className:"small-title",children:"Due date"}),Object(ue.jsxs)("div",{className:"due-date",children:[Object(ue.jsx)("input",{type:"checkbox",className:"main-checkbox",checked:u.isComplete,onChange:function(){u.isComplete=!u.isComplete,r(u,d,a)}}),Object(ue.jsxs)("div",{className:"card-edit-btn",ref:l,children:[Object(ue.jsx)("span",{className:"due-date-time",children:p}),Object(ue.jsx)("span",{style:{backgroundColor:h().bgColor,textTransform:"uppercase",fontSize:12,padding:"0 3px",borderRadius:2},children:h().title}),Object(ue.jsx)("span",{className:"due-date-icon",children:Object(ue.jsx)(ot.i,{})}),Object(ue.jsx)("div",{className:"list-item-layover",onClick:function(){return i(!s)}}),s&&Object(ue.jsx)(ft,{onClose:function(){return i(!1)},title:"Dates",ref:l,children:Object(ue.jsx)(Mt,{onClose:function(){return i(!1)}})})]})]})]})})})),tr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.currCardId,r=e.board,a=Object(n.useState)(!1),c=Object(ct.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(!1),l=Object(ct.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),p=Object(ct.a)(b,2),h=p[0],j=p[1],m=Object(n.useRef)(),f=ut.getGroupId(t),v=ut.getCardById(t,f).labelIds,g=function(e){return null===e||void 0===e?void 0:e.map((function(e){return r.labels.find((function(t){return t.id===e}))}))}(v),O=function(e){d?u(!1):(j(e),u(!0))};return Object(ue.jsx)(ue.Fragment,{children:(null===v||void 0===v?void 0:v.length)?Object(ue.jsxs)("div",{className:"labels-container",children:[Object(ue.jsx)("h3",{className:"small-title",children:"Labels"}),Object(ue.jsxs)("div",{className:"labels",children:[g.map((function(e){return Object(ue.jsx)("div",{className:"card-label",style:{backgroundColor:e.color},children:e.title||""},e.id)})),Object(ue.jsxs)("div",{ref:m,className:"card-label add-label relative",children:[Object(ue.jsx)("div",{className:"list-item-layover",onClick:function(){return s(!o)}}),Object(ue.jsx)(je.f,{}),o&&Object(ue.jsx)(ft,{handleEdit:O,onClose:function(){return s(!1)},title:"Labels",ref:m,isLabel:d,children:d?Object(ue.jsx)(Xt,{handleEdit:O,color:h,onClose:function(){return s(!1)}}):Object(ue.jsx)(Rt,{handleEdit:O,onClose:function(){return s(!1)}})})]})]})]}):null})})),rr={onUpdateCard:Qe},nr=Object(i.b)(null,rr)((function(e){var t=e.member,r=e.onUpdateCard;return Object(ue.jsxs)("div",{className:"mini-user flex column",children:[Object(ue.jsxs)("div",{className:"main flex",children:[Object(ue.jsx)(kt,{size:"lg",member:t}),Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h3",{className:"mini-user-fullname",children:t.fullname}),Object(ue.jsx)("p",{children:t.username})]})]}),Object(ue.jsx)("p",{className:"remove-member",onClick:function(){var e=ut.handleMemberChange(t._id);r.apply(void 0,Object(p.a)(e))},children:"Remove from card"})]})}));function ar(e){var t=e.member,r=Object(n.useState)(!1),a=Object(ct.a)(r,2),c=a[0],o=a[1],s=Object(n.useRef)();return Object(ue.jsxs)("div",{className:"card-member relative",ref:s,children:[Object(ue.jsxs)("span",{style:{cursor:"pointer"},children:[Object(ue.jsx)("div",{className:"list-item-layover round",onClick:function(){return o(!c)}}),Object(ue.jsx)(kt,{member:t})]}),c&&Object(ue.jsx)(ft,{onClose:function(){return o(!1)},title:null,ref:s,children:Object(ue.jsx)(nr,{member:t})})]},t._id)}var cr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t,r,a=e.currCardId,c=Object(n.useState)(!1),o=Object(ct.a)(c,2),s=o[0],i=o[1],l=Object(n.useRef)(),d=ut.getGroupId(a);return r=ut.getCardById(a,d).members,Object(ue.jsx)(ue.Fragment,{children:(null===(t=r)||void 0===t?void 0:t.length)?Object(ue.jsxs)("div",{className:"members-container",children:[Object(ue.jsx)("h3",{className:"small-title",children:"Members"}),Object(ue.jsxs)("div",{className:"members",children:[r.map((function(e){return Object(ue.jsx)(ar,{member:e},e._id)})),Object(ue.jsxs)("div",{ref:l,className:"card-member add-member relative",children:[Object(ue.jsx)("div",{className:"list-item-layover round",onClick:function(){return i(!s)}}),Object(ue.jsx)(je.f,{}),s&&Object(ue.jsx)(ft,{onClose:function(){return i(!1)},title:"Members",ref:l,children:Object(ue.jsx)(St,{})})]})]})]}):null})})),or=function(){return Object(ue.jsxs)("div",{className:"members-labels-container",children:[Object(ue.jsx)(cr,{}),Object(ue.jsx)(tr,{}),Object(ue.jsx)(er,{})]})};function sr(e){var t=e.bgColor,r=e.completed,n={height:"100%",width:"".concat(r,"%"),backgroundColor:t,borderRadius:"inherit",textAlign:"right",transition:"width .5s ease-in-out"};return Object(ue.jsx)("div",{className:"outer-container",style:{height:8,width:"100%",backgroundColor:"#e0e0de",borderRadius:50,margin:"10px 0 10px 0px"},children:Object(ue.jsx)("div",{style:n})})}var ir=r(257),lr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={todoTitle:"",isEditTodo:!1},e.todoTextareaRef=a.a.createRef(),e.saveTodoBtnRef=a.a.createRef(),e.handleClick=function(t){var r,n,a,c,o,s;(null===(r=e.todoTextareaRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.saveTodoBtnRef)||void 0===a||null===(c=a.current)||void 0===c?void 0:c.contains(t.target))||(null===(o=e.newTodoTextarea)||void 0===o||null===(s=o.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isEditTodo:!1,todoTitle:""})},e.handleMarkTodo=function(){var t,r=ut.handleChecklistChange("markTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleRemoveTodo=function(){var t,r=ut.handleChecklistChange("removeTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleTitleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(at.a)({},n,a))},e.onChangeTitle=function(t){t.preventDefault();var r=e.props,n=r.checklistId,a=r.todo,c=r.onUpdateCard,o=e.state.todoTitle,s=ut.handleChecklistChange("changeTitle",n,a.id,o);c.apply(void 0,Object(p.a)(s)),e.setState({isEditTodo:!1,todoTitle:""})},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.todo,r=this.state,n=r.isEditTodo,a=r.todoTitle;return Object(ue.jsxs)("div",{className:"flex align-center todo-item",children:[Object(ue.jsx)("input",{className:"main-checkbox",type:"checkbox",name:t.id,checked:t.isDone,onChange:this.handleMarkTodo,onClick:function(){return e.setState({todoTitle:t.title})},style:{alignSelf:n?"flex-start":"center"}}),n?Object(ue.jsxs)("form",{onSubmit:this.onChangeTitle,style:{paddingBottom:9},children:[Object(ue.jsx)("textarea",{className:"description-textarea edit-todo",onFocus:function(){return e.setState({todoTitle:t.title})},autoFocus:!0,name:"todoTitle",value:a,ref:this.todoTextareaRef,onChange:this.handleTitleChange}),Object(ue.jsxs)("div",{className:"description-btns",children:[Object(ue.jsx)("button",{ref:this.saveTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(ue.jsx)("button",{onClick:function(){return e.setState({isEditTodo:!1,todoTitle:""})},children:Object(ue.jsx)(mt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(ue.jsxs)("div",{children:[Object(ue.jsx)("span",{className:t.isDone?"done":"",onClick:function(){return e.setState({isEditTodo:!0})},children:t.title}),Object(ue.jsx)("span",{className:"remove-todo-icon",onClick:this.handleRemoveTodo,children:Object(ue.jsx)(ir.a,{})})]})]})}}]),r}(n.Component),dr={onUpdateCard:Qe},ur=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),dr)(lr),br=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={percentage:0,isAddTodo:!1,newTodo:""},e.saveTodoBtnRef=a.a.createRef(),e.addTodoBtnRef=a.a.createRef(),e.newTodoTextarea=a.a.createRef(),e.handleClick=function(t){var r,n,a,c,o,s;(null===(r=e.saveTodoBtnRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.addTodoBtnRef)||void 0===a||null===(c=a.current)||void 0===c?void 0:c.contains(t.target))||(null===(o=e.newTodoTextarea)||void 0===o||null===(s=o.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isAddTodo:!1,newTodo:""})},e.setTodoPercentage=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.checklist.todos;if((null===r||void 0===r?void 0:r.length)||(null===(t=e.props.checklist)||void 0===t?void 0:t.todos.length)){var n=r.filter((function(e){return e.isDone})),a=n.length/r.length*100,c=Number.isInteger(a)?a:a.toFixed(0);e.setState({percentage:c})}else e.setState({percentage:0})},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(at.a)({},n,a))},e.onAddTodo=function(t){var r;t.preventDefault(),e.setState({isAddTodo:!1,newTodo:""});var n=ut.handleChecklistChange("addTodo",e.props.checklist.id,{id:U.makeId(),title:t.target[0].value,isDone:!1});(r=e.props).onUpdateCard.apply(r,Object(p.a)(n))},e.onRemoveChecklist=function(){var t,r=ut.handleChecklistChange("removeChecklist",e.props.checklist.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick),this.props.checklist.todos&&this.setTodoPercentage()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.setTodoPercentage()}},{key:"render",value:function(){var e,t=this,r=this.props.checklist,n=this.state,a=n.percentage,c=n.isAddTodo;return Object(ue.jsxs)("section",{className:"checklist-preview flex column",children:[Object(ue.jsxs)("section",{className:"flex space-between",children:[Object(ue.jsxs)("div",{className:"card-edit-title",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(ot.e,{})}),Object(ue.jsx)("h3",{children:r.title})]}),Object(ue.jsx)("button",{className:"card-edit-btn",onClick:this.onRemoveChecklist,children:"Delete"})]}),Object(ue.jsxs)("div",{className:"flex align-center",children:[Object(ue.jsxs)("span",{style:{fontSize:11,width:32,maxWidth:32,minWidth:32},children:[a,"%"]}),Object(ue.jsx)(sr,{completed:a,bgColor:100===a?"#61bd4f":"#5ba4cf"})]}),null===(e=r.todos)||void 0===e?void 0:e.map((function(e){return Object(ue.jsx)("div",{className:"todos-container",children:Object(ue.jsx)(ur,{todo:e,checklistId:r.id})},e.id)})),c?Object(ue.jsxs)("form",{onSubmit:this.onAddTodo,children:[Object(ue.jsx)("textarea",{rows:"2",className:"description-textarea add-todo",ref:this.newTodoTextarea,autoFocus:!0,name:"newTodo",placeholder:"Add an item",onChange:this.handleInputChange}),Object(ue.jsxs)("div",{className:"description-btns add-todo-btns",children:[Object(ue.jsx)("button",{ref:this.addTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(ue.jsx)("button",{onClick:function(){return t.setState({isAddTodo:!1,newTodo:""})},children:Object(ue.jsx)(mt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(ue.jsx)("button",{className:"card-edit-btn add-todo-btn",style:{alignSelf:"flex-start"},onClick:function(){return t.setState({isAddTodo:!0})},children:"Add an item"})]})}}]),r}(n.Component),pr={onUpdateCard:Qe},hr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),pr)(br),jr=r(258),mr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={currCard:{},isDescriptionOpen:!1},e.descriptionRef=a.a.createRef(),e.setDescriptionTextarea=function(){e.setState({isDescriptionOpen:!e.state.isDescriptionOpen})},e.handleDescriptionChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=ut.getGroupId(e.props.currCardId),a={txt:Ie(),card:t,groupId:n};e.props.onUpdateCard(t,n,r,a)},e.handleInputChange=function(t){var r=t.target.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},{description:r})})},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=ut.getGroupId(this.props.currCardId),t=ut.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.currCard,n=t.isDescriptionOpen;return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"description-container card-edit-title",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(mt.c,{})}),Object(ue.jsx)("h3",{children:"Description"}),r.description&&!n&&Object(ue.jsx)("button",{className:"card-edit-btn",onClick:function(){e.setDescriptionTextarea(),e.descriptionRef.current.focus()},children:" Edit"})]}),Object(ue.jsxs)("div",{className:"card-description",children:[Object(ue.jsx)("textarea",{ref:this.descriptionRef,className:"description-textarea ".concat(n?"open":""," ").concat(r.description?"filled":""),rows:n?"6":"3",onFocus:this.setDescriptionTextarea,onBlur:function(){e.setDescriptionTextarea(),e.handleDescriptionChange()},value:r.description,onChange:this.handleInputChange,placeholder:"Add a more detailed description..."}),n&&Object(ue.jsxs)("div",{className:"description-btns",children:[Object(ue.jsx)("button",{className:"card-edit-btn secondary",onClick:function(){return e.handleDescriptionChange()},children:"Save"}),Object(ue.jsx)("button",{onClick:this.setDescriptionTextarea,children:Object(ue.jsx)(mt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})]})}}]),r}(n.Component),fr={onUpdateCard:Qe},vr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),fr)(mr);var gr={onUpdateCard:Qe},Or=Object(i.b)((function(e){return{user:e.userModule.user}}),gr)((function(e){var t=e.comment,r=e.user,n=e.onUpdateCard,a=ut.getCommentTime(t.addedAt);return Object(ue.jsxs)("div",{className:"comment-preview flex",children:[Object(ue.jsx)(kt,{member:t.author}),Object(ue.jsxs)("div",{className:"flex column comment-info",children:[Object(ue.jsxs)("div",{className:"comment-data flex",children:[Object(ue.jsx)("span",{className:"author-name",children:t.author.fullname}),Object(ue.jsx)("span",{className:"comment-time",children:a})]}),Object(ue.jsx)("div",{className:"comment-txt",children:t.txt}),t.author._id===r._id&&Object(ue.jsx)("span",{className:"remove-btn",onClick:function(){var e=ut.handleCommentRemove(t.id);n.apply(void 0,Object(p.a)(e))},children:"Delete"})]})]})})),xr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isFocus:!1,isTxt:!1,commentTxt:"",currCard:null},e.commentRef=a.a.createRef(),e.handleChange=function(t){var r=t.target.value;e.setState({commentTxt:r}),r?e.setState({isTxt:!0}):e.setState({isTxt:!1})},e.handleClick=function(t){var r,n;(null===(r=e.commentRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||e.setState({isFocus:!1})},e.handleSubmit=function(t){t.stopPropagation();var r=e.state,n=r.isTxt,a=r.commentTxt,c=e.props.onUpdateCard;if(n){var o=ut.onAddComment(a);c.apply(void 0,Object(p.a)(o)),e.setState({isFocus:!1,commentTxt:""})}},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick);var e=ut.getGroupId(this.props.currCardId),t=ut.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.currCard,a=r.isFocus,c=r.isTxt,o=r.commentTxt,s=this.props.member;return n?Object(ue.jsxs)("div",{className:"comments-section",children:[Object(ue.jsxs)("section",{className:"flex space-between",children:[Object(ue.jsxs)("div",{className:"card-edit-title",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(st.b,{})}),Object(ue.jsx)("h3",{children:"Activity"})]}),Object(ue.jsx)("button",{className:"card-edit-btn",children:"Show details"})]}),Object(ue.jsxs)("div",{className:"add-comment-container flex",children:[Object(ue.jsx)(kt,{member:s}),Object(ue.jsxs)("div",{className:"new-comment",ref:this.commentRef,style:{width:"100%",height:a?84:36,backgroundColor:"#fff"},onClick:function(){return t.setState({isFocus:!0})},children:[Object(ue.jsx)("textarea",{placeholder:"Write a comment...",style:{width:"100%",height:a?"50%":"100%"},onChange:this.handleChange,value:o}),a&&Object(ue.jsx)("button",{className:"save-comment-btn card-edit-btn ".concat(c?"active":""),onClick:this.handleSubmit,children:"Save"})]})]}),(null===(e=n.comments)||void 0===e?void 0:e.length)>0&&Object(ue.jsx)("div",{className:"comments-container flex column",children:n.comments.map((function(e){return Object(ue.jsx)(Or,{comment:e},e.id)}))})]}):Object(ue.jsx)($e,{})}}]),r}(n.Component),Cr={onUpdateCard:Qe},yr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Cr)(xr),kr={onUpdateCard:Qe},wr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),kr)((function(e){var t=e.attachment,r=e.onUpdateCard,a=e.onClose,c=Object(n.useState)(t.title),o=Object(ct.a)(c,2),s=o[0],i=o[1],l=Object(n.useRef)();Object(n.useEffect)((function(){var e;null===l||void 0===l||null===(e=l.current)||void 0===e||e.select()}),[]);return Object(ue.jsxs)("form",{onSubmit:function(){if(s){var e=ut.handleAttachmentEdit(t.id,s);r.apply(void 0,Object(p.a)(e)),a()}},className:"edit-attachment",children:[Object(ue.jsx)("label",{children:"Link name"}),Object(ue.jsx)("input",{ref:l,className:"search-input",value:s,onChange:function(e){return i(e.target.value)}}),Object(ue.jsx)("button",{className:"card-edit-btn secondary",children:"Update"})]})}));var Nr={onUpdateCard:Qe},Sr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Nr)((function(e){var t=e.attachment,r=e.currCardId,a=e.board,c=e.onUpdateCard,o=Object(n.useState)(),s=Object(ct.a)(o,2),i=s[0],l=s[1],d=Object(n.useRef)(),u=ut.getGroupId(r),b=ut.getCardById(r,u),h=ut.getUploadTime(t.addedAt);return Object(ue.jsxs)("div",{className:"attachment-preview flex",children:[Object(ue.jsx)("a",{href:t.url,target:"_blank",children:Object(ue.jsx)("div",{className:"image-container",children:Object(ue.jsx)("img",{src:t.url,alt:t.title})})}),Object(ue.jsxs)("div",{className:"right-section flex column",children:[Object(ue.jsx)("span",{className:"attachment-title",children:t.title}),Object(ue.jsxs)("div",{className:"middle-line",children:[Object(ue.jsx)("span",{className:"added-at",children:h}),"-",Object(ue.jsx)("span",{children:"Comment"}),"-",Object(ue.jsx)("span",{onClick:function(){var e=ut.handleFileRemove(t.id);c.apply(void 0,Object(p.a)(e))},children:"Delete"}),"-",Object(ue.jsxs)("div",{ref:d,className:"relative",children:[Object(ue.jsx)("div",{className:"list-item-layover",onClick:function(){return l(!i)}}),Object(ue.jsx)("span",{children:"Edit"}),i&&Object(ue.jsx)(ft,{onClose:function(){return l(!1)},title:"Edit attachment",ref:d,children:Object(ue.jsx)(wr,{attachment:t,onClose:function(){return l(!1)}})})]})]}),Object(ue.jsxs)("div",{className:"attachment-cover",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(qt.a,{})}),Object(ue.jsx)("span",{onClick:function(){var e;(null===b||void 0===b||null===(e=b.style)||void 0===e?void 0:e.imgUrl)===t.url?b.style=null:b.style={imgUrl:t.url},c(b,u,a)},children:function(){var e;return(null===b||void 0===b||null===(e=b.style)||void 0===e?void 0:e.imgUrl)===t.url}()?"Remove cover":"Make cover"})]})]})]})})),Ir=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={currCard:{}},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=ut.getGroupId(this.props.currCardId),t=ut.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e,t=this.state.currCard;return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"attachment-container card-edit-title",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(Tt.b,{})}),Object(ue.jsx)("h3",{children:"Attachments"})]}),Object(ue.jsx)("div",{className:"card-attachments",children:null===t||void 0===t||null===(e=t.attachments)||void 0===e?void 0:e.map((function(e,t){return Object(ue.jsx)(Sr,{attachment:e},e.title+t)}))})]})}}]),r}(n.Component),Ar={onUpdateCard:Qe},Br=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Ar)(Ir),Mr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={currCard:null,currGroup:null,isOpen:!1},e.modalRef=a.a.createRef(),e.coverRef=a.a.createRef(),e.handleLoad=function(){var t,r,n=e.props.match.params,a=n.cardId,c=n.groupId;e.props.onSetCardId(a),e.props.board.groups&&(t=e.getDataById(a,c).currentCard,r=e.getDataById(a,c).currentGroup),e.setState({currCard:t,currGroup:r})},e.handleClick=function(t){var r,n,a=e.props.board;(null===(r=e.modalRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||e.props.history.push("/board/".concat(a._id))},e.getDataById=function(t,r){var n=e.props.board.groups.find((function(e){return e.id===r})),a=n.cards.find((function(e){return e.id===t}));return a||(a=e.props.board.archivedCards.find((function(e){return e.id===t}))),{currentGroup:n,currentCard:a}},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},Object(at.a)({},n,a))})},e.handlePropertyChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=e.props.match.params.groupId;e.props.onUpdateCard(t,n,r)},e.checkCardBackground=function(){var t=e.state.currCard;if(t.style)return t.style.bgColor?{backgroundColor:t.style.bgColor,minHeight:116,height:116}:t.style.imgUrl?{background:"center / contain no-repeat url(".concat(t.style.imgUrl,")"),objectFit:"cover",minHeight:160,height:160}:void 0},e.goBack=function(){var t=e.props.board;e.props.history.push("/board/".concat(t._id))},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick),this.handleLoad()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.handleLoad()}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.currCard,a=r.currGroup,c=this.props.board;if(!n)return Object(ue.jsx)($e,{});var o=this.checkCardBackground();return Object(ue.jsx)("div",{className:"edit-modal-container",children:Object(ue.jsxs)("section",{className:"card-edit",ref:this.modalRef,children:[n.style&&Object(ue.jsx)("div",{className:"card-edit-bg",style:o}),Object(ue.jsx)(s.b,{to:"/board/".concat(c._id),children:Object(ue.jsx)("button",{className:"close-modal-btn",children:Object(ue.jsx)(mt.b,{})})}),n.style&&Object(ue.jsxs)("div",{ref:this.coverRef,className:"btn-wrapper relative",children:[Object(ue.jsxs)("button",{className:"change-cover-btn",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},children:[Object(ue.jsx)("span",{className:"cover-icon",children:Object(ue.jsx)(jr.a,{})}),Object(ue.jsx)("span",{children:"Cover"})]}),this.state.isOpen&&Object(ue.jsx)(ft,{onClose:function(){return t.setState({isOpen:!1})},title:"Cover",ref:this.coverRef,children:Object(ue.jsx)(Vt,{onClose:function(){return t.setState({isOpen:!1})}})})]}),n.isArchive&&Object(ue.jsxs)("div",{className:"archive-msg",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(ot.a,{})}),Object(ue.jsx)("p",{children:"This card is archived"})]}),Object(ue.jsxs)("div",{className:"card-edit-header card-title-container",children:[Object(ue.jsx)("span",{children:Object(ue.jsx)(qt.a,{})}),Object(ue.jsx)("input",{className:"title-input",type:"text",value:n.title,name:"title",onChange:this.handleInputChange,onBlur:function(){return t.handlePropertyChange()}})]}),Object(ue.jsx)("div",{className:"list-name-container",children:Object(ue.jsxs)("p",{children:["in list ",Object(ue.jsx)("span",{className:"list-name",children:a.title})]})}),Object(ue.jsxs)("div",{className:"card-edit-main-container flex",children:[Object(ue.jsxs)("div",{className:"card-edit-main",children:[Object(ue.jsx)(or,{}),Object(ue.jsx)(vr,{}),n.attachments&&n.attachments.length>0&&Object(ue.jsx)(Br,{}),null===(e=n.checklists)||void 0===e?void 0:e.map((function(e){return Object(ue.jsx)("div",{className:"checklists-container flex column",children:Object(ue.jsx)(hr,{checklist:e,currCard:n,handlePropertyChange:t.handlePropertyChange})},e.id)})),Object(ue.jsx)(yr,{member:this.props.user})]}),Object(ue.jsx)(Zt,{goBack:this.goBack})]})]})})}}]),r}(n.Component),Ur={onUpdateCard:Qe,onSetCardId:Xe},Er=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user}}),Ur)(Mr),Dr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={newItem:{title:""}},e.handleChange=function(t){var r=t.target,n=e.state.newItem;n[r.name]=r.value,e.setState({newItem:n})},e.onKeyUpEnter=function(t){"Enter"===t.key&&e.onAddItem(t)},e.onAddItem=function(t){t.preventDefault();var r=e.state.newItem;if(r.title){if(r.id=U.makeId(),"group"===e.props.type){r.cards||(r.cards=[]);var n={txt:ve(r.title)},a={type:"ADD_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)}else if("card"===e.props.type){var c=Object(h.a)(Object(h.a)({},r),{},{isComplete:!1}),o={txt:ge(c.title),card:c,groupId:e.props.groupId};e.props.onAddCard(c,e.props.groupId,e.props.board,o)}e.setState({newItem:{title:""}})}},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.textInput.focus();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.newItem.title,r=this.props.onToggleAddPop,n="card"===this.props.type?this.props.type:"list";return Object(ue.jsx)("section",{className:"add-board-item",children:Object(ue.jsxs)("form",{onSubmit:this.onAddItem,onKeyUp:this.onKeyUpEnter,children:[Object(ue.jsx)("textarea",{placeholder:"Enter a title for this ".concat(n),ref:function(t){e.textInput=t},value:t,name:"title",onChange:this.handleChange,onBlur:this.onAddItem}),Object(ue.jsxs)("div",{className:"form-btns flex align-center",children:[Object(ue.jsxs)("button",{type:"submit",children:["Add ",n]}),Object(ue.jsx)("button",{onClick:r,children:Object(ue.jsx)(mt.b,{className:"icon",style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})})}}]),r}(a.a.Component);var Rr={onUpdateBoard:We,onUpdateCard:Qe,onAddCard:function(e,t,r,n){var a=r.groups.find((function(e){return e.id===t}));return e=Object(h.a)(Object(h.a)({},e),{},{createdAt:Date.now(),isComplete:!1}),a.cards=a.cards?[].concat(Object(p.a)(a.cards),[e]):[e],We({type:"UPDATE_GROUP",group:a},r,n)}},Tr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Rr)(Dr);function _r(e){var t=e.cardStyle,r=e.title;return Object(ue.jsxs)("div",{className:"card-preview-header",children:[t.bgColor&&Object(ue.jsx)("div",{className:"header-color",style:{backgroundColor:t.bgColor},children:t.isFull&&Object(ue.jsxs)("div",{className:"card-header-title",children:[" ",Object(ue.jsx)("p",{children:r})]})}),t.imgUrl&&Object(ue.jsxs)("div",{className:"image-wrapper",children:[!t.isFull&&Object(ue.jsx)("img",{src:t.imgUrl}),t.isFull&&Object(ue.jsx)("div",{className:"card-header-title flex column",style:{backgroundImage:'url("'.concat(t.imgUrl,'")')},children:Object(ue.jsx)("p",{children:r})})]})]})}function Lr(e){var t=e.labelIds,r=e.getLabel,n=e.isCardLabelListOpen;return Object(ue.jsx)("ul",{className:"label-bar-list flex clean-list ".concat(n?"open":"close"),children:t.map((function(e){var t=r(e);return Object(ue.jsx)("li",{className:"label-bar",style:{backgroundColor:t.color},children:n&&t.title&&Object(ue.jsx)("span",{children:t.title})},t.id)}))})}var Fr=r(48),Pr=r(259);function Gr(e){var t=e.checklists;return Object(ue.jsxs)("div",{className:"checklist-box flex align-center",children:[Object(ue.jsx)(ot.h,{}),Object(ue.jsx)("span",{children:function(){var e=0,r=0;return t.forEach((function(t){t.todos.forEach((function(t){e++,t.isDone&&r++}))})),r+"/"+e}()})]})}function zr(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(ue.jsxs)("div",{className:"due-date-box flex align-center",style:function(e){return e.isComplete?{backgroundColor:"#61BD4F"}:e.dueDate-Date.now()>0&&e.dueDate-Date.now()<864e5?{backgroundColor:"#F2D600"}:e.dueDate-Date.now()<0?{backgroundColor:"#EB5A46"}:{backgroundColor:"inherit",color:"unset"}}(t),onClick:function(e){return n(e,r,t)},children:[Object(ue.jsx)("span",{className:"clock-icon flex align-center",children:Object(ue.jsx)(Tt.a,{})}),Object(ue.jsx)("span",{className:"check-icon",children:t.isComplete?Object(ue.jsx)(Fr.b,{color:"inherit"}):Object(ue.jsx)(Fr.a,{})}),Object(ue.jsx)("span",{children:function(e){var t=new Date(e),r=t.getDate();return t.toLocaleString("en",{month:"short"})+" "+r}(t.dueDate)})]})}function Wr(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(ue.jsxs)("div",{className:"card-preview-footer flex align-center",children:[t.dueDate&&Object(ue.jsx)(zr,{card:t,groupId:r,toggleCardComplete:n}),t.description&&Object(ue.jsx)(Fr.d,{title:"This card has a description"}),t.attachments&&t.attachments.length>0&&Object(ue.jsxs)("div",{className:"attachment-box flex align-center",children:[Object(ue.jsx)("span",{className:"flex align-center",children:Object(ue.jsx)(Pr.a,{})}),Object(ue.jsx)("span",{children:t.attachments.length})]}),t.checklists&&Object(ue.jsx)(Gr,{checklists:t.checklists}),t.isArchive&&Object(ue.jsx)("span",{children:"Archived"}),t.members&&Object(ue.jsx)("div",{className:"card-members-list flex",children:t.members.map((function(e,t){return Object(ue.jsx)(kt,{member:e,size:"md"},t)}))})]})}var Hr=r(69);function Vr(e){var t=e.card,r=e.groupId,n=e.onToggleQuickCardEditor,a=(e.openCardEdit,e.toggleCardComplete),c=e.getLabel,o=e.toggleCardLabelList,s=e.isCardLabelListOpen;return Object(ue.jsxs)("div",{className:"card-preview flex space-between",children:[!t.isArchive&&Object(ue.jsx)("button",{className:"hover-edit-btn",onClick:function(e){return n(e,t,r)},children:Object(ue.jsx)(Hr.b,{})}),t.style&&Object(ue.jsx)(_r,{cardStyle:t.style,title:t.title}),(!t.style||!t.style.isFull)&&Object(ue.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(ue.jsx)("div",{onClick:o,children:Object(ue.jsx)(Lr,{labelIds:t.labelIds,getLabel:c,isCardLabelListOpen:s})}),Object(ue.jsx)("p",{children:t.title}),Object(ue.jsx)(Wr,{card:t,groupId:r,toggleCardComplete:a})]})]})}var qr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.card,r=e.groupId,n=e.openCardEdit,a=e.isCardLabelListOpen,c=e.toggleCardLabelList,o=e.toggleCardComplete,s=e.onToggleQuickCardEditor,i=e.index,l=e.getLabel;return Object(ue.jsx)("div",{className:"card-wrapper",onClick:function(){return n(r,t.id)},children:Object(ue.jsx)(nt.b,{draggableId:t.id,index:i,children:function(e){return Object(ue.jsx)("li",Object(h.a)(Object(h.a)(Object(h.a)({ref:e.innerRef},e.dragHandleProps),e.draggableProps),{},{children:Object(ue.jsx)(Vr,{card:t,groupId:r,openCardEdit:n,isCardLabelListOpen:a,toggleCardLabelList:c,toggleCardComplete:o,onToggleQuickCardEditor:s,getLabel:l})}))}})})}));function Jr(e){var t=e.groupId,r=e.onToggleAddPop,n=e.toggleGroupArchive;return Object(ue.jsxs)("div",{className:"group-actions flex column",children:[Object(ue.jsx)("button",{onClick:r,children:"Add card..."}),Object(ue.jsx)("button",{onClick:function(){return n(t)},children:"Archive this list..."})]})}var Qr=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isAddPopOpen:!1,groupTitle:"",isPopoverOpen:!1},e.groupEditRef=a.a.createRef(),e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(at.a)({},n,a))}))},e.onChangeGroupTitle=function(){var t=e.props.group;t.title=e.state.groupTitle;var r={type:"UPDATE_GROUP",group:t},n={txt:Ae(t.title)};e.props.updateBoard(r,n)},e.blurFocus=function(e){e.target.blur()},e.setFocus=function(e){e.target.focus()},e.handleFocus=function(e){e.target.select()},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"componentDidUpdate",value:function(e){e.group!==this.props.group&&this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.group,n=t.openCardEdit,a=t.toggleCardLabelList,c=t.isCardLabelListOpen,o=t.index,s=t.toggleCardComplete,i=t.toggleGroupArchive,l=t.onToggleQuickCardEditor,d=t.getLabel,u=this.state,b=u.isAddPopOpen,p=u.groupTitle,j=u.isPopoverOpen;return Object(ue.jsx)("div",{className:"group-wrapper",style:{display:r.isArchive?"none":"unset"},children:Object(ue.jsx)(nt.b,{draggableId:r.id,index:o,children:function(t,o){return Object(ue.jsxs)("div",Object(h.a)(Object(h.a)(Object(h.a)({className:"group-preview flex column"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:[Object(ue.jsxs)("div",{className:"group-header flex space-between align-center",children:[Object(ue.jsx)("input",{className:"clean-input",type:"text",value:p,name:"groupTitle",onMouseDown:e.blurFocus,onMouseUp:e.setFocus,onChange:e.handleChange,onBlur:e.onChangeGroupTitle}),Object(ue.jsxs)("div",{className:"relative",ref:e.groupEditRef,onClick:function(){return e.setState({isPopoverOpen:!j})},children:[Object(ue.jsx)("button",{children:Object(ue.jsx)(ot.l,{})}),j&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isPopoverOpen:!1})},ref:e.groupEditRef,title:"List actions",children:Object(ue.jsx)(Jr,{groupId:r.id,onToggleAddPop:e.onToggleAddPop,toggleGroupArchive:i})})]})]}),Object(ue.jsx)(nt.c,{droppableId:r.id,children:function(t){return Object(ue.jsxs)("ul",Object(h.a)(Object(h.a)({className:"card-list clean-list"},t.droppableProps),{},{ref:t.innerRef,children:[r.cards&&r.cards.map((function(e,t){return Object(ue.jsx)(qr,{card:e,index:t,groupId:r.id,openCardEdit:n,toggleCardLabelList:a,isCardLabelListOpen:c,toggleCardComplete:s,onToggleQuickCardEditor:l,getLabel:d},e.id)})),t.placeholder,b&&Object(ue.jsx)(Tr,{onToggleAddPop:e.onToggleAddPop,type:"card",groupId:r.id})]}))}}),!b&&Object(ue.jsx)("div",{className:"group-footer flex space-between align-center",children:Object(ue.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(ue.jsx)("i",{className:"flex align-center",children:Object(ue.jsx)(je.f,{})}),Object(ue.jsx)("span",{children:"Add a card"})]})})]}))}})})}}]),r}(n.Component);function Xr(e){var t=e.groups,r=e.openCardEdit,n=e.updateBoard,a=e.toggleCardLabelList,c=e.isCardLabelListOpen,o=e.toggleCardComplete,s=e.toggleGroupArchive,i=e.onToggleQuickCardEditor,l=e.getLabel;return Object(ue.jsx)("ul",{className:"group-list clean-list flex",children:t.map((function(e,t){return Object(ue.jsx)(Qr,{index:t,group:e,openCardEdit:r,updateBoard:n,toggleCardLabelList:a,isCardLabelListOpen:c,toggleCardComplete:o,toggleGroupArchive:s,onToggleQuickCardEditor:i,getLabel:l},e.id)}))})}var Yr=r(261),Kr=r(260),Zr=r(71),$r=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.getMembersIds=function(){return e.props.board.members.map((function(e){return e._id}))},e.inviteToBoard=function(t){var r=e.props,n=r.board,a=r.onUpdateBoard,c=e.getMembersIds(),o={_id:t._id,fullname:t.fullname,imgUrl:t.imgUrl};if(c.includes(o._id)){var s={txt:Ce(t.fullname)};a({type:"REMOVE_BOARD_MEMBER",memberId:t._id},n,s)}else{a({type:"ADD_BOARD_MEMBER",member:o},n,{txt:xe(t.fullname)}),console.log(n.members)}},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(at.a)({},r,n)))},e}return Object(K.a)(r,[{key:"render",value:function(){var e=this,t=this.state.search,r=this.props.users,n=this.getMembersIds();return Object(ue.jsxs)("div",{className:"invite-members",children:[Object(ue.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"search",value:t,autoFocus:!0,placeholder:"Search..."}),Object(ue.jsx)("ul",{className:"member-list clean-list",children:r.filter((function(e){return e.fullname.includes(t)})).map((function(t){return Object(ue.jsxs)("li",{className:"user-preview",onClick:function(){return e.inviteToBoard(t)},children:[Object(ue.jsxs)("div",{className:"user-details",children:[Object(ue.jsx)(kt,{member:t}),Object(ue.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(ue.jsx)("span",{children:n.includes(t._id)?Object(ue.jsx)(Zr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var en={onUpdateBoard:We},tn=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),en)($r),rn="oiLzSdl8Lr6uhiMLT_uQKAS-PZVzO4dkEVjoRPHeYOU",nn={search:function(e){return on.apply(this,arguments)},getPreviewImgs:function(e){return sn.apply(this,arguments)}};function an(e){return cn.apply(this,arguments)}function cn(){return(cn=Object(v.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://api.unsplash.com/search/photos?query=".concat(t,"&orientation=landscape&client_id=").concat(rn));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(){return(on=Object(v.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t);case 2:return r=e.sent,n=r.results,e.abrupt("return",Promise.resolve(n.map((function(e){return{id:e.id,small:e.urls.small,full:e.urls.full}}))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sn(){return(sn=Object(v.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t);case 2:return r=e.sent,n=r.results,e.abrupt("return",Promise.resolve(n.map((function(e){return{id:e.id,small:e.urls.small,full:e.urls.full}}))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ln=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={keyword:"",pics:[]},e.getPics=Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nn.getPreviewImgs("nature");case 3:r=t.sent,e.setState({pics:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.onSearch=Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nn.search(e.state.keyword);case 3:r=t.sent,e.setState({pics:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.setBoardBG=function(t){var r=e.props,n=r.board;(0,r.onUpdateBoard)({type:"CHANGE_BOARD_STYLE",style:"#"===t[0]?{bgColor:t}:{imgUrl:t}},n,{txt:ye()})},e.handleChange=function(t){var r=t.target.value;e.setState({keyword:r},(function(){r.length>=3?e.onSearch():0===r.length&&e.getPics()}))},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPics();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.keyword,n=t.pics;return Object(ue.jsxs)("div",{className:"change-bg",children:[Object(ue.jsx)("input",{type:"text",className:"search-input",value:r,onChange:this.handleChange,placeholder:"Search images"}),Object(ue.jsx)("div",{className:"images",children:n.map((function(t){return Object(ue.jsx)("div",{className:"img-container",onClick:function(){return e.setBoardBG(t.full)},children:Object(ue.jsx)("img",{src:t.small,alt:t.id})},t.id)}))}),Object(ue.jsx)("hr",{}),Object(ue.jsx)("div",{className:"colors",children:["#82E0AA","#F1948A","#AAB7B8 ","#C39BD3","#85C1E9","#F8C471"].map((function(t,r){return Object(ue.jsx)("div",{style:{backgroundColor:"".concat(t)},className:"color-container",onClick:function(){return e.setBoardBG(t)}},r)}))})]})}}]),r}(a.a.Component);var dn={onUpdateBoard:We},un=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),dn)(ln),bn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){return Object(Y.a)(this,r),t.apply(this,arguments)}return Object(K.a)(r,[{key:"render",value:function(){var e=this.props.board;return Object(ue.jsx)("div",{className:"icon",style:e.style.bgColor?{backgroundColor:e.style.bgColor}:{},children:e.style.imgUrl&&Object(ue.jsx)("img",{src:e.style.imgUrl,alt:""})})}}]),r}(a.a.Component);var pn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(bn),hn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{txt:"",members:[],labels:[]}},e.updateUrlSearchParams=function(t){var r=e.props,n=r.history,a=r.location,c=Object(h.a)({},t);for(var o in c){var s=c[o];(!s||Array.isArray(s)&&!s.length)&&delete c[o]}var i=new URLSearchParams(c);n.replace("".concat(a.pathname,"?").concat(i.toString()))},e.handleChange=function(t){var r=t.target.name,n=t.target.value,a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},Object(at.a)({},r,n));e.props.onUpdateFilter(a)},e.getFilteredBoard=U.debounce((function(){var t=Object(h.a)({},e.props.filterBy);for(var r in t){var n=t[r];(!n||Array.isArray(n)&&!n.length)&&delete t[r]}e.props.loadBoard(e.props.match.params.boardId,t)}),100),e.handleUserClick=function(t){if(e.props.filterBy.members.includes(t._id)){var r=e.props.filterBy.members.findIndex((function(e){return e===t._id}));e.props.filterBy.members.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:Object(p.a)(e.props.filterBy.members)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:[].concat(Object(p.a)(e.props.filterBy.members),[t._id])});e.props.onUpdateFilter(a)}},e.handleLabelClick=function(t){if(e.props.filterBy.labels.includes(t.id)){var r=e.props.filterBy.labels.findIndex((function(e){return e===e}));e.props.filterBy.labels.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:Object(p.a)(e.props.filterBy.labels)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:[].concat(Object(p.a)(e.props.filterBy.labels),[t.id])});e.props.onUpdateFilter(a)}},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,r=e.filterBy,n=t.search,a=new URLSearchParams(n),c=Object.keys(r).some((function(e){return a.get(e)}));if(n&&c){var o,s,i=a.get("txt")||"",l=(null===(o=a.get("members"))||void 0===o?void 0:o.split(","))||[];console.log("members: ",l);var d=(null===(s=a.get("labels"))||void 0===s?void 0:s.split(","))||[];console.log("labels: ",d),this.props.onUpdateFilter({txt:i,members:l,labels:d}),this.updateUrlSearchParams(this.props.filterBy),console.log("filterBy from search cards: ",this.props.filterBy)}else this.props.onUpdateFilter({txt:"",members:[],labels:[]}),this.updateUrlSearchParams(this.props.filterBy)}},{key:"componentDidUpdate",value:function(e){var t=e.filterBy,r=this.props.filterBy;t!==r&&(this.updateUrlSearchParams(r),this.getFilteredBoard.bind(this)())}},{key:"componentWillUnmount",value:function(){this.props.onUpdateFilter({txt:"",members:[],labels:[]}),this.updateUrlSearchParams(this.props.filterBy),this.getFilteredBoard.bind(this)()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.props.filterBy;return Object(ue.jsxs)("div",{className:"search-cards",children:[Object(ue.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"txt",value:r.txt,autoFocus:!0,placeholder:"Search..."}),Object(ue.jsx)("p",{className:"search-desc",children:"Search by term, label, member, or due time"}),Object(ue.jsx)("hr",{}),Object(ue.jsx)("ul",{className:"label-list clean-list",children:t.labels.map((function(t){return Object(ue.jsxs)("li",{className:"label-preview",onClick:function(){return e.handleLabelClick(t)},children:[Object(ue.jsxs)("div",{className:"label-details",children:[Object(ue.jsx)("div",{className:"label-color",style:{backgroundColor:t.color}}),Object(ue.jsx)("p",{children:t.title})]}),Object(ue.jsx)("span",{children:r.labels.includes(t.id)?Object(ue.jsx)(Zr.a,{}):""})]},t.id)}))}),Object(ue.jsx)("hr",{}),Object(ue.jsx)("ul",{className:"member-list clean-list",children:t.members.map((function(t){return Object(ue.jsxs)("li",{className:"user-preview",onClick:function(){return e.handleUserClick(t)},children:[Object(ue.jsxs)("div",{className:"user-details",children:[Object(ue.jsx)(kt,{member:t}),Object(ue.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(ue.jsx)("span",{children:r.members.includes(t._id)?Object(ue.jsx)(Zr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var jn={onUpdateFilter:function(e){return function(t){t({type:"UPDATE_FILTER",filterBy:e})}},loadBoard:ze},mn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,filterBy:e.boardModule.filterBy}}),jn)(Object(ee.f)(hn)),fn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={archivedCards:null},e.loadArchivedCards=function(){var t=e.props.board,r=t.archivedCards?t.archivedCards:[];e.setState({archivedCards:r})},e.onUnarchiveCard=function(t){e.props.onUnArchiveCard(t,e.props.board)},e.onDeleteCard=function(t){e.props.onRemoveCard(t,e.props.board)},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){this.loadArchivedCards()}},{key:"componentDidUpdate",value:function(e){e.board.archivedCards!==this.props.board.archivedCards&&this.loadArchivedCards()}},{key:"render",value:function(){var e=this,t=this.state.archivedCards,r=this.props,n=r.isCardLabelListOpen,a=r.toggleCardLabelList,c=r.getLabel,o=r.toggleCardComplete,s=r.openCardEdit;return console.log("archivedCards in archive page",t),Object(ue.jsxs)("div",{className:"archive",children:[!t&&Object(ue.jsx)($e,{}),t&&0===t.length&&Object(ue.jsx)("div",{children:"No archived cards..."}),t&&t.length>0&&Object(ue.jsx)("ul",{className:"archived-cards-list clean-list flex column align-center",children:t.map((function(t,r){return Object(ue.jsxs)("li",{children:[Object(ue.jsx)(Vr,{card:t,groupId:t.groupId,toggleCardLabelList:a,isCardLabelListOpen:n,getLabel:c,toggleCardComplete:o,openCardEdit:s}),Object(ue.jsxs)("div",{className:"archived-btns",children:[Object(ue.jsx)("button",{onClick:function(){return e.onUnarchiveCard(t)},children:"Send to board"}),Object(ue.jsx)("button",{onClick:function(){return e.onDeleteCard(t)},children:"Delete"})]})]},t.id)}))})]})}}]),r}(a.a.Component);var vn={loadArchivedCards:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.getArchivedCards(e);case 3:return n=t.sent,console.log("in actions",n),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log("Cannot load archived cards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},onUpdateCard:Qe,onRemoveCard:Ve,onUnArchiveCard:Je},gn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),vn)(fn),On=r(122),xn=r.n(On),Cn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getGroupTitle=function(t){return e.props.board.groups.find((function(e){return e.id===t})).title},e}return Object(K.a)(r,[{key:"render",value:function(){var e=this,t=this.props.board;return 0===t.activities.length?Object(ue.jsxs)("div",{className:"activity",children:[Object(ue.jsxs)("div",{className:"activity-header",children:[Object(ue.jsx)(Fr.c,{}),Object(ue.jsx)("p",{children:"Activity"})]}),Object(ue.jsx)("p",{children:"No Activities in this board yet"})]}):Object(ue.jsxs)("div",{className:"activity",children:[Object(ue.jsxs)("div",{className:"activity-header",children:[Object(ue.jsx)(Fr.c,{}),Object(ue.jsx)("p",{children:"Activity"})]}),Object(ue.jsx)("ul",{className:"activity-list clean-list",children:t.activities.map((function(r){return Object(ue.jsxs)("li",{className:"activity-preview",children:[Object(ue.jsx)("span",{className:"member-avatar",children:Object(ue.jsx)(kt,{member:r.byMember})}),Object(ue.jsxs)("div",{className:"activity-text",children:[Object(ue.jsxs)("span",{className:"user-fullname",children:[r.byMember.fullname," "]}),Object(ue.jsx)("p",{children:r.txt}),r.groupId&&Object(ue.jsxs)(s.b,{to:"/board/".concat(t._id,"/").concat(r.groupId,"/").concat(r.card.id),children:[" ",r.card.title]}),r.groupId&&Object(ue.jsxs)("p",{children:["in list: ",e.getGroupTitle(r.groupId)]}),Object(ue.jsx)(xn.a,{className:"publish-time",fromNow:!0,children:r.createdAt})]})]},r.id)}))})]})}}]),r}(a.a.Component);var yn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(Cn),kn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).removeBoard=Object(v.a)(f.a.mark((function t(){var r,n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.board,a=r.onRemoveBoard,t.next=3,a(n._id);case 3:e.props.history.push("/board");case 4:case"end":return t.stop()}}),t)}))),e.checkIfAllowed=function(){var t=e.props,r=t.board,n=t.user;return n.isAdmin||r.createdBy._id===n._id},e}return Object(K.a)(r,[{key:"render",value:function(){var e=this;return Object(ue.jsxs)("section",{className:"remove-board flex column",children:[this.checkIfAllowed()&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("p",{children:"Remove this board from workspace?"}),Object(ue.jsx)("p",{children:"This action is IRREVERSIBLE"}),Object(ue.jsx)("button",{className:"remove-btn nav-button",onClick:function(){return e.removeBoard()},children:"Remove"})]}),!this.checkIfAllowed()&&Object(ue.jsx)("p",{children:"You Are not allowed to perform this action"})]})}}]),r}(a.a.Component);var wn={onRemoveBoard:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.remove(e);case 3:console.log("Deleted Succesfully!"),r({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot remove board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Nn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user}}),wn)(Object(ee.f)(kn)),Sn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={currViewIdx:-1},e._cmpsToRender=[{id:"c101",title:"Change Background",icon:Object(ue.jsx)(pn,{}),component:un},{id:"c102",title:"Search Cards",icon:Object(ue.jsx)(Ut.b,{}),component:mn},{id:"c103",title:"Archive",icon:Object(ue.jsx)(ot.b,{}),component:gn},{id:"c104",title:"Remove Board",icon:Object(ue.jsx)(Hr.c,{}),component:Nn}],e.onSelectView=function(t){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:t})}))},e.getViewById=function(){var t=e.state.currViewIdx,r=e._cmpsToRender[t];return console.log("selected view: ",r),r.component},e.onBack=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))},e._CurrView=function(){var t=e.props,r=e._cmpsToRender[e.state.currViewIdx].component;return Object(ue.jsx)(r,Object(h.a)({},t))},e._DefaultView=function(){return Object(ue.jsxs)("div",{children:[Object(ue.jsx)("ul",{className:"default-menu clean-list",children:e._cmpsToRender.map((function(t,r){return Object(ue.jsxs)("li",{onClick:function(){return e.onSelectView(r)},children:[Object(ue.jsx)("div",{className:"icon",children:t.icon}),Object(ue.jsx)("p",{children:t.title})]},t.id)}))}),Object(ue.jsx)("hr",{}),Object(ue.jsx)(yn,{})]})},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){this.props.location.search&&this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:1})}))}},{key:"componentWillUnmount",value:function(){this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.onClose,n=(t.toggleCardLabelList,t.isCardLabelListOpen,t.getLabel,t.toggleCardComplete,t.openCardEdit,this.state.currViewIdx);return Object(ue.jsxs)("div",{className:"side-menu ".concat(this.props.isMenuOpen?"menu-open":""),children:[Object(ue.jsxs)("div",{className:"title",children:[Object(ue.jsx)("span",{className:"back-btn ".concat(-1!==n?"show-btn":""," "),onClick:function(){return e.onBack()},children:Object(ue.jsx)(mt.a,{})}),Object(ue.jsx)("p",{className:"menu-title",children:-1===n?"Menu":this._cmpsToRender[n].title}),Object(ue.jsx)("span",{className:"close-btn",onClick:r,children:Object(ue.jsx)(mt.b,{})})]}),Object(ue.jsx)("hr",{}),Object(ue.jsx)("div",{className:"rendered-cmp",children:-1===n?Object(ue.jsx)(this._DefaultView,{}):Object(ue.jsx)(this._CurrView,{})})]})}}]),r}(a.a.Component);var In=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(Object(ee.f)(Sn));var An={onUpdateBoard:We},Bn=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),An)((function(e){var t=e.members,r=e.board,a=e.onUpdateBoard,c=e.onClose;Object(n.useEffect)((function(){return function(){c()}}),[c]);return Object(ue.jsx)("div",{className:"member-list",style:{color:"#172b4d"},children:t.map((function(e){return Object(ue.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){return t=e._id,void a({type:"REMOVE_BOARD_MEMBER",memberId:t},r);var t},children:[Object(ue.jsx)("div",{className:"list-item-layover"}),Object(ue.jsx)("div",{style:{width:32},children:Object(ue.jsx)(kt,{member:e})}),Object(ue.jsx)("div",{className:"popper-member-name",children:Object(ue.jsx)("p",{children:e.fullname})}),Object(ue.jsx)("div",{className:"popper-member-check",children:Object(ue.jsx)(Zr.a,{})})]},e._id)}))})})),Mn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isInviteOpen:!1,boardTitle:e.props.board.title,isMenuOpen:!1,numOfShownMembers:5,isExtraMembersOpen:!1,isTotalMembersOpen:!1},e.inviteRef=a.a.createRef(),e.membersRef=a.a.createRef(),e.totalMembersRef=a.a.createRef(),e.handleResize=function(){var t=e.state.numOfShownMembers;if(window.innerWidth<800){if(3===t)return;e.setState({numOfShownMembers:3})}else{if(5===t)return;e.setState({numOfShownMembers:5})}},e.toggleStarredBoard=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.isStarred=!r.isStarred,n({type:"TOGGLE_STARRED",isStarred:r.isStarred},r)},e.handleFocus=function(e){return e.target.select()},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(at.a)({},n,a))}))},e.onChangeBoardTitle=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.title=e.state.boardTitle;var a={txt:Oe(r.title)};n({type:"CHANGE_TITLE",title:r.title},r,a)},e.toggleMenu=function(){e.setState((function(t){return Object(h.a)(Object(h.a)({},t),{},{isMenuOpen:!e.state.isMenuOpen})}))},e.getRemainingMembers=function(){var t=Object(p.a)(e.props.board.members);return t.splice(e.state.numOfShownMembers),t},e.getExtraMembersLength=function(){return e.props.board.members.length-e.state.numOfShownMembers},e.onMembersClose=function(){return e.setState({isExtraMembersOpen:!1})},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.props.loadUsers(),this.props.location.search&&this.setState({isMenuOpen:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){e.board.title!==this.props.board.title&&this.setState({boardTitle:this.props.board.title})}},{key:"render",value:function(){var e=this,t=this.props,r=t.board,n=t.onToggleDashboard,a=t.toggleCardLabelList,c=t.isCardLabelListOpen,o=t.getLabel,s=t.toggleCardComplete,i=t.openCardEdit,l=this.state,d=l.boardTitle,u=l.isMenuOpen,b=l.isInviteOpen,p=l.isExtraMembersOpen,h=l.isTotalMembersOpen,j=this.getRemainingMembers(),m=this.getExtraMembersLength();return Object(ue.jsxs)("section",{className:"board-header",children:[Object(ue.jsxs)("div",{className:"left-btns",children:[Object(ue.jsx)("button",{className:"board-title nav-button",children:Object(ue.jsx)("input",{className:"clean-input",type:"text",value:d,name:"boardTitle",onFocus:this.handleFocus,onChange:this.handleChange,onBlur:this.onChangeBoardTitle})}),Object(ue.jsx)("button",{className:"starred-btn nav-button ".concat(r.isStarred?"starred":""),onClick:function(){return e.toggleStarredBoard()},children:Object(ue.jsx)(je.g,{})})," |",Object(ue.jsxs)("div",{className:"members-container flex",children:[Object(ue.jsxs)("div",{className:"user-previews",children:[j.map((function(e,t){return Object(ue.jsx)(kt,{member:e,style:{left:-5*t}},e._id)})),m>0&&Object(ue.jsxs)("div",{ref:this.membersRef,children:[Object(ue.jsx)("div",{className:"list-item-layover round",style:{transform:"translateX(".concat(-5*j.length,"px)")},onClick:function(){return e.setState({isExtraMembersOpen:!p})}}),Object(ue.jsx)("div",{className:"show-more-btn",style:{transform:"translateX(".concat(-5*j.length,"px)")},children:"+".concat(m)}),p&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isExtraMembersOpen:!1})},title:"Members",ref:this.membersRef,children:Object(ue.jsx)(Bn,{members:r.members.filter((function(e){return e._id})),onClose:this.onMembersClose})})]})]}),Object(ue.jsxs)("div",{className:"relative",ref:this.inviteRef,children:[Object(ue.jsx)("button",{onClick:function(){return e.setState({isInviteOpen:!b})},className:"invite-btn nav-button",children:"Invite"}),b&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isInviteOpen:!1})},title:"Invite Members",ref:this.inviteRef,children:Object(ue.jsx)(tn,{})})]})]})]}),Object(ue.jsx)("div",{className:"right-btns",children:!u&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"relative",ref:this.totalMembersRef,children:[Object(ue.jsx)("button",{className:"nav-button members-btn",onClick:function(){return e.setState({isTotalMembersOpen:!h})},children:Object(ue.jsx)(Kr.a,{})}),h&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isTotalMembersOpen:!1})},title:"Members",ref:this.totalMembersRef,children:Object(ue.jsx)(tn,{})})]}),Object(ue.jsxs)("button",{onClick:function(){return n(!0)},className:"dashboard-btn nav-button ".concat(u?"menu-open":""),children:[Object(ue.jsx)(Yr.a,{})," ",Object(ue.jsx)("span",{className:"right-btn-txt",children:"Dashboard"})]}),Object(ue.jsxs)("button",{onClick:function(){return e.toggleMenu()},className:"right-menu-btn nav-button",children:[Object(ue.jsx)(Hr.a,{})," ",Object(ue.jsx)("span",{className:"right-btn-txt",children:"Show Menu"})]})]})}),Object(ue.jsx)(In,{isMenuOpen:u,onClose:function(){e.toggleMenu()},isCardLabelListOpen:c,toggleCardLabelList:a,getLabel:o,openCardEdit:i,toggleCardComplete:s})]})}}]),r}(a.a.Component);var Un={loadUsers:ae,onUpdateBoard:We},En=Object(i.b)((function(e){return{board:e.boardModule.currBoard,users:e.userModule.users}}),Un)(Object(ee.f)(Mn)),Dn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={card:null,cardTitle:""},e.uploadCard=function(t,r){var n=ut.getCardById(t,r);e.setState({card:n,cardTitle:n.title})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(at.a)({},n,a))}))},e.handleFocus=function(e){e.target.select()},e.onSave=function(t){var r=Object(h.a)({},e.state.card);r.title=e.state.cardTitle;var n={txt:ke(),card:r,groupId:e.props.groupId};e.props.onUpdateCard(r,e.props.groupId,e.props.board,n),e.props.onToggleQuickCardEditor(t,null,"")},e.openCard=function(t){e.props.onToggleQuickCardEditor(t,null,""),e.props.openCardEdit(e.props.groupId,e.props.cardId)},e.onArchiveCard=function(t){var r=e.props,n=r.groupId,a=r.board,c=Object(h.a)({},e.state.card);e.props.onArchiveCard(c,n,a),e.props.onToggleQuickCardEditor(t,null,"")},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cardId,r=e.groupId;this.props.onSetCardId(t),this.uploadCard(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.board!==this.props.board){var t=this.props,r=t.cardId,n=t.groupId;this.uploadCard(r,n)}}},{key:"render",value:function(){var e=this.state,t=e.card,r=e.cardTitle,n=this.props,a=n.groupId,c=n.getLabel,o=n.isCardLabelListOpen,s=n.toggleCardComplete,i=n.position;return t?Object(ue.jsxs)("div",{className:"quick-card-editor flex",style:{position:"fixed",top:i.top,left:i.left},children:[Object(ue.jsxs)("div",{children:[Object(ue.jsxs)("div",{className:"card-preview",style:{width:i.width},children:[t.style&&Object(ue.jsx)(_r,{cardStyle:t.style}),Object(ue.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(ue.jsx)("div",{children:Object(ue.jsx)(Lr,{labelIds:t.labelIds,getLabel:c,isCardLabelListOpen:o})}),Object(ue.jsx)("textarea",{className:"clean-input",type:"text",value:r,name:"cardTitle",onChange:this.handleChange,autoFocus:!0,onFocus:this.handleFocus}),Object(ue.jsx)(Wr,{card:t,groupId:a,toggleCardComplete:s})]})]}),Object(ue.jsx)("button",{onClick:this.onSave,className:"card-edit-btn secondary",children:"Save"})]}),Object(ue.jsxs)("div",{className:"quick-editor-sidebar flex column",children:[Object(ue.jsxs)("button",{onClick:this.openCard,className:"quick-editor-btn flex align-center",children:[Object(ue.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(ue.jsx)(qt.a,{})}),Object(ue.jsx)("span",{children:"Open card"})]}),Object(ue.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(ue.jsx)(zt,{item:{icon:st.c,title:"Edit labels",component:Rt}})}),Object(ue.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(ue.jsx)(zt,{item:{icon:Ut.c,title:"Change members",component:St}})}),Object(ue.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(ue.jsx)(zt,{item:{icon:qt.a,title:"Change cover",component:Vt}})}),Object(ue.jsx)("div",{className:"quick-editor-btn flex align-center datepicker",children:Object(ue.jsx)(zt,{item:{icon:ot.k,title:"Edit dates",component:Mt}})}),Object(ue.jsxs)("div",{className:"quick-editor-btn flex align-center",onClick:this.onArchiveCard,children:[Object(ue.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(ue.jsx)(it.a,{})}),Object(ue.jsx)("span",{children:"Archive"})]})]})]}):Object(ue.jsx)($e,{})}}]),r}(n.Component);var Rn={onUpdateCard:Qe,onSetCardId:Xe,onArchiveCard:qe},Tn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Rn)(Dn),_n=r(126);function Ln(e){var t=e.tasksPerMemberMap,r=e.labelsColors;console.log("tasksPerMemberMap",t);var n={labels:Object.keys(t),datasets:[{label:"# of Votes",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2}]};return Object(ue.jsxs)("div",{className:"chart",children:[Object(ue.jsx)("h1",{children:"Tasks per Member"}),Object(ue.jsx)(_n.b,{data:n,options:{plugins:{legend:{labels:{color:"black",padding:10}}}}})]})}function Fn(e){var t=e.tasksPerLabelMap,r=e.labelsColors,n={labels:Object.keys(t),datasets:[{label:"",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2,fontColor:"black"}]};return Object(ue.jsxs)("div",{className:"chart bar-chart-container",style:{maxHeight:400},children:[Object(ue.jsx)("h1",{children:"Tasks per Label"}),Object(ue.jsx)(_n.a,{data:n,height:null,width:null,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{fontColor:"black"}}},scales:{y:{ticks:{color:"black"}},x:{ticks:{color:"black"}}}}})]})}var Pn=r(264),Gn=r.n(Pn);function zn(e){var t=e.tasks;return Object(ue.jsx)("div",{className:"time-line-container",children:Object(ue.jsx)(Gn.a,{data:t,links:[],config:{header:{top:{style:{background:"linear-gradient( grey, black)",textShadow:"0.5px 0.5px black",fontSize:12}},middle:{style:{background:"linear-gradient( #b686c2, white)",fontSize:9,color:"black"}},bottom:{style:{background:"linear-gradient( grey, black)",fontSize:9,color:"#b686c2"},selectedStyle:{background:"linear-gradient( #d011dd ,#d011dd)",fontWeight:"bold",color:"white"}}},taskList:{title:{label:"Task Todo",style:{background:"linear-gradient( grey, black)"}},task:{style:{backgroundColor:"grey",color:"white"}},verticalSeparator:{style:{backgroundColor:"#fbf9f9"},grip:{style:{backgroundColor:"#b686c2"}}}},dataViewPort:{rows:{style:{backgroundColor:"white",borderBottom:"solid 0.5px silver"}},task:{showLabel:!1,style:{backgroundColor:"#b686c2",borderRadius:1,boxShadow:"2px 2px 8px #888888"}}}}})})}var Wn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={chartsData:null},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.dashboardQuery(this.props.board._id);case 2:t=e.sent,this.setState({chartsData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"labelsColor",get:function(){return this.props.board.labels.map((function(e){return e.color}))}},{key:"render",value:function(){var e=this.state.chartsData,t=this.props.board;return console.log("chartsDate",e),e?Object(ue.jsxs)("div",{className:"dashboard-modal flex column align-center",children:[Object(ue.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(ue.jsx)("button",{className:"close-btn",children:Object(ue.jsx)(mt.b,{})})}),Object(ue.jsxs)("div",{className:"jeneral-statistics flex",children:[Object(ue.jsxs)("div",{className:"stats flex space-between",children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h3",{children:"All Tasks"}),Object(ue.jsx)("span",{children:e.cardsCount})]}),Object(ue.jsx)("i",{className:"flex align-center",children:Object(ue.jsx)(ot.f,{})})]}),Object(ue.jsxs)("div",{className:"stats flex space-between",children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h3",{children:"All Lists"}),Object(ue.jsx)("span",{children:e.groupsCount})]}),Object(ue.jsx)("i",{className:"flex align-center",children:Object(ue.jsx)(je.d,{})})]}),Object(ue.jsxs)("div",{className:"stats flex space-between",children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h3",{children:"Members"}),Object(ue.jsx)("span",{children:t.members&&t.members.length}),Object(ue.jsx)("span",{children:!t.members&&0})]}),Object(ue.jsx)("i",{className:"flex align-center",children:Object(ue.jsx)(qt.c,{})})]})]}),Object(ue.jsxs)("div",{className:"charts flex",children:[Object(ue.jsx)(Ln,{className:"chart",tasksPerMemberMap:e.tasksPerMemberMap,labelsColors:this.labelsColor}),Object(ue.jsx)(Fn,{className:"chart",tasksPerLabelMap:e.tasksPerLabelMap,labelsColors:this.labelsColor})]}),Object(ue.jsx)(zn,{tasks:e.tasks})]}):Object(ue.jsx)($e,{})}}]),r}(n.Component);var Hn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(Wn),Vn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={isCardLabelListOpen:!1,isAddPopOpen:!1,quickCardEditor:{cardToEdit:null,groupId:"",position:{}}},e.loadBoard=function(t,r){e.props.loadBoard(t,r)},e.openCardEdit=function(t,r){e.props.history.push("".concat(e.props.board._id,"/").concat(t,"/").concat(r))},e.updateBoard=function(t,r){var n=t.board||e.props.board;e.props.onUpdateBoard(t,n,r)},e.onToggleDashboard=function(t){t?e.props.history.push("".concat(e.props.board._id,"/dashboard")):e.props.history.goBack()},e.toggleCardLabelList=function(t){t.stopPropagation(),e.setState({isCardLabelListOpen:!e.state.isCardLabelListOpen})},e.onToggleQuickCardEditor=function(t,r,n){t.stopPropagation();var a=r?t.currentTarget.parentNode:null,c=r?a.getBoundingClientRect():{};e.setState({quickCardEditor:{cardToEdit:r,groupId:n,position:c}})},e.toggleCardComplete=function(t,r,n){if(t.stopPropagation(),!n.isArchive){var a=Object(h.a)({},n);a.isComplete=!n.isComplete;var c=a.isComplete?{txt:Ne(),card:a,groupId:r}:{txt:Se(),card:a,groupId:r};e.props.onUpdateCard(a,r,e.props.board,c)}},e.getLabel=function(t){return e.props.board.labels.find((function(e){return e.id===t}))},e.handleOnDragEnd=function(t){var r=t.destination,n=t.source,a=t.type;if(r){var c=Object(h.a)({},e.props.board);if("group"===a){var o,s=c.groups.splice(n.index,1);return(o=c.groups).splice.apply(o,[r.index,0].concat(Object(p.a)(s))),void e.props.onUpdateBoard({type:""},c)}var i=Object(h.a)({},c.groups.find((function(e){return e.id===n.droppableId}))),l=i.cards.splice(n.index,1);if(n.droppableId===r.droppableId){var d;(d=i.cards).splice.apply(d,[r.index,0].concat(Object(p.a)(l)));var u={type:"UPDATE_GROUP",group:i};e.props.onUpdateBoard(u,c)}else{var b,j=Object(h.a)({},c.groups.find((function(e){return e.id===r.droppableId})));j.cards?(b=j.cards).splice.apply(b,[r.index,0].concat(Object(p.a)(l))):j.cards=[l],c.groups=c.groups.map((function(e){return e.id===n.droppableId?i:e.id===r.droppableId?j:e})),e.props.onUpdateBoard({type:""},c)}}},e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.toggleGroupArchive=function(t){var r=Object(h.a)({},e.props.board.groups.find((function(e){return t===e.id})));r.isArchive=!r.isArchive||!r.isArchive;var n={txt:we(r.title)},a={type:"UPDATE_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,r,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.boardId,r=this.props.location.search,console.log("from Board details: ",r),e.next=5,this.loadBoard(t,r);case 5:M.emit("member-joined",t),M.on("board-update",(function(e){var t=e.action,r=e.activity,a=t.board||n.props.board;n.props.outputUpdateBoard(t,a,r)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match.params.boardId,n=this.props.location.search,t.match.params.boardId===r){e.next=5;break}return e.next=5,this.loadBoard(r,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.resetBoard()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.state,n=(r.isDashboardOpen,r.isCardLabelListOpen),a=r.isAddPopOpen,c=r.quickCardEditor;return t?(t.archivedCards&&console.log("board",t),Object(ue.jsxs)("div",{className:"board-details flex column",children:[Object(ue.jsx)(ee.a,{path:"/board/:boardId/dashboard",component:Hn}),Object(ue.jsx)(ee.a,{path:"/board/:boardId/:groupId/:cardId",component:Er}),Object(ue.jsx)(En,{onToggleDashboard:this.onToggleDashboard,toggleCardLabelList:this.toggleCardLabelList,toggleCardComplete:this.toggleCardComplete,isCardLabelListOpen:n,getLabel:this.getLabel,openCardEdit:this.openCardEdit}),Object(ue.jsx)(nt.a,{onDragEnd:this.handleOnDragEnd,children:Object(ue.jsx)("section",{className:"group-list-container flex",children:Object(ue.jsx)("div",{className:"group-list-wrapper flex",children:Object(ue.jsx)(nt.c,{droppableId:t._id,direction:"horizontal",type:"group",children:function(r,c){return Object(ue.jsxs)("div",Object(h.a)(Object(h.a)({},r.droppableProps),{},{ref:r.innerRef,className:"flex",children:[t.groups&&Object(ue.jsx)(Xr,{groups:t.groups,openCardEdit:e.openCardEdit,updateBoard:e.updateBoard,toggleCardLabelList:e.toggleCardLabelList,isCardLabelListOpen:n,toggleCardComplete:e.toggleCardComplete,toggleGroupArchive:e.toggleGroupArchive,onToggleQuickCardEditor:e.onToggleQuickCardEditor,getLabel:e.getLabel}),r.placeholder,Object(ue.jsxs)("div",{className:"add-group-container",children:[!a&&Object(ue.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(ue.jsx)("i",{className:"flex align-center",children:Object(ue.jsx)(je.f,{})}),Object(ue.jsx)("span",{children:"Add a list"})]}),a&&Object(ue.jsx)(Tr,{onToggleAddPop:e.onToggleAddPop,type:"group"})]})]}))}})})})}),c.cardToEdit&&Object(ue.jsx)(Tn,{cardId:c.cardToEdit.id,groupId:c.groupId,position:c.position,getLabel:this.getLabel,toggleCardComplete:this.toggleCardComplete,isCardLabelListOpen:n,onToggleQuickCardEditor:this.onToggleQuickCardEditor,openCardEdit:this.openCardEdit}),c.cardToEdit&&Object(ue.jsx)("div",{onClick:function(t){return e.onToggleQuickCardEditor(t,null,"")},children:Object(ue.jsx)(Ke,{})})]})):Object(ue.jsx)($e,{})}}]),r}(n.Component);var qn={loadBoard:ze,onUpdateBoard:We,outputUpdateBoard:function(e,t,r){return function(){var r=Object(v.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Ye(e,t),n({type:"UPDATE_BOARD",board:a});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},onUpdateCard:Qe,resetBoard:function(){return document.body.style.background="unset",function(e){e({type:"SET_CURR_BOARD",board:null})}}},Jn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),qn)(Vn),Qn=r(30),Xn=r(267),Yn=r.p+"static/media/login-svg-right.df08073f.svg",Kn=r.p+"static/media/login-svg-left.ff7c7688.svg",Zn=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{username:"",password:"",fullname:""},pageMode:null},e.validate=function(e){var t={};return e.username?e.username.length<6&&(t.username="Please use at least 6 characters"):t.username="Required",e.password.length<4&&(t.password="Password is too short"),e.fullname?e.fullname.length<4&&(t.fullname="Please use at least 4 characters"):t.fullname="Required",t},e.onSuccessGoogle=function(t){var r=t.tokenId;(0,e.props.onGoogleLogin)(r),e.props.history.push("/board")},e.onFailureGoogle=function(e){console.log("Login with google failed",e)},e.onSubmit=function(t){var r=e.state.pageMode,n=e.props,a=n.onLogin,c=n.onSignup;"login"===r?a(t):c(t),e.props.history.push("/board")},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUsers();case 2:t="/login"===this.props.location.pathname?"login":"signup",this.setState({pageMode:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.credentials,r=e.pageMode;return Object(ue.jsxs)("section",{className:"login-signup-page main-container",children:[Object(ue.jsxs)("div",{className:"login-signup-header",children:[Object(ue.jsx)(te.a,{}),Object(ue.jsx)("h3",{className:"logo-text",children:"Marshmello"})]}),"login"===r&&Object(ue.jsxs)("div",{className:"login-signup flex column",children:[Object(ue.jsx)("h3",{children:"Log in to Marshmello"}),Object(ue.jsx)(Qn.d,{initialValues:t,onSubmit:this.onSubmit,children:Object(ue.jsxs)(Qn.c,{className:"login-form flex column",children:[Object(ue.jsx)(Qn.b,{type:"username",placeholder:"Enter user name",name:"username",autoFocus:!0}),Object(ue.jsx)(Qn.a,{name:"username",component:"div"}),Object(ue.jsx)(Qn.b,{type:"password",placeholder:"Enter password",name:"password",autoComplete:"off"}),Object(ue.jsx)(Qn.a,{name:"password",component:"div"}),Object(ue.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Log in"})]})}),"OR",Object(ue.jsx)("br",{}),Object(ue.jsx)(Xn.GoogleLogin,{className:"google-login-btn flex align-center justify-center",clientId:"209268489709-ofnqpgb55aikiprlelkbiafntgld4mhg.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:this.onSuccessGoogle,onFailure:this.onFailureGoogle,cookiePolicy:"single_host_origin"}),Object(ue.jsx)(s.b,{to:"/signup",children:"Sign up for an account"})]}),"signup"===r&&Object(ue.jsxs)("div",{className:"login-signup flex column",children:[Object(ue.jsx)("h3",{children:"Sign up for your account"}),Object(ue.jsx)(Qn.d,{initialValues:t,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,onSubmit:this.onSubmit,children:Object(ue.jsxs)(Qn.c,{className:"flex column",children:[Object(ue.jsx)(Qn.b,{type:"fullname",placeholder:"Enter full name",name:"fullname",autoFocus:!0}),Object(ue.jsx)(Qn.a,{name:"fullname",component:"p"}),Object(ue.jsx)(Qn.b,{type:"username",placeholder:"Enter user name",name:"username"}),Object(ue.jsx)(Qn.a,{name:"username",component:"p"}),Object(ue.jsx)(Qn.b,{type:"password",placeholder:"Enter password",name:"password"}),Object(ue.jsx)(Qn.a,{name:"password",component:"p"}),Object(ue.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Sign up"})]})}),Object(ue.jsx)(s.b,{to:"/login",children:"Already have an account ? Log In"})]}),Object(ue.jsx)("div",{className:"right-svg",children:Object(ue.jsx)("img",{src:Yn,alt:"right-svg"})}),Object(ue.jsx)("div",{className:"left-svg",children:Object(ue.jsx)("img",{src:Kn,alt:"left-svg"})})]})}}]),r}(a.a.Component);var $n={loadUsers:ae,onLogin:ce,onSignup:oe,onGoogleLogin:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.googleLogin(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},ea=Object(i.b)((function(e){return{user:e.userModule.user}}),$n)(Zn),ta=[{path:"/board/:boardId",component:Jn},{path:"/board",component:rt},{path:"/login",component:ea},{path:"/signup",component:ea},{path:"/",component:he}],ra=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={title:"",style:{imgUrl:"https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"},chosenImgIdx:5},e.targetRef=a.a.createRef(),e.handleClick=function(t){e.targetRef.current.contains(t.target)||e.props.onClose()},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(at.a)({},r,n)))},e.handleImage=function(t,r){t.preventDefault();var n=t.target.getAttribute("src");e.setState(Object(h.a)(Object(h.a)({},e.state),{},{style:{imgUrl:n},chosenImgIdx:r}))},e.addBoard=function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.onAddBoard(e.state);case 5:n=t.sent,e.props.history.push("/board/".concat(n._id)),e.props.setAddingBoard(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick),this.props.setAddingBoard(!1)}},{key:"render",value:function(){var e=this,t=["https://images.pexels.com/photos/1914982/pexels-photo-1914982.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/844297/pexels-photo-844297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3293148/pexels-photo-3293148.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/911738/pexels-photo-911738.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3274903/pexels-photo-3274903.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2170473/pexels-photo-2170473.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2529973/pexels-photo-2529973.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1982485/pexels-photo-1982485.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"],r=this.state,n=r.title,a=r.chosenImgIdx;return Object(ue.jsxs)("div",{className:"board-add",ref:this.targetRef,children:[Object(ue.jsxs)("form",{className:"board-add-form",onSubmit:this.addBoard,style:{background:"#000000",backgroundImage:"url(".concat(t[a],")")},children:[Object(ue.jsx)("input",{autoFocus:!0,className:"board-title-input ".concat(n?"editing":""),autoComplete:"off",type:"text",placeholder:"Add board title",name:"title",value:n,onChange:this.handleChange}),Object(ue.jsx)("button",{className:"create-btn ".concat(n?"clickable":""),type:"submit",children:"Create Board"})]}),Object(ue.jsx)("div",{className:"images-container",children:t.map((function(t,r){return Object(ue.jsx)("button",{className:"img-btn ".concat(r===a?"chosen":""),onClick:function(t){return e.handleImage(t,r)},children:Object(ue.jsx)("img",{className:"add-board-img",src:t,alt:t})},r)}))})]})}}]),r}(a.a.Component);var na={onAddBoard:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.save(e);case 3:return n=t.sent,console.log("Added Board",n),r({type:"ADD_BOARD",board:n}),M.emit("update",!0),t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),console.log("Cannot add board",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:He},aa=Object(ee.f)(ra),ca=Object(i.b)((function(e){return{isAddingBoard:e.boardModule.isAddingBoard}}),na)(aa),oa=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onLogoutUser=function(){e.props.history.push("/login"),e.props.onLogout()},e}return Object(K.a)(r,[{key:"render",value:function(){var e=this;return Object(ue.jsxs)("div",{className:"mini-user flex column",children:[Object(ue.jsxs)("div",{className:"main flex",children:[Object(ue.jsx)(kt,{size:"lg",member:this.props.user}),Object(ue.jsxs)("div",{children:[Object(ue.jsx)("h3",{className:"mini-user-fullname",children:this.props.user.fullname}),Object(ue.jsx)("p",{children:this.props.user.username})]})]}),Object(ue.jsx)("p",{className:"remove-member",onClick:function(){return e.onLogoutUser()},children:"Log Out"})]})}}]),r}(a.a.Component);var sa={onLogout:se},ia=Object(ee.f)(oa),la=Object(i.b)((function(e){return{user:e.userModule.user}}),sa)(ia),da=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).markAsSeen=function(t){var r=e.props.user,n=r.mentions.findIndex((function(e){return e.id===t}));r.mentions.splice(n,1),e.props.onUpdateUser(r)},e}return Object(K.a)(r,[{key:"render",value:function(){var e=this,t=this.props.user;return Object(ue.jsx)("section",{className:"notifications",children:t.mentions&&t.mentions.length>0?t.mentions.map((function(t,r){return Object(ue.jsxs)("div",{className:"user-mentions",children:[Object(ue.jsx)(kt,{member:t.user}),Object(ue.jsxs)("p",{children:[t.user.fullname," has ",t.action," you ","Removed"===t.action?"from":"to"," card ",Object(ue.jsxs)(s.b,{to:"/board/".concat(t.board.boardId,"/").concat(t.groupId,"/").concat(t.card.cardId),children:[" ",t.card.title," "]})," in board ",Object(ue.jsx)(s.b,{to:"/board/".concat(t.board.boardId),children:t.board.title})]}),Object(ue.jsx)(xn.a,{className:"publish-time",fromNow:!0,children:t.createdAt}),Object(ue.jsx)("small",{onClick:function(){return e.markAsSeen(t.id)},children:"Mark as seen"})]},t.id)})):Object(ue.jsx)("div",{children:"No notifications yet"})})}}]),r}(a.a.Component);var ua={onUpdateUser:ie},ba=Object(i.b)((function(e){return{user:e.userModule.user}}),ua)(da),pa=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){var e;Object(Y.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isUserPopoverOpen:!1,isNotificationPopoverOpen:!1},e.userMenuRef=a.a.createRef(),e.notificationsRef=a.a.createRef(),e.onLogout=function(){e.props.onLogout()},e.setAddBoard=function(t){e.props.setAddingBoard(t)},e.setFavicon=function(){document.getElementById("favicon").href="../../public/favicon.ico"},e.getUnreadMentions=function(e){var t=0;return e&&e.forEach((function(e){e.isRead||t++})),t},e.markAllMentionsAsRead=function(){var t=e.props.user;t.mentions.forEach((function(e){e.isRead=!0})),e.props.onUpdateUser(t),e.setState({isNotificationPopoverOpen:!e.state.isNotificationPopoverOpen})},e}return Object(K.a)(r,[{key:"componentDidMount",value:function(){M.on("received-mention",this.props.onReceiveMention)}},{key:"componentDidUpdate",value:function(e){if(this.props.user!==e.user){var t=this.props.user;M.emit("set-user-socket",t._id)}}},{key:"componentWillUnmount",value:function(){M.off("received-mention",this.props.onReceiveMention)}},{key:"render",value:function(){var e=this,t=this.props,r=t.user,n=t.isAddingBoard,a=this.state,c=a.isUserPopoverOpen,o=a.isNotificationPopoverOpen;return r?Object(ue.jsxs)("header",{className:"app-header",children:[Object(ue.jsxs)("nav",{className:"nav-links",children:[Object(ue.jsxs)("div",{className:"left-links",children:[Object(ue.jsx)(s.c,{to:"/",children:Object(ue.jsx)("button",{onClick:function(){return e.setFavicon()},className:"home-btn nav-button",children:Object(ue.jsx)(qt.b,{})})}),Object(ue.jsx)(s.c,{to:"/board",children:Object(ue.jsxs)("button",{onClick:function(){return e.setFavicon()},className:"boards-btn flex nav-button",children:[Object(ue.jsx)(te.a,{})," ",Object(ue.jsx)("span",{children:"Boards"})]})})]}),Object(ue.jsxs)(s.c,{className:"logo",to:"/",children:[Object(ue.jsx)(te.a,{})," ",Object(ue.jsx)("span",{children:" Marshmello "})]}),Object(ue.jsxs)("div",{className:"right-links",children:[Object(ue.jsx)("button",{className:"nav-button",onClick:function(){return e.setAddBoard(!0)},children:Object(ue.jsx)(je.f,{})}),Object(ue.jsxs)("div",{className:"relative",ref:this.notificationsRef,children:[Object(ue.jsx)("button",{onClick:this.markAllMentionsAsRead,className:"nav-button",style:{backgroundColor:this.getUnreadMentions(r.mentions)?"red":""},children:Object(ue.jsx)(je.b,{})}),o&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isNotificationPopoverOpen:!1})},title:"Notifications",ref:this.notificationsRef,children:Object(ue.jsx)(ba,{})})]}),Object(ue.jsxs)("div",{className:"relative",ref:this.userMenuRef,children:[Object(ue.jsx)("button",{onClick:function(){return e.setState({isUserPopoverOpen:!c})},children:Object(ue.jsx)(kt,{member:r},r._id)}),c&&Object(ue.jsx)(ft,{onClose:function(){return e.setState({isUserPopoverOpen:!1})},title:"User Details",ref:this.userMenuRef,children:Object(ue.jsx)(la,{member:r,onLogout:this.onLogout})})]})]})]}),n&&Object(ue.jsx)(ca,{onClose:function(){return e.setAddBoard(!1)}}),n&&Object(ue.jsx)(Ke,{})]}):Object(ue.jsx)($e,{})}}]),r}(a.a.Component);var ha={onLogin:ce,onSignup:oe,onLogout:se,loadUsers:ae,removeUser:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.remove(e);case 3:r({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:He,onReceiveMention:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D.addMentionToStorage(e),r({type:"ADD_MENTION",mention:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},onUpdateUser:ie},ja=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user,isAddingBoard:e.boardModule.isAddingBoard}}),ha)(pa),ma=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(){return Object(Y.a)(this,r),t.apply(this,arguments)}return Object(K.a)(r,[{key:"isHeaderShown",get:function(){var e=this.props.location.pathname;return e.includes("board")||e.includes("boards")}},{key:"render",value:function(){return Object(ue.jsxs)("div",{className:"app flex column",children:[this.isHeaderShown&&Object(ue.jsx)(ja,{}),Object(ue.jsx)("main",{className:"main-app",children:Object(ue.jsx)(ee.c,{children:ta.map((function(e){return Object(ue.jsx)(ee.a,{component:e.component,path:e.path},e.path)}))})})]})}}]),r}(a.a.Component);var fa=Object(ee.f)(ma),va=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(fa);r(533);o.a.render(Object(ue.jsxs)(a.a.StrictMode,{children:[Object(ue.jsxs)(i.a,{store:X,children:[Object(ue.jsx)(s.a,{children:Object(ue.jsx)(va,{})})," "]})," "]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}()}},[[534,1,2]]]);
//# sourceMappingURL=main.d0dd9556.chunk.js.map