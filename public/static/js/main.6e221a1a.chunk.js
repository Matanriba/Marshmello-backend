(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{281:function(e){e.exports=JSON.parse('[{"_id":"b101","title":"Final Project","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u101","fullname":"Summer Smith","imgUrl":"https://static.wikia.nocookie.net/rickandmorty/images/a/ad/Summer_is_cool.jpeg/revision/latest?cb=20160919183158"},"style":{"imgUrl":"https://images.pexels.com/photos/2662116/pexels-photo-2662116.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Important","color":"#FF9F1A"},{"id":"l103","title":"Urgent","color":"#eb5a46"},{"id":"l104","title":"If time permits","color":"#C377E0"},{"id":"l105","title":"On hold","color":"#344563"},{"id":"l106","title":"Design","color":"#FF78CB"}],"members":[{"_id":"u101","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u104","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"groups":[{"id":"g102","title":"Bugs","cards":[{"id":"c103","title":"Notification not sending","description":"Notification on header doesn\'t apear in time","isComplete":false,"attachments":[{"id":"j0dq7e","url":"https://images.pexels.com/photos/1122626/pexels-photo-1122626.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","title":"Attachment","addedAt":1632823545000}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l102"],"createdAt":1590999730348},{"id":"c104","title":"Drag & drop issues","description":"description","isComplete":false,"comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"}}],"checklists":[{"id":"YEhmF","title":"react-beautiful-dnd","todos":[{"id":"212jX","title":"Go over the documentation again","isDone":true}]},{"id":"YEhmS","title":"Droppable & Draggable","todos":[{"id":"212jX","title":"Fix placeholder","isDone":false}]},{"id":"YEhmA","title":"Handle Drag End","todos":[{"id":"212jX","title":"Fix function","isDone":false},{"id":"212jY","title":"Console to check the result","isDone":true}]}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l103"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#5BA4CF"}},{"id":"c105","title":"Download img not working","isComplete":false,"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/2325446/pexels-photo-2325446.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}}],"style":{}},{"id":"g103","title":"In progress","cards":[{"id":"c1010","title":"Home page","isComplete":false},{"id":"c1040","title":"Work on JSON","description":"Make demo data perfect","isComplete":false,"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l101","l102"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}},{"id":"c107","title":"About page","description":"Finish about page","isComplete":true,"members":[{"_id":"u101","username":"summer@smith.com","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"}],"labelIds":["l101","l105","l106"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/8979724/pexels-photo-8979724.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}},{"id":"c108","title":"Create test data","description":"Create at least 3 objects for testing","isComplete":false,"checklists":[{"id":"Fkdgngrt12","title":"Test data","todos":[{"id":"212jX","title":"First test","isDone":true},{"id":"ffjenf54f","title":"Second data","isDone":false},{"id":"ggfvdf3d","title":"Third data","isDone":false}]}],"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l103"],"createdAt":1590999730348,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://clickup.com/blog/wp-content/uploads/2020/01/note-taking.png"}},{"id":"c110","title":"Finish basic css","isComplete":false,"members":[{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l105","l106"],"createdAt":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}}],"style":{}},{"id":"g106","title":"Backend","cards":[{"id":"c101012","title":"Sockets","createdAt":1590999817436,"isComplete":false},{"id":"c10434","title":"Connect mongo","description":"set up data base in mongoDB","isComplete":true,"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"},"style":{"bgColor":"#F5DD29"}}],"style":{}},{"id":"ghtrhthfgsf","title":"Next steps","cards":[{"id":"afgfv3ffs","title":"Responsivness"}]},{"id":"g1038yur673y","title":"QA","cards":[]},{"id":"4tesrgfg","title":"Done","cards":[]}],"activities":[]},{"_id":"b102","title":"Marshmello","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"},"style":{"bgColor":"#26de81"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Stuck","color":"#0079BF"},{"id":"l103","title":"In Progress","color":"#61bd4f"},{"id":"l104","title":"With Bugs","color":"#61bd4f"},{"id":"l105","title":"Ready","color":"#61bd4f"}],"members":[{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}],"groups":[{"id":"g102","title":"Group 1","cards":[{"id":"c103","title":"Do that","description":"description"},{"id":"c104","title":"Help me","description":"description","comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}}],"checklists":[{"id":"YEhmF","title":"Checklist","todos":[{"id":"212jX","title":"To Do 1","isDone":false},{"id":"212jF","title":"To Do 2","isDone":true},{"id":"212jN","title":"To Do 3","isDone":false}]},{"id":"YEhmR","title":"Checklist 2","todos":[{"id":"232jX","title":"To Do 4","isDone":false},{"id":"232jF","title":"To Do 5","isDone":true},{"id":"232jN","title":"To Do 6","isDone":true}]}],"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l101","l102","l103"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@abambi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}}],"style":{}}],"activities":[]}]')},282:function(e){e.exports=JSON.parse('[{"_id":"u101","fullname":"Summer Smith","username":"summer@Smith.com","password":"summer123","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif","mentions":[{"id":"m101","boardId":"b101","taskId":"t101"}]},{"_id":"u102","fullname":"Rick Sanchez","username":"rick@sanchez.com","password":"rick123","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv","mentions":[{"id":"m102","boardId":"b102","taskId":"t102"}]},{"_id":"u103","fullname":"Morty Smith","username":"morty@smith.com","password":"morty123","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u104","fullname":"Beth Smith","username":"beth@smith.com","password":"beth123","imgUrl":"https://i.imgur.com/pUVtIqL.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u105","fullname":"Jerry Smith","username":"jerry@smith.com","password":"jerry123","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u106","fullname":"Bird Person","username":"bird@person.com","password":"bird123","imgUrl":"https://robohash.org/bird.png?set=set2","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]}]')},533:function(e,t,r){},534:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),o=r(48),c=r.n(o),s=r(22),i=r(6),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=r(40),b=r(247),p=r(14),h=r(4),j={boards:[],currBoard:null,lastRemovedBoard:null,isAddingBoard:!1,currCardId:null,filterBy:{txt:"",members:[],labels:[]}};var m=r(9),f=r.n(m),g=r(17),v={query:C,get:function(e,t){return C(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=w(),C(e).then((function(r){return r.push(t),k(e,r),t}))},put:function(e,t){return C(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),k(e,r),t}))},remove:function(e,t){return C(e).then((function(r){var n=r.findIndex((function(e){return e._id===t}));r.splice(n,1),k(e,r)}))},postMany:function(e,t){return C(e).then((function(r){return t=t.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{_id:w()})})),r.push.apply(r,Object(p.a)(t)),k(e,r),r}))},dashboardQuery:function(e,t){return y.apply(this,arguments)}},O=r(281),x=r(282);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=JSON.parse(localStorage.getItem(e));return r||k(e,r="board"===e?O:x),new Promise((function(e,n){setTimeout((function(){e(r)}),t)}))}function y(){return y=Object(g.a)(f.a.mark((function e(t,r){var n,a,o,c,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:500,e.next=3,C(t);case 3:return a=e.sent,o=a.find((function(e){return e._id===r})),c={groupsCount:0,cardsCount:0,tasksPerMemberMap:{},tasksPerLabelMap:{}},o.members&&o.members.forEach((function(e){c.tasksPerMemberMap[e.fullname]=0})),o.labels&&o.labels.forEach((function(e){c.tasksPerLabelMap[e.title]=0})),o.groups&&o.groups.forEach((function(e){e.isArchive||(c.groupsCount=c.groupsCount+1,e.cards.forEach((function(e){e.isArchive||(c.cardsCount=c.cardsCount+1),e.members&&e.members.forEach((function(e){c.tasksPerMemberMap[e.fullname]++})),e.labelIds&&e.labelIds.forEach((function(e){var t=N(o.labels,e);c.tasksPerLabelMap[t.title]++}))})))})),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(c)}),n)})));case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function w(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function N(e,t){return e.find((function(e){return e.id===t}))}var I=r(248),S="/api/",A=r.n(I).a.create({withCredentials:!0}),B=function(e,t){return T(e,"GET",t)},M=function(e,t){return T(e,"POST",t)},U=function(e,t){return T(e,"PUT",t)},E=function(e,t){return T(e,"DELETE",t)};function T(e){return D.apply(this,arguments)}function D(){return D=Object(g.a)(f.a.mark((function e(t){var r,n,a,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,A({url:"".concat(S).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),D.apply(this,arguments)}var R=r(249),_=r.n(R),L=function(){var e=null,t={setup:function(){e=_()("")},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}();window.socketService=L,L.setup();var P={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],r="";for(;e>0;)e--,r+=t[Math.floor(Math.random()*t.length)]+" ";return r},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},debounce:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];clearTimeout(t),t=setTimeout((function(){e.apply(r,o)}),n)}}};var F="loggedinUser",G={login:function(e){return V.apply(this,arguments)},logout:function(){return Q.apply(this,arguments)},signup:function(e){return q.apply(this,arguments)},getLoggedinUser:Y,getMiniUser:function(){var e=Y()||{_id:P.makeId(),fullname:"Guest"};return{_id:e._id,fullname:e.fullname,imgUrl:e.imgUrl}},getUsers:function(){return z.apply(this,arguments)},getById:function(e){return W.apply(this,arguments)},remove:function(e){return v.remove("user",e)},update:function(e){return H.apply(this,arguments)},getGueastUser:function(){return{_id:P.makeId(),fullname:"Guest"}},googleLogin:function(e){return J.apply(this,arguments)}};function z(){return(z=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("user",t);case 2:return r=e.sent,r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.put("user",t);case 2:return Y()._id===t._id&&X(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/login",t);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",X(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("auth/googlelogin",{tokenId:t});case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",X(r));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.imgUrl="",t.mentions=[],t.boards=[],e.next=5,M("auth/signup",t);case 5:return r=e.sent,e.abrupt("return",X(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.removeItem(F);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return sessionStorage.setItem(F,JSON.stringify(e)),e}function Y(){return JSON.parse(sessionStorage.getItem(F)||"null")}window.userService=G;var K={user:G.getLoggedinUser()||G.getGueastUser(),users:[],watchedUser:null};var Z={isLoading:!1};var $=Object(u.c)({boardModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0,n=t;switch(r.type){case"SET_BOARDS":n=Object(h.a)(Object(h.a)({},t),{},{boards:r.boards});break;case"UPDATE_FILTER":n=Object(h.a)(Object(h.a)({},t),{},{filterBy:r.filterBy});break;case"SET_CURR_BOARD":case"UPDATE_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{currBoard:r.board});break;case"REMOVE_BOARD":var a=t.boards.find((function(e){return e._id===r.boardId}));e=t.boards.filter((function(e){return e._id!==r.boardId})),n=Object(h.a)(Object(h.a)({},t),{},{boards:e,lastRemovedBoard:a});break;case"SET_ADDING_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{isAddingBoard:r.isAddingBoard});break;case"ADD_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[r.board])});break;case"SET_CARD_ID":n=Object(h.a)(Object(h.a)({},t),{},{currCardId:r.cardId});break;case"UNDO_REMOVE_BOARD":t.lastRemovedBoard&&(n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[t.lastRemovedBoard]),lastRemovedBoard:null}))}return n},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,r=e;switch(t.type){case"SET_USER":r=Object(h.a)(Object(h.a)({},e),{},{user:t.user});break;case"SET_WATCHED_USER":r=Object(h.a)(Object(h.a)({},e),{},{watchedUser:t.user});break;case"REMOVE_USER":r=Object(h.a)(Object(h.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});break;case"SET_USERS":r=Object(h.a)(Object(h.a)({},e),{},{users:t.users})}return r},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});default:return e}}}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,te=Object(u.e)($,ee(Object(u.a)(b.a))),re=r(7),ne=r(8),ae=r(11),oe=r(10),ce=r(18),se=r(56);var ie={on:function(e,t){var r=function(e){var r=e.detail;t(r)};return window.addEventListener(e,r),function(){window.removeEventListener(e,r)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ie.emit("show-user-msg",{txt:e,type:t})}function de(){return function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.getUsers();case 3:r=e.sent,t({type:"SET_USERS",users:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ue(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.login(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function be(e){return function(t){G.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}function pe(){return function(e){G.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}}window.myBus=ie,window.showUserMsg=le;var he=r.p+"static/media/hero.e8878a54.png",je=r.p+"static/media/homepage-product.162d5e7b.jpg",me=r(1),fe=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isNavbarBG:!1},e.changeHeaderStyle=function(){var t=e.state.isNavbarBG;window.scrollY>50&&!t?e.setState({isNavbarBG:!0}):window.scrollY<50&&t&&e.setState({isNavbarBG:!1})},e.onGuestLogin=function(){e.props.onLogin({username:"rick@sanchez.com",password:"rick123"}),e.props.history.push("/board")},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.changeHeaderStyle),document.body.style.overflowY="scroll"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.changeHeaderStyle),document.body.style.overflowY="hidden"}},{key:"render",value:function(){var e=this,t=this.state.isNavbarBG;return Object(me.jsxs)("section",{className:"home-page main-container",children:[Object(me.jsxs)("header",{className:"home-header ".concat(t?"bg-visible":""),children:[Object(me.jsxs)("span",{className:"logo",children:[" ",Object(me.jsx)(se.a,{})," Marshmello"]}),Object(me.jsxs)("div",{className:"header-buttons",children:[Object(me.jsx)(s.b,{to:"/login",children:Object(me.jsx)("button",{className:"login-btn nav-button",children:"Log in"})}),Object(me.jsx)(s.b,{to:"/signup",children:Object(me.jsx)("button",{className:"signup-btn nav-button",children:"Sign up"})})]})]}),Object(me.jsxs)("div",{className:"home-first-fold",children:[Object(me.jsxs)("div",{className:"first-fold-text",children:[Object(me.jsx)("h1",{children:"Marshmello helps teams move work forward."}),Object(me.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Marshmello."}),Object(me.jsx)("button",{className:"cta-btn nav-button",onClick:function(){return e.onGuestLogin()},children:"Get Started!"})]}),Object(me.jsx)("div",{className:"first-fold-img",children:Object(me.jsx)("img",{src:he,alt:"hero"})})]}),Object(me.jsxs)("div",{className:"home-second-fold",children:[Object(me.jsxs)("div",{className:"second-fold-text",children:[Object(me.jsx)("h1",{children:"It\u2019s more than work. It\u2019s a way of working together."}),Object(me.jsx)("p",{children:"Start with a Marshmello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place."})]}),Object(me.jsx)("div",{className:"second-fold-img",children:Object(me.jsx)("img",{src:je,alt:"hero"})})]})]})}}]),r}(a.a.Component);var ge={onLogin:ue},ve=Object(i.b)((function(e){return{users:e.userModule.users}}),ge)(fe),Oe=r(21);function xe(e){var t=e.board,r=e.toggleStarredBoard,n=e.setFavicon;return Object(me.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(me.jsx)("div",{onClick:function(){return n(t.style)},className:"board-preview",style:t.style.bgColor?{backgroundColor:"".concat(t.style.bgColor)}:{backgroundImage:"url(".concat(t.style.imgUrl,")")},children:Object(me.jsx)("div",{className:"preview-screen",children:Object(me.jsxs)("div",{className:"preview-content",children:[Object(me.jsx)("h4",{className:"board-title",children:t.title}),Object(me.jsx)("button",{className:"star-btn ".concat(t.isStarred?"starred":""),onClick:function(e){return function(e){e.preventDefault(),e.stopPropagation(),r(t)}(e)},children:Object(me.jsx)(Oe.h,{})})]})})})})}function Ce(e){var t=e.boards,r=e.toggleStarredBoard,n=e.setFavicon,a=e.setAddBoard,o=e.isWorkspace;return Object(me.jsxs)("div",{className:"board-list flex",children:[t.map((function(e){return Object(me.jsx)(xe,{board:e,toggleStarredBoard:r,setFavicon:n},e._id)})),o&&Object(me.jsx)("div",{className:"board-preview create-board-btn",onClick:function(){return a()},children:Object(me.jsx)("h4",{children:"Create New Board"})})]})}var ye=function(e){return"Added list: ".concat(e)},ke=function(){return"Added card:"},we=function(e){return"Renamed this board to: ".concat(e)},Ne=function(e){return"Invited ".concat(e," to this board")},Ie=function(e){return"Removed ".concat(e," from this board")},Se=function(){return"Changed the background of this board"},Ae=function(){return"Edited card title: "},Be=function(e){return"Archived the list: ".concat(e)},Me=function(){return"Marked the following card as complete: "},Ue=function(){return"Marked the following card as incomplete: "},Ee=function(){return"Changed the description in card: "},Te=function(e){return"Changed the title in list: ".concat(e)},De=function(e){return"Added ".concat(e," to a card")},Re=function(e){return"Removed ".concat(e," from a card")},_e=function(e){return"Added the label ".concat(e," to a card")},Le=function(e){return"Removed the label ".concat(e," from a card")},Pe=function(e){return"Added checklist ".concat(e," to a card")},Fe={query:function(e){return Ge.apply(this,arguments)},getById:function(e,t){return ze.apply(this,arguments)},save:function(e){return Je.apply(this,arguments)},remove:function(e){return Ve.apply(this,arguments)},dashboardQuery:function(e){return We.apply(this,arguments)},getArchivedCards:function(e){return He.apply(this,arguments)}};function Ge(){return(Ge=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("board",t);case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading boards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ze(){return(ze=Object(g.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"object"===typeof r&&(r=new URLSearchParams(r).toString()),e.next=4,B("board/".concat(t),r);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("Front: Error loading board with ID: ".concat(t),e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function We(){return(We=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("board/dashboard/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading chartsData",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function He(){return(He=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("board/".concat(t,"/closed"));case 3:return r=e.sent,console.log("archivedChards:",r),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log("Front: Error loading archivedCards",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ve(){return(Ve=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",E("board/".concat(t)));case 4:e.prev=4,e.t0=e.catch(0),console.log("Front: Error deleting board with ID: ".concat(t));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function Je(){return Je=Object(g.a)(f.a.mark((function e(t){var r,n,a,o,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,!t._id){e.next=10;break}if(!r){e.next=7;break}return n={txt:r.txt,id:P.makeId(),byMember:G.getMiniUser(),card:r.card?{id:r.card.id,title:r.card.title}:{},groupId:r.groupId?r.groupId:null},e.abrupt("return",U("board/".concat(t._id),{board:t,activity:n}));case 7:return e.abrupt("return",U("board/".concat(t._id),{board:t,activity:null}));case 8:e.next=15;break;case 10:return a={title:t.title,style:t.style,createdBy:G.getMiniUser(),members:[G.getMiniUser()]},e.next=13,M("board",a);case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function qe(e,t){return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Fe.getById(e,t);case 3:a=r.sent,document.body.style.background=a.style.bgColor?a.style.bgColor:'url("'.concat(a.style.imgUrl,'")'),document.body.style.backgroundSize="cover",n({type:"SET_CURR_BOARD",board:a}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("Cannot load board",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}function Qe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var n=Object(g.a)(f.a.mark((function n(a){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Ze(e,t),console.log(o),a({type:"UPDATE_BOARD",board:o}),n.prev=3,e.type||(e.board=t),L.emit("board-update",{action:e,activity:r}),n.next=8,Fe.save(o,r);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.log("Cannot save board",n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}()}function Xe(e){return function(t){t({type:"SET_ADDING_BOARD",isAddingBoard:e})}}function Ye(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r.groups.find((function(e){return e.id===t})),o=a.cards.findIndex((function(t){return t.id===e.id}));a.cards.splice(o,1,e);var c={type:"UPDATE_GROUP",group:a};return Qe(c,r,n)}function Ke(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_CARD_ID",cardId:e})}catch(n){console.log("Cannot set card",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ze(e,t){var r=Object(h.a)({},t);switch(e.type){case"TOGGLE_STARRED":r.isStarred=e.isStarred;break;case"CHANGE_BOARD_STYLE":r.style=e.style,document.body.style.background=r.style.bgColor?r.style.bgColor:'no-repeat url("'.concat(r.style.imgUrl,'")'),document.body.style.backgroundSize="cover";break;case"CHANGE_TITLE":r.title=e.title;break;case"ADD_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=[].concat(Object(p.a)(r.members),[e.member]);break;case"REMOVE_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=Object(p.a)(r.members.filter((function(t){return t._id!==e.memberId})));break;case"ADD_GROUP":r.groups=[].concat(Object(p.a)(r.groups),[e.group]);break;case"UPDATE_GROUP":r.groups=Object(p.a)(r.groups.map((function(t){return t.id===e.group.id?e.group:t})));break;case"REMOVE_GROUP":r.groups=Object(p.a)(r.groups.filter((function(t){return t.id!==e.group.id})))}return r}function $e(){return Object(me.jsx)("div",{className:"overlay-screen"})}window.cs=Fe;var et=r.p+"static/media/loader.1a7da032.svg";function tt(){return Object(me.jsx)("div",{className:"loader",children:Object(me.jsx)("img",{src:et,alt:"loading..."})})}var rt=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.getStarredBoards=function(){return e.props.boards.filter((function(e){return e.isStarred}))},e.toggleStarredBoard=function(t){var r=e.props.onUpdateBoard;t.isStarred=!t.isStarred,r({type:"TOGGLE_STARRED",isStarred:t.isStarred},t),L.emit("update",!0)},e.setFavicon=function(e){var t=document.getElementById("favicon");e.imgUrl?t.href=e.imgUrl:t.href="../../public/favicon.ico"},e.setAddBoard=function(){e.props.setAddingBoard(!0)},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.getMiniUser(),console.log(t),e.next=4,this.props.loadBoards(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.boards,r=e.isAddingBoard;return t?Object(me.jsx)("div",{className:"board-select-wrapper",children:Object(me.jsxs)("div",{className:"boards-select main-container",children:[Object(me.jsxs)("h2",{children:[" ",Object(me.jsx)(Oe.a,{})," Starred Boards"]}),Object(me.jsx)("div",{className:"starred-boards",children:Object(me.jsx)(Ce,{setFavicon:this.setFavicon,boards:this.getStarredBoards(),toggleStarredBoard:this.toggleStarredBoard})}),Object(me.jsxs)("h2",{children:[" ",Object(me.jsx)(se.a,{})," Workspace"]}),Object(me.jsx)("div",{className:"workspace",children:Object(me.jsx)(Ce,{boards:t,toggleStarredBoard:this.toggleStarredBoard,setFavicon:this.setFavicon,setAddBoard:this.setAddBoard,isWorkspace:!0})}),r&&Object(me.jsx)($e,{})]})}):Object(me.jsx)(tt,{})}}]),r}(a.a.Component);var nt={loadBoards:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.query(e);case 3:n=t.sent,r({type:"SET_BOARDS",boards:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot load boards",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Xe,onUpdateBoard:Qe},at=Object(i.b)((function(e){return{boards:e.boardModule.boards,isAddingBoard:e.boardModule.isAddingBoard,board:e.boardModule.currBoard,user:e.userModule.user}}),nt)(rt),ot=r(63),ct=r(19),st=r(16),it=r(20),lt=r(60),dt=r(116),ut=function(e,t){return te.getState().boardModule.currBoard.groups.find((function(e){return e.id===t})).cards.find((function(t){return t.id===e}))},bt=function(e){var t;return null===(t=te.getState().boardModule.currBoard.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})))||void 0===t?void 0:t.id},pt={handleChecklistChange:function(e,t,r,n){var a=te.getState().boardModule.currCardId,o=te.getState().boardModule.currBoard,c=bt(a),s=ut(a,c);if(t){var i=s.checklists.find((function(e){return e.id===t}));if("addTodo"===e)i.todos.push(r);else if("markTodo"===e){var l=i.todos.find((function(e){return e.id===r}));l.isDone=!l.isDone}else if("removeTodo"===e){var d=i.todos.findIndex((function(e){return e.id===r}));i.todos.splice(d,1)}else if("changeTitle"===e){var u=i.todos.find((function(e){return e.id===r}));u.title=n}else if("removeChecklist"===e){var b=s.checklists.findIndex((function(e){return e.id===t}));s.checklists.splice(b,1)}}else"addChecklist"===e&&(s.checklists||(s.checklists=[]),s.checklists.push({id:P.makeId(),title:r,todos:[]}));return[s,c,o]},handleMemberChange:function(e){var t,r,n,a=te.getState().boardModule.currCardId,o=te.getState().boardModule.currBoard,c=bt(a),s=ut(a,c);if(s.members||(s.members=[]),null===(t=s)||void 0===t||null===(r=t.members)||void 0===r?void 0:r.some((function(t){return t._id===e})))s=Object(h.a)(Object(h.a)({},s),{},{members:null===(n=s)||void 0===n?void 0:n.members.filter((function(t){return t._id!==e}))});else{var i=o.members.find((function(t){return t._id===e}));s.members.push(i)}return[s,c,o]},getGroupId:bt,getCardById:ut,handleLabelChange:function(e){var t,r,n=te.getState().boardModule.currCardId,a=te.getState().boardModule.currBoard,o=bt(n),c=ut(n,o);if(c.labelIds||(c.labelIds=[]),null===(t=c)||void 0===t?void 0:t.labelIds.some((function(t){return t===e})))c=Object(h.a)(Object(h.a)({},c),{},{labelIds:null===(r=c)||void 0===r?void 0:r.labelIds.filter((function(t){return t!==e}))});else{var s=a.labels.find((function(t){return t.id===e}));c.labelIds.push(s.id)}return[c,o,a]},handleDueDateChange:function(e){var t=te.getState().boardModule.currCardId,r=te.getState().boardModule.currBoard,n=bt(t),a=ut(t,n);return a.dueDate=e,[a,n,r]},getFormattedTime:function(e){if(!e)return"";var t=e-Date.now();if(t<0){var r=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getMonth()],a=r.getDate();return"".concat(n," ").concat(a," at 12:00 AM")}if(t<=864e5)return"tomorrow at 12:00 AM";var o=new Date(e),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],s=o.getDate();return"".concat(c," ").concat(s," at 12:00 AM")},getUploadTime:function(e){var t=Date.now()-e;if(t<6e4)return"Added a few seconds ago";if(t<12e4)return"Added 1 minute ago";if(t<36e5){var r=Math.floor(t/1e3/60);return"Added ".concat(r," minutes ago")}if(t<468e5){var n=Math.floor(t/1e3/60/60);return"Added ".concat(n," hours ago")}var a=new Date(e),o=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();if(t<864e5)return"Added today at ".concat(a.getHours(),":").concat(o," ");if(t<1728e5)return"Added yesterday at ".concat(a.getHours(),":").concat(o);var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return"Added ".concat(c," ").concat(s," at ").concat(a.getHours(),":").concat(o)},handleFileAdd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attachment",r=te.getState().boardModule.currCardId,n=te.getState().boardModule.currBoard,a=bt(r),o=ut(r,a);return o.attachments||(o.attachments=[]),o.attachments.push({url:e,title:t,addedAt:Date.now()}),[o,a,n]},handleFileRemove:function(e){var t=te.getState().boardModule.currCardId,r=te.getState().boardModule.currBoard,n=bt(t),a=ut(t,n),o=a.attachments.findIndex((function(t){return t.id===e}));return a.attachments.splice(o,1),[a,n,r]},getGroupById:function(e){return te.getState().boardModule.currBoard.groups.find((function(t){return t.cards.find((function(t){return t.id===e}))}))},handleMoveCard:function(e,t,r){var n=te.getState().boardModule.currBoard,a=n.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),o=ut(e,a.id),c=a.cards.findIndex((function(t){return t.id===e}));return a.cards.splice(c,1),n.groups.find((function(e){return e.id===t})).cards.splice(r,0,o),n},handleCopyCard:function(e,t,r,n){var a=te.getState().boardModule.currBoard,o=a.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),c=ut(e,o.id);return a.groups.find((function(e){return e.id===t})).cards.splice(r,0,Object(h.a)(Object(h.a)({},c),{},{id:P.makeId(),title:n})),a},handleToggleArchive:function(e){var t=te.getState().boardModule.currBoard,r=bt(e),n=ut(e,r);return n.isArchive=!n.isArchive,[n,r,t]},handleRemoveCard:function(e){var t=Object(h.a)({},te.getState().boardModule.currBoard).groups.find((function(t){return t.cards.some((function(t){return t.id===e}))}));t.cards=t.cards.filter((function(t){return t.id!==e}))},onAddComment:function(e){var t=te.getState().boardModule.currCardId,r=te.getState().boardModule.currBoard,n=te.getState().userModule.user,a=bt(t),o=ut(t,a);return o.comments||(o.comments=[]),o.comments.unshift({id:P.makeId(),author:n,txt:e,addedAt:Date.now()}),[o,a,r]},handleCommentRemove:function(e){var t=te.getState().boardModule.currCardId,r=te.getState().boardModule.currBoard,n=bt(t),a=ut(t,n),o=a.comments.findIndex((function(t){return t.id===e}));return a.comments.splice(o,1),[a,n,r]},getCommentTime:function(e){var t=Date.now()-e;if(t<6e4)return"a few seconds ago";if(t<12e4)return"1 minute ago";if(t<36e5){var r=Math.floor(t/1e3/60);return"".concat(r," minutes ago")}if(t<468e5){var n=Math.floor(t/1e3/60/60);return"".concat(n," hours ago")}var a=new Date(e),o=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();if(t<864e5)return"today at ".concat(a.getHours(),":").concat(o," ");if(t<1728e5)return"yesterday at ".concat(a.getHours(),":").concat(o);var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return"".concat(c," ").concat(s," at ").concat(a.getHours(),":").concat(o)}};var ht={onUpdateBoard:Qe},jt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),ht)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,o=e.onClose,c=Object(n.useState)(null),s=Object(st.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(st.a)(d,2),b=u[0],p=u[1];Object(n.useEffect)((function(){var e=pt.getGroupById(r,t._id);l(e);var n=e.cards.findIndex((function(e){return e.id===r}));p(n+1)}),[t]);var h=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var o=t.groups.find((function(e){return e.id===a}));l(o),p(o.cards.length+1)}else"position"===n&&p(a)};return i?Object(me.jsxs)("div",{className:"move-card",children:[Object(me.jsx)("h4",{children:"Select destination"}),Object(me.jsxs)("div",{className:"select-board",children:[Object(me.jsx)("span",{className:"label",children:"Board"}),Object(me.jsx)("span",{className:"select-value",children:t.title}),Object(me.jsx)("select",{name:"board",onChange:h,children:Object(me.jsx)("option",{value:t._id,children:t.title})})]}),Object(me.jsxs)("div",{className:"flex bottom-container",children:[Object(me.jsxs)("div",{className:"select-group",children:[Object(me.jsx)("span",{className:"label",children:"List"}),Object(me.jsx)("span",{className:"select-value",children:i.title}),Object(me.jsx)("select",{name:"group",onChange:h,children:t.groups.map((function(e){return Object(me.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(me.jsxs)("div",{className:"select-position",children:[Object(me.jsx)("span",{className:"label",children:"Position"}),Object(me.jsx)("span",{className:"select-value",children:b}),Object(me.jsx)("select",{name:"position",onChange:h,children:function(){for(var e=i.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(me.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(me.jsx)("button",{className:"move-btn card-edit-btn secondary",onClick:function(){var e=i.id,t=b-1,n=pt.handleMoveCard(r,e,t);a({type:""},n),o()},children:"Move"})]}):null}));var mt={onUpdateBoard:Qe},ft=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),mt)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,o=e.onClose,c=Object(n.useState)(""),s=Object(st.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(st.a)(d,2),b=u[0],p=u[1],h=Object(n.useState)(null),j=Object(st.a)(h,2),m=j[0],f=j[1];Object(n.useEffect)((function(){var e=pt.getGroupById(r,t._id),n=pt.getCardById(r,e.id);l(n.title),p(e);var a=e.cards.findIndex((function(e){return e.id===r}));f(a+1)}),[t]);var g=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var o=t.groups.find((function(e){return e.id===a}));p(o),f(o.cards.length+1)}else"position"===n?f(a):"title"===n&&l(a)};return b?Object(me.jsxs)("div",{className:"copy-card",children:[Object(me.jsx)("label",{children:"Title"}),Object(me.jsx)("textarea",{name:"title",className:"search-input",autoFocus:!0,value:i,onChange:g}),Object(me.jsx)("label",{children:"Copy to..."}),Object(me.jsxs)("div",{className:"select-board",children:[Object(me.jsx)("span",{className:"label",children:"Board"}),Object(me.jsx)("span",{className:"select-value",children:t.title}),Object(me.jsx)("select",{name:"board",onChange:g,children:Object(me.jsx)("option",{value:t._id,children:t.title})})]}),Object(me.jsxs)("div",{className:"flex bottom-container",children:[Object(me.jsxs)("div",{className:"select-group",children:[Object(me.jsx)("span",{className:"label",children:"List"}),Object(me.jsx)("span",{className:"select-value",children:b.title}),Object(me.jsx)("select",{name:"group",onChange:g,children:t.groups.map((function(e){return Object(me.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(me.jsxs)("div",{className:"select-position",children:[Object(me.jsx)("span",{className:"label",children:"Position"}),Object(me.jsx)("span",{className:"select-value",children:m}),Object(me.jsx)("select",{name:"position",onChange:g,children:function(){for(var e=b.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(me.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(me.jsx)("button",{className:"copy-btn card-edit-btn secondary",onClick:function(){var e=b.id,t=m-1,n=pt.handleCopyCard(r,e,t,i);a({type:""},n),o()},children:"Create card"})]}):null})),gt=r(24),vt=a.a.forwardRef((function(e,t){var r=e.onClose,a=e.title,o=e.children,c=e.isLabel,s=e.handleEdit,i=Object(n.useRef)(),l=Object(n.useState)({width:0,height:0}),d=Object(st.a)(l,2),u=d[0],b=d[1];Object(n.useLayoutEffect)((function(){i.current&&b({width:i.current.offsetWidth,height:i.current.offsetHeight})}),[]),Object(n.useEffect)((function(){var e=function(e){var n,a=i.current;(null===a||void 0===a?void 0:a.contains(e.target))||(null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.contains(e.target))||r()};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[r,t]);return Object(me.jsxs)("div",{ref:function(e){return i.current=e},className:"dynamic-popover",style:Object(h.a)({position:"absolute"},function(){var e,r=null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect();if(r){var n,a,o=window.innerHeight-(r.bottom+u.height)<20,c=r.top-u.height<20,s=window.innerWidth-(r.left+u.width)<100;return o?(c?a="-300%":n=r.height+8,s?{bottom:n,top:a,right:0}:{bottom:n,top:a,left:0}):s?{top:r.height+8,right:0}:{left:0,top:r.height+8}}}()),children:[a?Object(me.jsxs)("div",{className:"popover-header",children:[c&&Object(me.jsx)("span",{className:"back-btn",onClick:s,children:Object(me.jsx)(it.j,{})}),Object(me.jsx)("p",{children:a}),Object(me.jsx)("span",{className:"close-btn",onClick:r,children:Object(me.jsx)(gt.b,{})})]}):Object(me.jsx)("div",{className:"relative",style:{height:16},children:Object(me.jsx)("span",{className:"close-popover-icon",onClick:r,children:Object(me.jsx)(gt.b,{})})}),Object(me.jsx)("div",{className:"popover-content",children:o})]})}));function Ot(e){var t=e.Icon,r=e.title;return Object(me.jsx)("div",{className:"label-container",children:Object(me.jsxs)("button",{className:"sidebar-label card-edit-btn sidebar-btn",style:Object(h.a)({position:"relative"},"Delete"===r?{backgroundColor:"#b04632",color:"#fff"}:{}),children:[Object(me.jsx)("div",{className:"list-item-layover"}),Object(me.jsxs)("div",{className:"btn-label-container flex",children:[Object(me.jsx)(t,{}),Object(me.jsx)("p",{children:r})]})]})})}function xt(e){var t=e.item,r=Object(n.useState)(!1),a=Object(st.a)(r,2),o=a[0],c=a[1],s=Object(n.useRef)(),i=Object(n.useMemo)((function(){return t.component}),[t]);return Object(me.jsx)("div",{className:"label-wrapper",children:Object(me.jsxs)("div",{ref:s,className:"relative ".concat(o?"popover-open":""),children:[Object(me.jsx)("span",{onClick:function(){return c(!o)},children:Object(me.jsx)(Ot,{Icon:t.icon,title:t.title})}),o&&Object(me.jsx)(vt,{onClose:function(){return c(!1)},title:t.title,ref:s,children:Object(me.jsx)(i,{onClose:function(){return c(!1)}})})]})})}var Ct=[{icon:it.d,title:"Move",component:jt},{icon:lt.a,title:"Copy",component:ft},{icon:Oe.d,title:"Watch"}],yt={onUpdateCard:Ye,onUpdateBoard:Qe},kt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),yt)((function(e){var t=e.currCardId,r=(e.board,e.onUpdateCard),a=(e.goBack,e.onUpdateBoard,Object(n.useState)(!1)),o=Object(st.a)(a,2),c=o[0],s=o[1];Object(n.useEffect)((function(){var e=pt.getGroupId(t),r=pt.getCardById(t,e);s(r.isArchive||!1)}),[]);var i=function(){s(!c);var e=pt.handleToggleArchive(t);r.apply(void 0,Object(p.a)(e))};return Object(me.jsx)("div",{style:{position:"relative"},children:Object(me.jsxs)("div",{className:"card-edit-actions",children:[Object(me.jsx)("h3",{className:"sidebar-title",children:"Actions"}),Object(me.jsxs)("div",{className:"actions-container",children:[Ct.map((function(e,t){return Object(me.jsx)(xt,{item:e},e.title+t)})),!c&&Object(me.jsx)("div",{className:"label-wrapper",onClick:i,children:Object(me.jsx)(Ot,{Icon:dt.a,title:"Archive"})}),c&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("div",{className:"label-wrapper",onClick:i,children:Object(me.jsx)(Ot,{Icon:it.c,title:"Send to board"})}),Object(me.jsx)("div",{className:"label-wrapper",children:Object(me.jsx)(Ot,{Icon:Oe.f,title:"Delete"})})]})]})]})})})),wt=r(268);function Nt(e){var t=e.member,r=e.size,n=e.style,a=void 0===n?{}:n;return Object(me.jsx)(wt.a,{name:t.fullname,src:t.imgUrl,size:function(){switch(r){case"sm":return 20;case"lg":return 50;default:return 32}}(),style:a,round:!0})}var It={onUpdateCard:Ye},St=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),It)((function(e){var t=e.member,r=e.currCardId,a=e.onUpdateCard,o=Object(n.useState)(!1),c=Object(st.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var e,n=pt.getGroupId(r),a=null===(e=pt.getCardById(r,n).members)||void 0===e?void 0:e.find((function(e){return e._id===t._id}));i(a)}),[r,t._id]),Object(me.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){i(!s);var e=pt.handleMemberChange(t._id),n=s?{txt:Re(t.fullname),currCardId:r}:{txt:De(t.fullname),currCardId:r};a.apply(void 0,Object(p.a)(e).concat([n]))},children:[Object(me.jsx)("div",{className:"list-item-layover"}),Object(me.jsx)("div",{style:{width:32},children:Object(me.jsx)(Nt,{member:t})}),Object(me.jsx)("div",{className:"popper-member-name",children:Object(me.jsx)("p",{children:t.fullname})}),s&&Object(me.jsx)("div",{className:"popper-member-check",children:Object(me.jsx)(it.g,{})})]})})),At=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board,r=Object(n.useState)(t.members),a=Object(st.a)(r,2),o=a[0],c=a[1];return Object(me.jsxs)("div",{className:"member-list",children:[Object(me.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search...",onChange:function(e){var r=e.target.value,n=t.members.filter((function(e){return e.fullname.toLowerCase().includes(r.toLowerCase())}));c(n)}}),Object(me.jsx)("h4",{children:"Board Members"}),Object(me.jsx)("div",{className:"flex column",children:o.map((function(e){return Object(me.jsx)(St,{member:e},e._id)}))})]})})),Bt=r(253),Mt=r.n(Bt),Ut=(r(370),{onUpdateCard:Ye}),Et=Object(i.b)(null,Ut)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useState)(new Date),o=Object(st.a)(a,1)[0],c=Object(n.useState)(null),s=Object(st.a)(c,1)[0],i=Object(n.useState)(null),l=Object(st.a)(i,2),d=l[0],u=l[1],b=function(){var e=pt.handleDueDateChange(d);t.apply(void 0,Object(p.a)(e)),r()};return Object(me.jsxs)("div",{className:"date-picker",children:[Object(me.jsx)(Mt.a,{selected:o,onChange:function(e){u(e.getTime())},startDate:o,endDate:s,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(me.jsxs)("div",{className:"picker-btns flex column",children:[Object(me.jsx)("button",{className:"card-edit-btn secondary long",onClick:b,children:"Save"}),Object(me.jsx)("button",{className:"card-edit-btn long",onClick:function(){u(null),b()},children:"Remove"})]})]})})),Tt=r(61);var Dt={onUpdateCard:Ye},Rt=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),Dt)((function(e){var t=e.label,r=e.currCardId,a=e.onUpdateCard,o=e.handleEdit,c=Object(n.useState)(!1),s=Object(st.a)(c,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){var e,n=pt.getGroupId(r),a=null===(e=pt.getCardById(r,n).labelIds)||void 0===e?void 0:e.some((function(e){return e===t.id}));l(a)}),[r,t.id]),Object(me.jsx)("div",{className:"label-preview flex",children:Object(me.jsxs)("div",{className:"label-preview flex",children:[Object(me.jsxs)("div",{className:"popper-label ",style:{backgroundColor:t.color},onClick:function(){l(!i);var e=pt.handleLabelChange(t.id),n=pt.getGroupId(r),o=i?{txt:Le(t.title),groupId:n}:{txt:_e(t.title),groupId:n};a.apply(void 0,Object(p.a)(e).concat([o]))},children:[Object(me.jsxs)("span",{children:[" ",t.title||""]}),i&&Object(me.jsx)("div",{className:"popper-label-check",children:Object(me.jsx)(it.g,{})})]}),Object(me.jsx)("div",{className:"icon-wrapper",onClick:function(){return o(t.color)},children:Object(me.jsx)(Tt.a,{})})]})})}));var _t=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board,r=e.handleEdit,a=Object(n.useState)(t.labels),o=Object(st.a)(a,2),c=o[0],s=o[1];return Object(me.jsxs)("div",{className:"label-list-container",children:[Object(me.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search labels...",onChange:function(e){var r=e.target.value,n=t.labels.filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())}));s(n)}}),Object(me.jsx)("h4",{children:"Labels"}),Object(me.jsx)("div",{className:"flex column label-list",children:c.map((function(e){return Object(me.jsx)(Rt,{label:e,handleEdit:r},e.id)}))})]})})),Lt=r(83);var Pt={onUpdateCard:Ye},Ft=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Pt)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useRef)(),o=Object(n.useState)("Checklist"),c=Object(st.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){a.current.focus(),a.current.select()}),[]),Object(me.jsxs)("form",{className:"popover-checklist",onSubmit:function(e){e.preventDefault();var n=pt.handleChecklistChange("addChecklist",null,s),a={txt:Pe(s)};t.apply(void 0,Object(p.a)(n).concat([a])),i(""),r()},children:[Object(me.jsx)("label",{htmlFor:"checklist-title",children:"Title"}),Object(me.jsx)("input",{className:"search-input",ref:a,value:s,onChange:function(e){var t=e.target.value;i(t)}}),Object(me.jsx)("button",{className:"card-edit-btn secondary",children:"Add"})]})}));function Gt(e){var t="https://api.cloudinary.com/v1_1/".concat("dh4cdbmav","/image/upload"),r=new FormData;return r.append("file",e.target.files[0]),console.log("ev.target.files[0]):",e.target.files[0]),r.append("upload_preset","wbls0qti"),fetch(t,{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return e.url})).catch((function(e){return console.error(e)}))}var zt={onUpdateCard:Ye},Wt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),zt)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useState)(""),o=Object(st.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(""),l=Object(st.a)(i,2),d=l[0],u=l[1],b=Object(n.useRef)(),h=function(){var e=Object(g.a)(f.a.mark((function e(n){var a,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0].name,e.next=3,Gt(n);case 3:o=e.sent,c=pt.handleFileAdd(o,a),t.apply(void 0,Object(p.a)(c)),r();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(me.jsxs)("div",{className:"popover-attach-file",children:[Object(me.jsx)("div",{className:"attach-from",children:Object(me.jsxs)("label",{htmlFor:"upload",children:[Object(me.jsx)("span",{"aria-hidden":"true",children:"Computer"}),Object(me.jsx)("input",{type:"file",id:"upload",style:{display:"none"},onChange:h})]})}),Object(me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=pt.handleFileAdd(d,c);t.apply(void 0,Object(p.a)(n)),r()},className:"attach-link",children:[Object(me.jsx)("label",{children:"Attach a link"}),Object(me.jsx)("input",{ref:b,className:"search-input",placeholder:"Paste any link here...",value:d,onChange:function(e){return u(e.target.value)}}),d&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("label",{children:"Link name (optional)"}),Object(me.jsx)("input",{className:"search-input",value:c,onChange:function(e){return s(e.target.value)}})]}),Object(me.jsx)("button",{className:"card-edit-btn",children:"Attach"})]})]})}));var Ht=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.item,r=e.currCardId,a=Object(n.useState)(!1),o=Object(st.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),l=Object(st.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),p=Object(st.a)(b,2),h=p[0],j=p[1],m=Object(n.useRef)(),f=Object(n.useMemo)((function(){return t.component}),[t]),g=Object(n.useMemo)((function(){return t.editComponent}),[t]),v=pt.getGroupId(r),O=pt.getCardById(r,v),x=function(e){d?u(!1):(j(e),u(!0))};return Object(me.jsx)("div",{className:"label-wrapper",children:function(){var e,r;return"Cover"!==t.title||!(null===O||void 0===O||null===(e=O.style)||void 0===e?void 0:e.bgColor)&&!(null===O||void 0===O||null===(r=O.style)||void 0===r?void 0:r.imgUrl)}()&&Object(me.jsxs)("div",{ref:m,className:"relative ".concat(c?"popover-open":""),children:[Object(me.jsx)("span",{onClick:function(){return s(!c)},children:Object(me.jsx)(Ot,{Icon:t.icon,title:t.title})}),c&&Boolean(t.editComponent)&&Object(me.jsx)(vt,{handleEdit:x,onClose:function(){return s(!1)},title:t.title,ref:m,isLabel:d,children:d?Object(me.jsx)(g,{color:h,handleEdit:x,onClose:function(){return s(!1)}}):Object(me.jsx)(f,{handleEdit:x,onClose:function(){return s(!1)}})}),c&&!Boolean(t.editComponent)&&Object(me.jsx)(vt,{onClose:function(){return s(!1)},title:t.title,ref:m,children:Object(me.jsx)(f,{onClose:function(){return s(!1)}})})]})})})),Vt=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currCard:null,groupId:null,selectedEl:null,initialStyle:null},e.handleClick=function(t,r,n){var a;t.target.classList.add("selected"),null===(a=e.state.selectedEl)||void 0===a||a.classList.remove("selected"),e.setState({selectedEl:t.target});var o=e.props,c=o.board,s=(o.currCardId,o.onUpdateCard),i=e.state,l=i.currCard,d=i.groupId;l.style="color"===n?{bgColor:r}:{imgUrl:r},s(l,d,c)},e.handleCoverRemove=function(){var t=e.props,r=t.board,n=(t.currCardId,t.onUpdateCard),a=e.state,o=a.currCard,c=a.groupId;o.style=null,n(o,c,r)},e.handleInitialSelect=function(){},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.currCardId;console.log(e);var t=pt.getGroupId(e),r=pt.getCardById(e,t);console.log(r),this.setState({currCard:r,groupId:t})}},{key:"render",value:function(){var e=this,t=this.state.currCard;if(!t)return"";return Object(me.jsxs)("section",{className:"modal-cover-edit flex column",children:[Object(me.jsxs)("div",{className:"size-container flex column",children:[Object(me.jsx)("h4",{children:"Size"}),Object(me.jsxs)("div",{className:"size-options flex",children:[Object(me.jsx)("div",{className:"size-option"}),Object(me.jsx)("div",{className:"size-option"})]}),Object(me.jsx)("button",{className:"card-edit-btn",onClick:this.handleCoverRemove,children:"Remove cover"})]}),Object(me.jsxs)("div",{className:"flex column",children:[Object(me.jsx)("h4",{children:"Colors"}),Object(me.jsx)("div",{className:"color-container flex",children:["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#517dab","#29cce5","#6deca9","#ff8ed4","#172b4d"].map((function(t,r){return Object(me.jsx)("div",{className:"cover-color-option",style:{backgroundColor:t},onClick:function(r){return e.handleClick(r,t,"color")}},r)}))})]}),t.attachments&&Boolean(t.attachments.length)&&Object(me.jsxs)("div",{className:"flex column",children:[Object(me.jsx)("h4",{children:"Attachments"}),Object(me.jsx)("div",{className:"attachments-container flex",children:t.attachments.map((function(t){return Object(me.jsx)("div",{className:"cover-image-option",style:{backgroundImage:"url(".concat(t.url,")")},onClick:function(r){return e.handleClick(r,t.url,"img")}},t.id)}))})]})]})}}]),r}(n.Component),Jt={onUpdateCard:Ye},qt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Jt)(Vt),Qt=r(35);var Xt=["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#517dab","#29cce5","#6deca9","#ff8ed4","#172b4d"],Yt={onUpdateCard:Ye,onUpdateBoard:Qe},Kt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Yt)((function(e){var t=e.color,r=e.board,a=e.onUpdateBoard,o=e.onClose,c=e.handleEdit,s=e.onUpdateCard,i=Object(n.useState)(null),l=Object(st.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),j=Object(st.a)(b,2),m=j[0],f=j[1],g=Object(n.useRef)();Object(n.useEffect)((function(){var e;u(t);var n=r.labels.find((function(e){return e.color===t}));f((null===n||void 0===n?void 0:n.title)||""),null===(e=g.current)||void 0===e||e.select()}),[]);var v=function(e){u(e.target.dataset.color);var t=r.labels.find((function(t){return t.color===e.target.dataset.color}));f((null===t||void 0===t?void 0:t.title)||"")};return Object(me.jsxs)("div",{className:"label-edit",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)("label",{children:"Name"}),Object(me.jsx)("input",{ref:g,className:"search-input",onChange:function(e){var t=e.target.value;f(t)},value:m})]}),Object(me.jsxs)("div",{children:[Object(me.jsx)("label",{children:"Select a color"}),Object(me.jsx)("div",{className:"color-container flex",children:Xt.map((function(e,t){return Object(me.jsx)("div",{"data-color":e,className:"label-color-option",style:{backgroundColor:e},onClick:v,children:e===d&&Object(me.jsx)("span",{children:Object(me.jsx)(Oe.c,{})})},t)}))})]}),Object(me.jsxs)("div",{className:"btns-container",children:[Object(me.jsx)("button",{className:"card-edit-btn save-btn",onClick:function(){var e=Object(h.a)({},r),t=e.labels.find((function(e){return e.color===d}));t?t.title=m:(t={id:P.makeId(),color:d,title:m},e.labels.push(t)),a({type:""},e),c(),o();var n=pt.handleLabelChange(t.id);s.apply(void 0,Object(p.a)(n))},children:"Save"}),Object(me.jsx)("button",{className:"card-edit-btn delete-btn",children:"Delete"})]})]})})),Zt=function(){return Object(me.jsx)("div",{style:{position:"relative"},children:Object(me.jsxs)("div",{className:"add-to-card",children:[Object(me.jsx)("h3",{className:"sidebar-title",children:"Add to card"}),Object(me.jsx)("div",{className:"add-to-card-container",children:$t.map((function(e,t){return Object(me.jsx)(Ht,{item:e},e.title+t)}))})]})})},$t=[{icon:Tt.c,title:"Members",component:At},{icon:lt.c,title:"Labels",component:_t,editComponent:Kt},{icon:it.e,title:"Checklist",component:Ft},{icon:it.k,title:"Dates",component:Et},{icon:Lt.b,title:"Attachment",component:Wt},{icon:Qt.a,title:"Cover",component:qt}],er=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){return Object(re.a)(this,r),t.apply(this,arguments)}return Object(ne.a)(r,[{key:"render",value:function(){return Object(me.jsxs)("div",{className:"sidebar",children:[Object(me.jsx)(Zt,{}),Object(me.jsx)(kt,{goBack:this.props.goBack})]})}}]),r}(n.Component),tr={onUpdateCard:Ye},rr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),tr)((function(e){var t=e.currCardId,r=e.onUpdateCard,a=e.board,o=Object(n.useState)(!1),c=Object(st.a)(o,2),s=c[0],i=c[1],l=Object(n.useRef)(),d=pt.getGroupId(t),u=pt.getCardById(t,d),b=null===u||void 0===u?void 0:u.dueDate,p=pt.getFormattedTime(b),h=function(){return u.isComplete?{title:"Complete",bgColor:"#61bd4f"}:b-Date.now()<0?{title:"Overdue",bgColor:"#eb5a46"}:b-Date.now()<=864e5?{title:"Due soon",bgColor:"#f2d600"}:{title:"",bgColor:""}};return Object(me.jsx)(me.Fragment,{children:b&&Object(me.jsxs)("div",{className:"due-date-container",children:[Object(me.jsx)("h3",{className:"small-title",children:"Due date"}),Object(me.jsxs)("div",{className:"due-date",children:[Object(me.jsx)("input",{type:"checkbox",className:"main-checkbox",checked:u.isComplete,onChange:function(){u.isComplete=!u.isComplete,r(u,d,a)}}),Object(me.jsxs)("div",{className:"card-edit-btn",ref:l,children:[Object(me.jsx)("span",{className:"due-date-time",children:p}),Object(me.jsx)("span",{style:{backgroundColor:h().bgColor,textTransform:"uppercase",fontSize:12,padding:"0 3px",borderRadius:2},children:h().title}),Object(me.jsx)("span",{className:"due-date-icon",children:Object(me.jsx)(it.i,{})}),Object(me.jsx)("div",{className:"list-item-layover",onClick:function(){return i(!s)}}),s&&Object(me.jsx)(vt,{onClose:function(){return i(!1)},title:"Dates",ref:l,children:Object(me.jsx)(Et,{onClose:function(){return i(!1)}})})]})]})]})})})),nr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.currCardId,r=e.board,a=Object(n.useState)(!1),o=Object(st.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),l=Object(st.a)(i,2),d=l[0],u=l[1],b=Object(n.useState)(""),p=Object(st.a)(b,2),h=p[0],j=p[1],m=Object(n.useRef)(),f=pt.getGroupId(t),g=pt.getCardById(t,f).labelIds,v=function(e){return null===e||void 0===e?void 0:e.map((function(e){return r.labels.find((function(t){return t.id===e}))}))}(g),O=function(e){d?u(!1):(j(e),u(!0))};return Object(me.jsx)(me.Fragment,{children:(null===g||void 0===g?void 0:g.length)?Object(me.jsxs)("div",{className:"labels-container",children:[Object(me.jsx)("h3",{className:"small-title",children:"Labels"}),Object(me.jsxs)("div",{className:"labels",children:[v.map((function(e){return Object(me.jsx)("div",{className:"card-label",style:{backgroundColor:e.color},children:e.title||""},e.id)})),Object(me.jsxs)("div",{ref:m,className:"card-label add-label relative",children:[Object(me.jsx)("div",{className:"list-item-layover",onClick:function(){return s(!c)}}),Object(me.jsx)(Oe.g,{}),c&&Object(me.jsx)(vt,{handleEdit:O,onClose:function(){return s(!1)},title:"Labels",ref:m,isLabel:d,children:d?Object(me.jsx)(Kt,{handleEdit:O,color:h,onClose:function(){return s(!1)}}):Object(me.jsx)(_t,{handleEdit:O,onClose:function(){return s(!1)}})})]})]})]}):null})})),ar={onUpdateCard:Ye},or=Object(i.b)(null,ar)((function(e){var t=e.member,r=e.onUpdateCard;return Object(me.jsxs)("div",{className:"mini-user flex column",children:[Object(me.jsxs)("div",{className:"main flex",children:[Object(me.jsx)(Nt,{size:"lg",member:t}),Object(me.jsxs)("div",{children:[Object(me.jsx)("h3",{className:"mini-user-fullname",children:t.fullname}),Object(me.jsx)("p",{children:t.username})]})]}),Object(me.jsx)("p",{className:"remove-member",onClick:function(){var e=pt.handleMemberChange(t._id);r.apply(void 0,Object(p.a)(e))},children:"Remove from card"})]})}));function cr(e){var t=e.member,r=Object(n.useState)(!1),a=Object(st.a)(r,2),o=a[0],c=a[1],s=Object(n.useRef)();return Object(me.jsxs)("div",{className:"card-member relative",ref:s,children:[Object(me.jsxs)("span",{style:{cursor:"pointer"},children:[Object(me.jsx)("div",{className:"list-item-layover round",onClick:function(){return c(!o)}}),Object(me.jsx)(Nt,{member:t})]}),o&&Object(me.jsx)(vt,{onClose:function(){return c(!1)},title:null,ref:s,children:Object(me.jsx)(or,{member:t})})]},t._id)}var sr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t,r,a=e.currCardId,o=Object(n.useState)(!1),c=Object(st.a)(o,2),s=c[0],i=c[1],l=Object(n.useRef)(),d=pt.getGroupId(a);return r=pt.getCardById(a,d).members,Object(me.jsx)(me.Fragment,{children:(null===(t=r)||void 0===t?void 0:t.length)?Object(me.jsxs)("div",{className:"members-container",children:[Object(me.jsx)("h3",{className:"small-title",children:"Members"}),Object(me.jsxs)("div",{className:"members",children:[r.map((function(e){return Object(me.jsx)(cr,{member:e},e._id)})),Object(me.jsxs)("div",{ref:l,className:"card-member add-member relative",children:[Object(me.jsx)("div",{className:"list-item-layover round",onClick:function(){return i(!s)}}),Object(me.jsx)(Oe.g,{}),s&&Object(me.jsx)(vt,{onClose:function(){return i(!1)},title:"Members",ref:l,children:Object(me.jsx)(At,{})})]})]})]}):null})})),ir=function(){return Object(me.jsxs)("div",{className:"members-labels-container",children:[Object(me.jsx)(sr,{}),Object(me.jsx)(nr,{}),Object(me.jsx)(rr,{})]})};function lr(e){var t=e.bgColor,r=e.completed,n={height:"100%",width:"".concat(r,"%"),backgroundColor:t,borderRadius:"inherit",textAlign:"right",transition:"width .5s ease-in-out"};return Object(me.jsx)("div",{className:"outer-container",style:{height:8,width:"100%",backgroundColor:"#e0e0de",borderRadius:50,margin:"10px 0 10px 0px"},children:Object(me.jsx)("div",{style:n})})}var dr=r(256),ur=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={todoTitle:"",isEditTodo:!1},e.todoTextareaRef=a.a.createRef(),e.saveTodoBtnRef=a.a.createRef(),e.handleClick=function(t){var r,n,a,o,c,s;(null===(r=e.todoTextareaRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.saveTodoBtnRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.contains(t.target))||(null===(c=e.newTodoTextarea)||void 0===c||null===(s=c.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isEditTodo:!1,todoTitle:""})},e.handleMarkTodo=function(){var t,r=pt.handleChecklistChange("markTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleRemoveTodo=function(){var t,r=pt.handleChecklistChange("removeTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleTitleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(ct.a)({},n,a))},e.onChangeTitle=function(t){t.preventDefault();var r=e.props,n=r.checklistId,a=r.todo,o=r.onUpdateCard,c=e.state.todoTitle,s=pt.handleChecklistChange("changeTitle",n,a.id,c);o.apply(void 0,Object(p.a)(s)),e.setState({isEditTodo:!1,todoTitle:""})},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.todo,r=this.state,n=r.isEditTodo,a=r.todoTitle;return Object(me.jsxs)("div",{className:"flex align-center todo-item",children:[Object(me.jsx)("input",{className:"main-checkbox",type:"checkbox",name:t.id,checked:t.isDone,onChange:this.handleMarkTodo,onClick:function(){return e.setState({todoTitle:t.title})},style:{alignSelf:n?"flex-start":"center"}}),n?Object(me.jsxs)("form",{onSubmit:this.onChangeTitle,style:{paddingBottom:9},children:[Object(me.jsx)("textarea",{className:"description-textarea edit-todo",onFocus:function(){return e.setState({todoTitle:t.title})},autoFocus:!0,name:"todoTitle",value:a,ref:this.todoTextareaRef,onChange:this.handleTitleChange}),Object(me.jsxs)("div",{className:"description-btns",children:[Object(me.jsx)("button",{ref:this.saveTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(me.jsx)("button",{onClick:function(){return e.setState({isEditTodo:!1,todoTitle:""})},children:Object(me.jsx)(gt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(me.jsxs)("div",{children:[Object(me.jsx)("span",{className:t.isDone?"done":"",onClick:function(){return e.setState({isEditTodo:!0})},children:t.title}),Object(me.jsx)("span",{className:"remove-todo-icon",onClick:this.handleRemoveTodo,children:Object(me.jsx)(dr.a,{})})]})]})}}]),r}(n.Component),br={onUpdateCard:Ye},pr=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),br)(ur),hr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={percentage:0,isAddTodo:!1,newTodo:""},e.saveTodoBtnRef=a.a.createRef(),e.addTodoBtnRef=a.a.createRef(),e.newTodoTextarea=a.a.createRef(),e.handleClick=function(t){var r,n,a,o,c,s;(null===(r=e.saveTodoBtnRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.addTodoBtnRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.contains(t.target))||(null===(c=e.newTodoTextarea)||void 0===c||null===(s=c.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isAddTodo:!1,newTodo:""})},e.setTodoPercentage=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.checklist.todos;if((null===r||void 0===r?void 0:r.length)||(null===(t=e.props.checklist)||void 0===t?void 0:t.todos.length)){var n=r.filter((function(e){return e.isDone})),a=n.length/r.length*100,o=Number.isInteger(a)?a:a.toFixed(0);e.setState({percentage:o})}else e.setState({percentage:0})},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(ct.a)({},n,a))},e.onAddTodo=function(t){var r;t.preventDefault(),e.setState({isAddTodo:!1,newTodo:""});var n=pt.handleChecklistChange("addTodo",e.props.checklist.id,{id:P.makeId(),title:t.target[0].value,isDone:!1});(r=e.props).onUpdateCard.apply(r,Object(p.a)(n))},e.onRemoveChecklist=function(){var t,r=pt.handleChecklistChange("removeChecklist",e.props.checklist.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick),this.props.checklist.todos&&this.setTodoPercentage()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.setTodoPercentage()}},{key:"render",value:function(){var e,t=this,r=this.props.checklist,n=this.state,a=n.percentage,o=n.isAddTodo;return Object(me.jsxs)("section",{className:"checklist-preview flex column",children:[Object(me.jsxs)("section",{className:"flex space-between",children:[Object(me.jsxs)("div",{className:"card-edit-title",children:[Object(me.jsx)("span",{children:Object(me.jsx)(it.e,{})}),Object(me.jsx)("h3",{children:r.title})]}),Object(me.jsx)("button",{className:"card-edit-btn",onClick:this.onRemoveChecklist,children:"Delete"})]}),Object(me.jsxs)("div",{className:"flex align-center",children:[Object(me.jsxs)("span",{style:{fontSize:11,width:32,maxWidth:32,minWidth:32},children:[a,"%"]}),Object(me.jsx)(lr,{completed:a,bgColor:100===a?"#61bd4f":"#5ba4cf"})]}),null===(e=r.todos)||void 0===e?void 0:e.map((function(e){return Object(me.jsx)("div",{className:"todos-container",children:Object(me.jsx)(pr,{todo:e,checklistId:r.id})},e.id)})),o?Object(me.jsxs)("form",{onSubmit:this.onAddTodo,children:[Object(me.jsx)("textarea",{rows:"2",className:"description-textarea add-todo",ref:this.newTodoTextarea,autoFocus:!0,name:"newTodo",placeholder:"Add an item",onChange:this.handleInputChange}),Object(me.jsxs)("div",{className:"description-btns add-todo-btns",children:[Object(me.jsx)("button",{ref:this.addTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(me.jsx)("button",{onClick:function(){return t.setState({isAddTodo:!1,newTodo:""})},children:Object(me.jsx)(gt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(me.jsx)("button",{className:"card-edit-btn add-todo-btn",style:{alignSelf:"flex-start"},onClick:function(){return t.setState({isAddTodo:!0})},children:"Add an item"})]})}}]),r}(n.Component),jr={onUpdateCard:Ye},mr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),jr)(hr),fr=r(257),gr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={currCard:{},isDescriptionOpen:!1},e.descriptionRef=a.a.createRef(),e.setDescriptionTextarea=function(){e.setState({isDescriptionOpen:!e.state.isDescriptionOpen})},e.handleDescriptionChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=pt.getGroupId(e.props.currCardId),a={txt:Ee(),card:t,groupId:n};e.props.onUpdateCard(t,n,r,a)},e.handleInputChange=function(t){var r=t.target.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},{description:r})})},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=pt.getGroupId(this.props.currCardId),t=pt.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.currCard,n=t.isDescriptionOpen;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("div",{className:"description-container card-edit-title",children:[Object(me.jsx)("span",{children:Object(me.jsx)(gt.c,{})}),Object(me.jsx)("h3",{children:"Description"}),r.description&&!n&&Object(me.jsx)("button",{className:"card-edit-btn",onClick:function(){e.setDescriptionTextarea(),e.descriptionRef.current.focus()},children:" Edit"})]}),Object(me.jsxs)("div",{className:"card-description",children:[Object(me.jsx)("textarea",{ref:this.descriptionRef,className:"description-textarea ".concat(n?"open":""," ").concat(r.description?"filled":""),rows:n?"6":"3",onFocus:this.setDescriptionTextarea,onBlur:function(){e.setDescriptionTextarea(),e.handleDescriptionChange()},value:r.description,onChange:this.handleInputChange,placeholder:"Add a more detailed description..."}),n&&Object(me.jsxs)("div",{className:"description-btns",children:[Object(me.jsx)("button",{className:"card-edit-btn secondary",onClick:function(){return e.handleDescriptionChange()},children:"Save"}),Object(me.jsx)("button",{onClick:this.setDescriptionTextarea,children:Object(me.jsx)(gt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})]})}}]),r}(n.Component),vr={onUpdateCard:Ye},Or=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),vr)(gr);var xr={onUpdateCard:Ye},Cr=Object(i.b)((function(e){return{user:e.userModule.user}}),xr)((function(e){var t=e.comment,r=e.user,n=e.onUpdateCard,a=pt.getCommentTime(t.addedAt);return Object(me.jsxs)("div",{className:"comment-preview flex",children:[Object(me.jsx)(Nt,{member:t.author}),Object(me.jsxs)("div",{className:"flex column comment-info",children:[Object(me.jsxs)("div",{className:"comment-data flex",children:[Object(me.jsx)("span",{className:"author-name",children:t.author.fullname}),Object(me.jsx)("span",{className:"comment-time",children:a})]}),Object(me.jsx)("div",{className:"comment-txt",children:t.txt}),t.author._id===r._id&&Object(me.jsx)("span",{className:"remove-btn",onClick:function(){var e=pt.handleCommentRemove(t.id);n.apply(void 0,Object(p.a)(e))},children:"Delete"})]})]})})),yr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isFocus:!1,isTxt:!1,commentTxt:"",currCard:null},e.commentRef=a.a.createRef(),e.handleChange=function(t){var r=t.target.value;e.setState({commentTxt:r}),r?e.setState({isTxt:!0}):e.setState({isTxt:!1})},e.handleClick=function(t){var r,n;(null===(r=e.commentRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||e.setState({isFocus:!1})},e.handleSubmit=function(t){t.stopPropagation();var r=e.state,n=r.isTxt,a=r.commentTxt,o=e.props.onUpdateCard;if(n){var c=pt.onAddComment(a);o.apply(void 0,Object(p.a)(c)),e.setState({isFocus:!1,commentTxt:""})}},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick);var e=pt.getGroupId(this.props.currCardId),t=pt.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.currCard,a=r.isFocus,o=r.isTxt,c=r.commentTxt,s=this.props.member;return n?Object(me.jsxs)("div",{className:"comments-section",children:[Object(me.jsxs)("section",{className:"flex space-between",children:[Object(me.jsxs)("div",{className:"card-edit-title",children:[Object(me.jsx)("span",{children:Object(me.jsx)(lt.b,{})}),Object(me.jsx)("h3",{children:"Activity"})]}),Object(me.jsx)("button",{className:"card-edit-btn",children:"Show details"})]}),Object(me.jsxs)("div",{className:"add-comment-container flex",children:[Object(me.jsx)(Nt,{member:s}),Object(me.jsxs)("div",{className:"new-comment",ref:this.commentRef,style:{width:"100%",height:a?84:36,backgroundColor:"#fff"},onClick:function(){return t.setState({isFocus:!0})},children:[Object(me.jsx)("textarea",{placeholder:"Write a comment...",style:{width:"100%",height:a?"50%":"100%"},onChange:this.handleChange,value:c}),a&&Object(me.jsx)("button",{className:"save-comment-btn card-edit-btn ".concat(o?"active":""),onClick:this.handleSubmit,children:"Save"})]})]}),(null===(e=n.comments)||void 0===e?void 0:e.length)>0&&Object(me.jsx)("div",{className:"comments-container flex column",children:n.comments.map((function(e){return Object(me.jsx)(Cr,{comment:e},e.id)}))})]}):Object(me.jsx)(tt,{})}}]),r}(n.Component),kr={onUpdateCard:Ye},wr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),kr)(yr);var Nr={onUpdateCard:Ye},Ir=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Nr)((function(e){var t=e.attachment,r=e.currCardId,n=e.board,a=e.onUpdateCard,o=pt.getGroupId(r),c=pt.getCardById(r,o),s=pt.getUploadTime(t.addedAt);return Object(me.jsxs)("div",{className:"attachment-preview flex",children:[Object(me.jsx)("a",{href:t.url,target:"_blank",children:Object(me.jsx)("div",{className:"image-container",children:Object(me.jsx)("img",{src:t.url,alt:t.title})})}),Object(me.jsxs)("div",{className:"right-section flex column",children:[Object(me.jsx)("span",{className:"attachment-title",children:t.title}),Object(me.jsxs)("div",{className:"middle-line",children:[Object(me.jsx)("span",{children:s}),"-",Object(me.jsx)("span",{children:"Comment"}),"-",Object(me.jsx)("span",{onClick:function(){var e=pt.handleFileRemove(t.id);a.apply(void 0,Object(p.a)(e))},children:"Delete"}),"-",Object(me.jsx)("span",{children:"Edit"})]}),Object(me.jsxs)("div",{className:"attachment-cover",children:[Object(me.jsx)("span",{children:Object(me.jsx)(Qt.a,{})}),Object(me.jsx)("span",{onClick:function(){var e;(null===c||void 0===c||null===(e=c.style)||void 0===e?void 0:e.imgUrl)===t.url?c.style=null:c.style={imgUrl:t.url},a(c,o,n)},children:function(){var e;return(null===c||void 0===c||null===(e=c.style)||void 0===e?void 0:e.imgUrl)===t.url}()?"Remove cover":"Make cover"})]})]})]})})),Sr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currCard:{}},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=pt.getGroupId(this.props.currCardId),t=pt.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e,t=this.state.currCard;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("div",{className:"attachment-container card-edit-title",children:[Object(me.jsx)("span",{children:Object(me.jsx)(Lt.b,{})}),Object(me.jsx)("h3",{children:"Attachments"})]}),Object(me.jsx)("div",{className:"card-attachments",children:null===t||void 0===t||null===(e=t.attachments)||void 0===e?void 0:e.map((function(e,t){return Object(me.jsx)(Ir,{attachment:e},e.title+t)}))})]})}}]),r}(n.Component),Ar={onUpdateCard:Ye},Br=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Ar)(Sr),Mr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={currCard:null,currGroup:null,isOpen:!1},e.modalRef=a.a.createRef(),e.coverRef=a.a.createRef(),e.handleLoad=function(){var t,r,n=e.props.match.params,a=n.cardId,o=n.groupId;e.props.onSetCardId(a),e.props.board.groups&&(t=e.getDataById(a,o).currentCard,r=e.getDataById(a,o).currentGroup),e.setState({currCard:t,currGroup:r})},e.handleClick=function(t){var r,n,a=e.props.board;(null===(r=e.modalRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||e.props.history.push("/board/".concat(a._id))},e.getDataById=function(t,r){var n=e.props.board.groups.find((function(e){return e.id===r})),a=n.cards.find((function(e){return e.id===t}));return{currentGroup:n,currentCard:a}},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},Object(ct.a)({},n,a))})},e.handlePropertyChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=e.props.match.params.groupId;e.props.onUpdateCard(t,n,r)},e.checkCardBackground=function(){var t=e.state.currCard;if(t.style)return t.style.bgColor?{backgroundColor:t.style.bgColor,minHeight:116,height:116}:t.style.imgUrl?{background:"center / contain no-repeat url(".concat(t.style.imgUrl,")"),objectFit:"cover",minHeight:160,height:160}:void 0},e.goBack=function(){e.props.history.goBack()},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick),this.handleLoad()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"componentDidUpdate",value:function(e,t){e.board!==this.props.board&&this.handleLoad()}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.currCard,a=r.currGroup,o=this.props.board;if(!n)return Object(me.jsx)(tt,{});var c=this.checkCardBackground();return Object(me.jsx)("div",{className:"edit-modal-container",children:Object(me.jsxs)("section",{className:"card-edit",ref:this.modalRef,children:[n.style&&Object(me.jsx)("div",{className:"card-edit-bg",style:c}),Object(me.jsx)(s.b,{to:"/board/".concat(o._id),children:Object(me.jsx)("button",{className:"close-modal-btn",children:Object(me.jsx)(gt.b,{})})}),n.style&&Object(me.jsxs)("div",{ref:this.coverRef,className:"btn-wrapper relative",children:[Object(me.jsxs)("button",{className:"change-cover-btn",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},children:[Object(me.jsx)("span",{className:"cover-icon",children:Object(me.jsx)(fr.a,{})}),Object(me.jsx)("span",{children:"Cover"})]}),this.state.isOpen&&Object(me.jsx)(vt,{onClose:function(){return t.setState({isOpen:!1})},title:"Cover",ref:this.coverRef,children:Object(me.jsx)(qt,{onClose:function(){return t.setState({isOpen:!1})}})})]}),n.isArchive&&Object(me.jsxs)("div",{className:"archive-msg",children:[Object(me.jsx)("span",{children:Object(me.jsx)(it.a,{})}),Object(me.jsx)("p",{children:"This card is archived"})]}),Object(me.jsxs)("div",{className:"card-edit-header card-title-container",children:[Object(me.jsx)("span",{children:Object(me.jsx)(Qt.a,{})}),Object(me.jsx)("input",{className:"title-input",type:"text",value:n.title,name:"title",onChange:this.handleInputChange,onBlur:function(){return t.handlePropertyChange()}})]}),Object(me.jsx)("div",{className:"list-name-container",children:Object(me.jsxs)("p",{children:["in list ",Object(me.jsx)("span",{className:"list-name",children:a.title})]})}),Object(me.jsxs)("div",{className:"card-edit-main-container flex",children:[Object(me.jsxs)("div",{className:"card-edit-main",children:[Object(me.jsx)(ir,{}),Object(me.jsx)(Or,{}),n.attachments&&n.attachments.length>0&&Object(me.jsx)(Br,{}),null===(e=n.checklists)||void 0===e?void 0:e.map((function(e){return Object(me.jsx)("div",{className:"checklists-container flex column",children:Object(me.jsx)(mr,{checklist:e,currCard:n,handlePropertyChange:t.handlePropertyChange})},e.id)})),Object(me.jsx)(wr,{member:this.props.user})]}),Object(me.jsx)(er,{goBack:this.goBack})]})]})})}}]),r}(n.Component),Ur={onUpdateCard:Ye,onSetCardId:Ke},Er=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user}}),Ur)(Mr),Tr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={newItem:{title:""}},e.handleChange=function(t){var r=t.target,n=e.state.newItem;n[r.name]=r.value,e.setState({newItem:n})},e.onKeyUpEnter=function(t){"Enter"===t.key&&e.onAddItem(t)},e.onAddItem=function(t){t.preventDefault();var r=e.state.newItem;if(r.title){if(r.id=P.makeId(),"group"===e.props.type){r.cards||(r.cards=[]);var n={txt:ye(r.title)},a={type:"ADD_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)}else if("card"===e.props.type){var o=Object(h.a)(Object(h.a)({},r),{},{isComplete:!1}),c={txt:ke(o.title),card:o,groupId:e.props.groupId};e.props.onAddCard(o,e.props.groupId,e.props.board,c)}e.setState({newItem:{title:""}})}},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.textInput.focus();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.newItem.title,r=this.props.onToggleAddPop,n="card"===this.props.type?this.props.type:"list";return Object(me.jsx)("section",{className:"add-board-item",children:Object(me.jsxs)("form",{onSubmit:this.onAddItem,onKeyUp:this.onKeyUpEnter,children:[Object(me.jsx)("textarea",{placeholder:"Enter a title for this ".concat(n),ref:function(t){e.textInput=t},value:t,name:"title",onChange:this.handleChange,onBlur:this.onAddItem}),Object(me.jsxs)("div",{className:"form-btns flex align-center",children:[Object(me.jsxs)("button",{type:"submit",children:["Add ",n]}),Object(me.jsx)("button",{onClick:r,children:Object(me.jsx)(gt.b,{className:"icon",style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})})}}]),r}(a.a.Component);var Dr={onUpdateBoard:Qe,onUpdateCard:Ye,onAddCard:function(e,t,r,n){var a=r.groups.find((function(e){return e.id===t}));return e=Object(h.a)(Object(h.a)({},e),{},{createdAt:Date.now(),isComplete:!1}),a.cards=a.cards?[].concat(Object(p.a)(a.cards),[e]):[e],Qe({type:"UPDATE_GROUP",group:a},r,n)}},Rr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Dr)(Tr);function _r(e){var t=e.cardStyle;return Object(me.jsxs)("div",{className:"card-preview-header",children:[t.bgColor&&Object(me.jsx)("div",{className:"header-color",style:{backgroundColor:t.bgColor}}),t.imgUrl&&Object(me.jsx)("div",{className:"image-wrapper",children:Object(me.jsx)("img",{src:t.imgUrl})})]})}function Lr(e){var t=e.labelIds,r=e.getLabel,n=e.isCardLabelListOpen;return Object(me.jsx)("ul",{className:"label-bar-list flex clean-list ".concat(n?"open":"close"),children:t.map((function(e){var t=r(e);return Object(me.jsx)("li",{className:"label-bar",style:{backgroundColor:t.color},children:n&&t.title&&Object(me.jsx)("span",{children:t.title})},t.id)}))})}var Pr=r(38),Fr=r(258);function Gr(e){var t=e.checklists;return Object(me.jsxs)("div",{className:"checklist-box flex align-center",children:[Object(me.jsx)(it.h,{}),Object(me.jsx)("span",{children:function(){var e=0,r=0;return t.forEach((function(t){t.todos.forEach((function(t){e++,t.isDone&&r++}))})),r+"/"+e}()})]})}function zr(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(me.jsxs)("div",{className:"due-date-box flex align-center",style:function(e){return e.isComplete?{backgroundColor:"#61BD4F"}:e.dueDate-Date.now()>0&&e.dueDate-Date.now()<864e5?{backgroundColor:"#F2D600"}:e.dueDate-Date.now()<0?{backgroundColor:"#EB5A46"}:{backgroundColor:"inherit",color:"unset"}}(t),onClick:function(e){return n(e,r,t)},children:[Object(me.jsx)("span",{className:"clock-icon flex align-center",children:Object(me.jsx)(Lt.a,{})}),Object(me.jsx)("span",{className:"check-icon",children:t.isComplete?Object(me.jsx)(Pr.b,{color:"inherit"}):Object(me.jsx)(Pr.a,{})}),Object(me.jsx)("span",{children:function(e){var t=new Date(e),r=t.getDate();return t.toLocaleString("en",{month:"short"})+" "+r}(t.dueDate)})]})}function Wr(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(me.jsxs)("div",{className:"card-preview-footer flex align-center",children:[t.dueDate&&Object(me.jsx)(zr,{card:t,groupId:r,toggleCardComplete:n}),t.description&&Object(me.jsx)(Pr.d,{title:"This card has a description"}),t.attachments&&t.attachments.length>0&&Object(me.jsxs)("div",{className:"attachment-box flex align-center",children:[Object(me.jsx)("span",{className:"flex align-center",children:Object(me.jsx)(Fr.a,{})}),Object(me.jsx)("span",{children:t.attachments.length})]}),t.checklists&&Object(me.jsx)(Gr,{checklists:t.checklists}),t.isArchive&&Object(me.jsx)("span",{children:"Archived"}),t.members&&Object(me.jsx)("div",{className:"card-members-list flex",children:t.members.map((function(e,t){return Object(me.jsx)(Nt,{member:e,size:"md"},t)}))})]})}var Hr=r(69);function Vr(e){var t=e.card,r=e.groupId,n=e.onToggleQuickCardEditor,a=(e.openCardEdit,e.toggleCardComplete),o=e.getLabel,c=e.toggleCardLabelList,s=e.isCardLabelListOpen;return Object(me.jsxs)("div",{className:"card-preview flex space-between",children:[!t.isArchive&&Object(me.jsx)("button",{className:"hover-edit-btn",onClick:function(e){return n(e,t,r)},children:Object(me.jsx)(Hr.b,{})}),t.style&&Object(me.jsx)(_r,{cardStyle:t.style}),Object(me.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(me.jsx)("div",{onClick:c,children:Object(me.jsx)(Lr,{labelIds:t.labelIds,getLabel:o,isCardLabelListOpen:s})}),Object(me.jsx)("p",{children:t.title}),Object(me.jsx)(Wr,{card:t,groupId:r,toggleCardComplete:a})]})]})}var Jr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.card,r=e.groupId,n=e.openCardEdit,a=e.isCardLabelListOpen,o=e.toggleCardLabelList,c=e.toggleCardComplete,s=e.onToggleQuickCardEditor,i=e.index,l=e.getLabel;return Object(me.jsx)("div",{className:"card-wrapper",onClick:function(){return n(r,t.id)},children:Object(me.jsx)(ot.b,{draggableId:t.id,index:i,children:function(e){return Object(me.jsx)("li",Object(h.a)(Object(h.a)(Object(h.a)({ref:e.innerRef},e.dragHandleProps),e.draggableProps),{},{children:Object(me.jsx)(Vr,{card:t,groupId:r,openCardEdit:n,isCardLabelListOpen:a,toggleCardLabelList:o,toggleCardComplete:c,onToggleQuickCardEditor:s,getLabel:l})}))}})})}));function qr(e){var t=e.groupId,r=e.onToggleAddPop,n=e.toggleGroupArchive;return Object(me.jsxs)("div",{className:"group-actions flex column",children:[Object(me.jsx)("button",{onClick:r,children:"Add card..."}),Object(me.jsx)("button",{onClick:function(){return n(t)},children:"Archive this list..."})]})}var Qr=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isAddPopOpen:!1,groupTitle:"",isPopoverOpen:!1},e.groupEditRef=a.a.createRef(),e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(ct.a)({},n,a))}))},e.onChangeGroupTitle=function(){var t=e.props.group;t.title=e.state.groupTitle;var r={type:"UPDATE_GROUP",group:t},n={txt:Te(t.title)};e.props.updateBoard(r,n)},e.blurFocus=function(e){e.target.blur()},e.setFocus=function(e){e.target.focus()},e.handleFocus=function(e){e.target.select()},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"componentDidUpdate",value:function(e){e.group!==this.props.group&&this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.group,n=t.openCardEdit,a=t.toggleCardLabelList,o=t.isCardLabelListOpen,c=t.index,s=t.toggleCardComplete,i=t.toggleGroupArchive,l=t.onToggleQuickCardEditor,d=t.getLabel,u=this.state,b=u.isAddPopOpen,p=u.groupTitle,j=u.isPopoverOpen;return Object(me.jsx)("div",{className:"group-wrapper",style:{display:r.isArchive?"none":"unset"},children:Object(me.jsx)(ot.b,{draggableId:r.id,index:c,children:function(t,c){return Object(me.jsxs)("div",Object(h.a)(Object(h.a)(Object(h.a)({className:"group-preview flex column"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:[Object(me.jsxs)("div",{className:"group-header flex space-between align-center",children:[Object(me.jsx)("input",{className:"clean-input",type:"text",value:p,name:"groupTitle",onMouseDown:e.blurFocus,onMouseUp:e.setFocus,onChange:e.handleChange,onBlur:e.onChangeGroupTitle}),Object(me.jsxs)("div",{className:"relative",ref:e.groupEditRef,onClick:function(){return e.setState({isPopoverOpen:!j})},children:[Object(me.jsx)("button",{children:Object(me.jsx)(it.l,{})}),j&&Object(me.jsx)(vt,{onClose:function(){return e.setState({isPopoverOpen:!1})},ref:e.groupEditRef,title:"List actions",children:Object(me.jsx)(qr,{groupId:r.id,onToggleAddPop:e.onToggleAddPop,toggleGroupArchive:i})})]})]}),Object(me.jsx)(ot.c,{droppableId:r.id,children:function(t){return Object(me.jsxs)("ul",Object(h.a)(Object(h.a)({className:"card-list clean-list"},t.droppableProps),{},{ref:t.innerRef,children:[r.cards&&r.cards.map((function(e,t){return Object(me.jsx)(Jr,{card:e,index:t,groupId:r.id,openCardEdit:n,toggleCardLabelList:a,isCardLabelListOpen:o,toggleCardComplete:s,onToggleQuickCardEditor:l,getLabel:d},e.id)})),t.placeholder,b&&Object(me.jsx)(Rr,{onToggleAddPop:e.onToggleAddPop,type:"card",groupId:r.id})]}))}}),!b&&Object(me.jsx)("div",{className:"group-footer flex space-between align-center",children:Object(me.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(me.jsx)("i",{className:"flex align-center",children:Object(me.jsx)(Oe.g,{})}),Object(me.jsx)("span",{children:"Add a card"})]})})]}))}})})}}]),r}(n.Component);function Xr(e){var t=e.groups,r=e.openCardEdit,n=e.updateBoard,a=e.toggleCardLabelList,o=e.isCardLabelListOpen,c=e.toggleCardComplete,s=e.toggleGroupArchive,i=e.onToggleQuickCardEditor,l=e.getLabel;return Object(me.jsx)("ul",{className:"group-list clean-list flex",children:t.map((function(e,t){return Object(me.jsx)(Qr,{index:t,group:e,openCardEdit:r,updateBoard:n,toggleCardLabelList:a,isCardLabelListOpen:o,toggleCardComplete:c,toggleGroupArchive:s,onToggleQuickCardEditor:i,getLabel:l},e.id)}))})}var Yr=r(261),Kr=r(260),Zr=r(71),$r=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.getMembersIds=function(){return e.props.board.members.map((function(e){return e._id}))},e.inviteToBoard=function(t){var r=e.props,n=r.board,a=r.onUpdateBoard,o=e.getMembersIds(),c={_id:t._id,fullname:t.fullname,imgUrl:t.imgUrl};if(o.includes(c._id)){var s={txt:Ie(t.fullname)};a({type:"REMOVE_BOARD_MEMBER",memberId:t._id},n,s)}else{a({type:"ADD_BOARD_MEMBER",member:c},n,{txt:Ne(t.fullname)}),console.log(n.members)}},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(ct.a)({},r,n)))},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this,t=this.state.search,r=this.props.users,n=this.getMembersIds();return Object(me.jsxs)("div",{className:"invite-members",children:[Object(me.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"search",value:t,autoFocus:!0,placeholder:"Search..."}),Object(me.jsx)("ul",{className:"member-list clean-list",children:r.filter((function(e){return e.fullname.includes(t)})).map((function(t){return Object(me.jsxs)("li",{className:"user-preview",onClick:function(){return e.inviteToBoard(t)},children:[Object(me.jsxs)("div",{className:"user-details",children:[Object(me.jsx)(Nt,{member:t}),Object(me.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(me.jsx)("span",{children:n.includes(t._id)?Object(me.jsx)(Zr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var en={onUpdateBoard:Qe},tn=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),en)($r),rn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setBoardBG=function(t){var r=e.props,n=r.board;(0,r.onUpdateBoard)({type:"CHANGE_BOARD_STYLE",style:"#"===t[0]?{bgColor:t}:{imgUrl:t}},n,{txt:Se()})},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this;return Object(me.jsxs)("div",{className:"change-bg",children:[Object(me.jsx)("div",{className:"images",children:["https://images.pexels.com/photos/1914982/pexels-photo-1914982.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/844297/pexels-photo-844297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3293148/pexels-photo-3293148.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/911738/pexels-photo-911738.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3274903/pexels-photo-3274903.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2170473/pexels-photo-2170473.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2529973/pexels-photo-2529973.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1982485/pexels-photo-1982485.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1408221/pexels-photo-1408221.jpeg?cs=srgb&dl=pexels-irina-iriser-1408221.jpg&fm=jpg"].map((function(t,r){return Object(me.jsx)("div",{className:"img-container",onClick:function(){return e.setBoardBG(t)},children:Object(me.jsx)("img",{src:t,alt:t})},r)}))}),Object(me.jsx)("hr",{}),Object(me.jsx)("div",{className:"colors",children:["#82E0AA","#F1948A","#AAB7B8 ","#C39BD3","#85C1E9","#F8C471"].map((function(t,r){return Object(me.jsx)("div",{style:{backgroundColor:"".concat(t)},className:"color-container",onClick:function(){return e.setBoardBG(t)}},r)}))})]})}}]),r}(a.a.Component);var nn={onUpdateBoard:Qe},an=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),nn)(rn),on=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){return Object(re.a)(this,r),t.apply(this,arguments)}return Object(ne.a)(r,[{key:"render",value:function(){var e=this.props.board;return Object(me.jsx)("div",{className:"icon",style:e.style.bgColor?{backgroundColor:e.style.bgColor}:{},children:e.style.imgUrl&&Object(me.jsx)("img",{src:e.style.imgUrl,alt:""})})}}]),r}(a.a.Component);var cn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(on),sn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{txt:"",members:[],labels:[]}},e.updateUrlSearchParams=function(t){var r=e.props,n=r.history,a=r.location,o=Object(h.a)({},t);for(var c in o){var s=o[c];(!s||Array.isArray(s)&&!s.length)&&delete o[c]}var i=new URLSearchParams(o);n.replace("".concat(a.pathname,"?").concat(i.toString()))},e.handleChange=function(t){var r=t.target.name,n=t.target.value,a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},Object(ct.a)({},r,n));e.props.onUpdateFilter(a)},e.getFilteredBoard=P.debounce((function(){var t=Object(h.a)({},e.props.filterBy);for(var r in t){var n=t[r];(!n||Array.isArray(n)&&!n.length)&&delete t[r]}e.props.loadBoard(e.props.match.params.boardId,t)}),100),e.handleUserClick=function(t){if(e.props.filterBy.members.includes(t._id)){var r=e.props.filterBy.members.findIndex((function(e){return e===t._id}));e.props.filterBy.members.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:Object(p.a)(e.props.filterBy.members)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:[].concat(Object(p.a)(e.props.filterBy.members),[t._id])});e.props.onUpdateFilter(a)}},e.handleLabelClick=function(t){if(e.props.filterBy.labels.includes(t.id)){var r=e.props.filterBy.labels.findIndex((function(e){return e===e}));e.props.filterBy.labels.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:Object(p.a)(e.props.filterBy.labels)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:[].concat(Object(p.a)(e.props.filterBy.labels),[t.id])});e.props.onUpdateFilter(a)}},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,r=e.filterBy,n=t.search,a=new URLSearchParams(n),o=Object.keys(r).some((function(e){return a.get(e)}));if(n&&o){var c,s,i=a.get("txt")||"",l=(null===(c=a.get("members"))||void 0===c?void 0:c.split(","))||[];console.log("members: ",l);var d=(null===(s=a.get("labels"))||void 0===s?void 0:s.split(","))||[];console.log("labels: ",d),this.props.onUpdateFilter({txt:i,members:l,labels:d}),this.updateUrlSearchParams(this.props.filterBy),console.log("filterBy from search cards: ",this.props.filterBy)}else this.props.onUpdateFilter({txt:"",members:[],labels:[]}),this.updateUrlSearchParams(this.props.filterBy)}},{key:"componentDidUpdate",value:function(e){var t=e.filterBy,r=this.props.filterBy;t!==r&&(this.updateUrlSearchParams(r),this.getFilteredBoard.bind(this)())}},{key:"componentWillUnmount",value:function(){this.props.onUpdateFilter({txt:"",members:[],labels:[]}),this.updateUrlSearchParams(this.props.filterBy),this.getFilteredBoard.bind(this)()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.props.filterBy;return Object(me.jsxs)("div",{className:"search-cards",children:[Object(me.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"txt",value:r.txt,autoFocus:!0,placeholder:"Search..."}),Object(me.jsx)("p",{className:"search-desc",children:"Search by term, label, member, or due time"}),Object(me.jsx)("hr",{}),Object(me.jsx)("ul",{className:"label-list clean-list",children:t.labels.map((function(t){return Object(me.jsxs)("li",{className:"label-preview",onClick:function(){return e.handleLabelClick(t)},children:[Object(me.jsxs)("div",{className:"label-details",children:[Object(me.jsx)("div",{className:"label-color",style:{backgroundColor:t.color}}),Object(me.jsx)("p",{children:t.title})]}),Object(me.jsx)("span",{children:r.labels.includes(t.id)?Object(me.jsx)(Zr.a,{}):""})]},t.id)}))}),Object(me.jsx)("hr",{}),Object(me.jsx)("ul",{className:"member-list clean-list",children:t.members.map((function(t){return Object(me.jsxs)("li",{className:"user-preview",onClick:function(){return e.handleUserClick(t)},children:[Object(me.jsxs)("div",{className:"user-details",children:[Object(me.jsx)(Nt,{member:t}),Object(me.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(me.jsx)("span",{children:r.members.includes(t._id)?Object(me.jsx)(Zr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var ln={onUpdateFilter:function(e){return function(t){t({type:"UPDATE_FILTER",filterBy:e})}},loadBoard:qe},dn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,filterBy:e.boardModule.filterBy}}),ln)(Object(ce.f)(sn)),un=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={archivedCards:null},e.loadArchivedCards=function(){var t=e.props.board,r=t.archivedCards?t.archivedCards:[];e.setState({archivedCards:r})},e.onUnarchiveCard=function(t){e.props.onUnArchiveCard(t,e.props.board)},e.onDeleteCard=function(t){e.props.onRemoveCard(t,e.props.board)},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){this.loadArchivedCards()}},{key:"componentDidUpdate",value:function(e){e.board.archivedCards!==this.props.board.archivedCards&&this.loadArchivedCards()}},{key:"render",value:function(){var e=this,t=this.state.archivedCards,r=this.props,n=r.isCardLabelListOpen,a=r.toggleCardLabelList,o=r.getLabel,c=r.toggleCardComplete,s=r.openCardEdit;return console.log("archivedCards in archive page",t),Object(me.jsxs)("div",{className:"archive",children:[!t&&Object(me.jsx)(tt,{}),t&&0===t.length&&Object(me.jsx)("div",{children:"No archived cards..."}),t&&t.length>0&&Object(me.jsx)("ul",{className:"archived-cards-list clean-list flex column align-center",children:t.map((function(t,r){return Object(me.jsxs)("li",{children:[Object(me.jsx)(Vr,{card:t,groupId:t.groupId,toggleCardLabelList:a,isCardLabelListOpen:n,getLabel:o,toggleCardComplete:c,openCardEdit:s}),Object(me.jsxs)("div",{className:"archived-btns",children:[Object(me.jsx)("button",{onClick:function(){return e.onUnarchiveCard(t)},children:"Send to board"}),Object(me.jsx)("button",{onClick:function(){return e.onDeleteCard(t)},children:"Delete"})]})]},t.id)}))})]})}}]),r}(a.a.Component);var bn={loadArchivedCards:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.getArchivedCards(e);case 3:return n=t.sent,console.log("in actions",n),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log("Cannot load archived cards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},onUpdateCard:Ye,onRemoveCard:function(e,t){var r=Object(h.a)({},t);return r.archivedCards=r.archivedCards.filter((function(t){return t.id!==e.id})),Qe({},r)},onUnArchiveCard:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Object(h.a)({},t.groups.find((function(t){return t.id===e.groupId})));if(n){var a=e.prevIndex;delete e.groupId,delete e.prevIndex,delete e.isArchive,n.cards.splice(a,0,e)}var o=Object(h.a)({},t);o.archivedCards=o.archivedCards.filter((function(t){return t.id!==e.id}));var c={type:"UPDATE_GROUP",group:n};return Qe(c,o,r)}},pn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),bn)(un),hn=r(259),jn=r.n(hn),mn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getGroupTitle=function(t){return e.props.board.groups.find((function(e){return e.id===t})).title},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this,t=this.props.board;return 0===t.activities.length?Object(me.jsxs)("div",{className:"activity",children:[Object(me.jsxs)("div",{className:"activity-header",children:[Object(me.jsx)(Pr.c,{}),Object(me.jsx)("p",{children:"Activity"})]}),Object(me.jsx)("p",{children:"No Activities in this board yet"})]}):Object(me.jsxs)("div",{className:"activity",children:[Object(me.jsxs)("div",{className:"activity-header",children:[Object(me.jsx)(Pr.c,{}),Object(me.jsx)("p",{children:"Activity"})]}),Object(me.jsx)("ul",{className:"activity-list clean-list",children:t.activities.map((function(r){return Object(me.jsxs)("li",{className:"activity-preview",children:[Object(me.jsx)("span",{className:"member-avatar",children:Object(me.jsx)(Nt,{member:r.byMember})}),Object(me.jsxs)("div",{className:"activity-text",children:[Object(me.jsxs)("span",{className:"user-fullname",children:[r.byMember.fullname," "]}),Object(me.jsx)("p",{children:r.txt}),r.groupId&&Object(me.jsxs)(s.b,{to:"/board/".concat(t._id,"/").concat(r.groupId,"/").concat(r.card.id),children:[" ",r.card.title]}),r.groupId&&Object(me.jsxs)("p",{children:["in list: ",e.getGroupTitle(r.groupId)]}),Object(me.jsx)(jn.a,{className:"publish-time",fromNow:!0,children:r.createdAt})]})]},r.id)}))})]})}}]),r}(a.a.Component);var fn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(mn),gn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeBoard=Object(g.a)(f.a.mark((function t(){var r,n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.board,a=r.onRemoveBoard,t.next=3,a(n._id);case 3:e.props.history.push("/board");case 4:case"end":return t.stop()}}),t)}))),e.checkIfAllowed=function(){var t=e.props,r=t.board,n=t.user;return n.isAdmin||r.createdBy._id===n._id},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this;return Object(me.jsxs)("section",{className:"remove-board flex column",children:[this.checkIfAllowed()&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("p",{children:"Remove this board from workspace?"}),Object(me.jsx)("p",{children:"This action is IRREVERSIBLE"}),Object(me.jsx)("button",{className:"remove-btn nav-button",onClick:function(){return e.removeBoard()},children:"Remove"})]}),!this.checkIfAllowed()&&Object(me.jsx)("p",{children:"You Are not allowed to perform this action"})]})}}]),r}(a.a.Component);var vn={onRemoveBoard:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.remove(e);case 3:console.log("Deleted Succesfully!"),r({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot remove board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},On=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user}}),vn)(Object(ce.f)(gn)),xn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currViewIdx:-1},e._cmpsToRender=[{id:"c101",title:"Change Background",icon:Object(me.jsx)(cn,{}),component:an},{id:"c102",title:"Search Cards",icon:Object(me.jsx)(Tt.b,{}),component:dn},{id:"c103",title:"Archive",icon:Object(me.jsx)(it.b,{}),component:pn},{id:"c104",title:"Remove Board",icon:Object(me.jsx)(Hr.c,{}),component:On}],e.onSelectView=function(t){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:t})}))},e.getViewById=function(){var t=e.state.currViewIdx,r=e._cmpsToRender[t];return console.log("selected view: ",r),r.component},e.onBack=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))},e._CurrView=function(){var t=e.props,r=e._cmpsToRender[e.state.currViewIdx].component;return Object(me.jsx)(r,Object(h.a)({},t))},e._DefaultView=function(){return Object(me.jsxs)("div",{children:[Object(me.jsx)("ul",{className:"default-menu clean-list",children:e._cmpsToRender.map((function(t,r){return Object(me.jsxs)("li",{onClick:function(){return e.onSelectView(r)},children:[Object(me.jsx)("div",{className:"icon",children:t.icon}),Object(me.jsx)("p",{children:t.title})]},t.id)}))}),Object(me.jsx)("hr",{}),Object(me.jsx)(fn,{})]})},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){this.props.location.search&&this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:1})}))}},{key:"componentWillUnmount",value:function(){this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.onClose,n=(t.toggleCardLabelList,t.isCardLabelListOpen,t.getLabel,t.toggleCardComplete,t.openCardEdit,this.state.currViewIdx);return Object(me.jsxs)("div",{className:"side-menu ".concat(this.props.isMenuOpen?"menu-open":""),children:[Object(me.jsxs)("div",{className:"title",children:[Object(me.jsx)("span",{className:"back-btn ".concat(-1!==n?"show-btn":""," "),onClick:function(){return e.onBack()},children:Object(me.jsx)(gt.a,{})}),Object(me.jsx)("p",{className:"menu-title",children:-1===n?"Menu":this._cmpsToRender[n].title}),Object(me.jsx)("span",{className:"close-btn",onClick:r,children:Object(me.jsx)(gt.b,{})})]}),Object(me.jsx)("hr",{}),Object(me.jsx)("div",{className:"rendered-cmp",children:-1===n?Object(me.jsx)(this._DefaultView,{}):Object(me.jsx)(this._CurrView,{})})]})}}]),r}(a.a.Component);var Cn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(Object(ce.f)(xn));var yn={onUpdateBoard:Qe},kn=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),yn)((function(e){var t=e.members,r=e.board,a=e.onUpdateBoard,o=e.onClose;Object(n.useEffect)((function(){return function(){o()}}),[o]);return Object(me.jsx)("div",{className:"member-list",style:{color:"#172b4d"},children:t.map((function(e){return Object(me.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){return t=e._id,void a({type:"REMOVE_BOARD_MEMBER",memberId:t},r);var t},children:[Object(me.jsx)("div",{className:"list-item-layover"}),Object(me.jsx)("div",{style:{width:32},children:Object(me.jsx)(Nt,{member:e})}),Object(me.jsx)("div",{className:"popper-member-name",children:Object(me.jsx)("p",{children:e.fullname})}),Object(me.jsx)("div",{className:"popper-member-check",children:Object(me.jsx)(Zr.a,{})})]},e._id)}))})})),wn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isInviteOpen:!1,boardTitle:e.props.board.title,isMenuOpen:!1,numOfShownMembers:5,isExtraMembersOpen:!1,isTotalMembersOpen:!1},e.inviteRef=a.a.createRef(),e.membersRef=a.a.createRef(),e.totalMembersRef=a.a.createRef(),e.handleResize=function(){var t=e.state.numOfShownMembers;if(window.innerWidth<800){if(3===t)return;e.setState({numOfShownMembers:3})}else{if(5===t)return;e.setState({numOfShownMembers:5})}},e.toggleStarredBoard=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.isStarred=!r.isStarred,n({type:"TOGGLE_STARRED",isStarred:r.isStarred},r)},e.handleFocus=function(e){return e.target.select()},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(ct.a)({},n,a))}))},e.onChangeBoardTitle=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.title=e.state.boardTitle;var a={txt:we(r.title)};n({type:"CHANGE_TITLE",title:r.title},r,a)},e.toggleMenu=function(){e.setState((function(t){return Object(h.a)(Object(h.a)({},t),{},{isMenuOpen:!e.state.isMenuOpen})}))},e.getRemainingMembers=function(){var t=Object(p.a)(e.props.board.members);return t.splice(e.state.numOfShownMembers),t},e.getExtraMembersLength=function(){return e.props.board.members.length-e.state.numOfShownMembers},e.onMembersClose=function(){return e.setState({isExtraMembersOpen:!1})},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.props.loadUsers(),this.props.location.search&&this.setState({isMenuOpen:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){e.board.title!==this.props.board.title&&this.setState({boardTitle:this.props.board.title})}},{key:"render",value:function(){var e=this,t=this.props,r=t.board,n=t.onToggleDashboard,a=t.toggleCardLabelList,o=t.isCardLabelListOpen,c=t.getLabel,s=t.toggleCardComplete,i=t.openCardEdit,l=this.state,d=l.boardTitle,u=l.isMenuOpen,b=l.isInviteOpen,p=l.isExtraMembersOpen,h=l.isTotalMembersOpen,j=this.getRemainingMembers(),m=this.getExtraMembersLength();return Object(me.jsxs)("section",{className:"board-header",children:[Object(me.jsxs)("div",{className:"left-btns",children:[Object(me.jsx)("button",{className:"board-title nav-button",children:Object(me.jsx)("input",{className:"clean-input",type:"text",value:d,name:"boardTitle",onFocus:this.handleFocus,onChange:this.handleChange,onBlur:this.onChangeBoardTitle})}),Object(me.jsx)("button",{className:"starred-btn nav-button ".concat(r.isStarred?"starred":""),onClick:function(){return e.toggleStarredBoard()},children:Object(me.jsx)(Oe.h,{})})," |",Object(me.jsxs)("div",{className:"members-container flex",children:[Object(me.jsxs)("div",{className:"user-previews",children:[j.map((function(e,t){return Object(me.jsx)(Nt,{member:e,style:{left:-5*t}},e._id)})),m>0&&Object(me.jsxs)("div",{ref:this.membersRef,children:[Object(me.jsx)("div",{className:"list-item-layover round",style:{transform:"translateX(".concat(-5*j.length,"px)")},onClick:function(){return e.setState({isExtraMembersOpen:!p})}}),Object(me.jsx)("div",{className:"show-more-btn",style:{transform:"translateX(".concat(-5*j.length,"px)")},children:"+".concat(m)}),p&&Object(me.jsx)(vt,{onClose:function(){return e.setState({isExtraMembersOpen:!1})},title:"Members",ref:this.membersRef,children:Object(me.jsx)(kn,{members:r.members.filter((function(e){return e._id})),onClose:this.onMembersClose})})]})]}),Object(me.jsxs)("div",{className:"relative",ref:this.inviteRef,children:[Object(me.jsx)("button",{onClick:function(){return e.setState({isInviteOpen:!b})},className:"invite-btn nav-button",children:"Invite"}),b&&Object(me.jsx)(vt,{onClose:function(){return e.setState({isInviteOpen:!1})},title:"Invite Members",ref:this.inviteRef,children:Object(me.jsx)(tn,{})})]})]})]}),Object(me.jsx)("div",{className:"right-btns",children:!u&&Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)("div",{className:"relative",ref:this.totalMembersRef,children:[Object(me.jsx)("button",{className:"nav-button members-btn",onClick:function(){return e.setState({isTotalMembersOpen:!h})},children:Object(me.jsx)(Kr.a,{})}),h&&Object(me.jsx)(vt,{onClose:function(){return e.setState({isTotalMembersOpen:!1})},title:"Members",ref:this.totalMembersRef,children:Object(me.jsx)(tn,{})})]}),Object(me.jsxs)("button",{onClick:function(){return n(!0)},className:"dashboard-btn nav-button ".concat(u?"menu-open":""),children:[Object(me.jsx)(Yr.a,{})," ",Object(me.jsx)("span",{className:"right-btn-txt",children:"Dashboard"})]}),Object(me.jsxs)("button",{onClick:function(){return e.toggleMenu()},className:"right-menu-btn nav-button",children:[Object(me.jsx)(Hr.a,{})," ",Object(me.jsx)("span",{className:"right-btn-txt",children:"Show Menu"})]})]})}),Object(me.jsx)(Cn,{isMenuOpen:u,onClose:function(){e.toggleMenu()},isCardLabelListOpen:o,toggleCardLabelList:a,getLabel:c,openCardEdit:i,toggleCardComplete:s})]})}}]),r}(a.a.Component);var Nn={loadUsers:de,onUpdateBoard:Qe},In=Object(i.b)((function(e){return{board:e.boardModule.currBoard,users:e.userModule.users}}),Nn)(Object(ce.f)(wn)),Sn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={card:null,cardTitle:""},e.uploadCard=function(t,r){var n=pt.getCardById(t,r);e.setState({card:n,cardTitle:n.title})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(ct.a)({},n,a))}))},e.handleFocus=function(e){e.target.select()},e.onSave=function(t){var r=Object(h.a)({},e.state.card);r.title=e.state.cardTitle;var n={txt:Ae(),card:r,groupId:e.props.groupId};e.props.onUpdateCard(r,e.props.groupId,e.props.board,n),e.props.onToggleQuickCardEditor(t,null,"")},e.openCard=function(t){e.props.onToggleQuickCardEditor(t,null,""),e.props.openCardEdit(e.props.groupId,e.props.cardId)},e.onArchiveCard=function(t){var r=e.props,n=r.groupId,a=r.board,o=Object(h.a)({},e.state.card);o.isArchive=!0,e.props.onArchiveCard(o,n,a),e.props.onToggleQuickCardEditor(t,null,"")},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cardId,r=e.groupId;this.props.onSetCardId(t),this.uploadCard(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.board!==this.props.board){var t=this.props,r=t.cardId,n=t.groupId;this.uploadCard(r,n)}}},{key:"render",value:function(){var e=this.state,t=e.card,r=e.cardTitle,n=this.props,a=n.groupId,o=n.getLabel,c=n.isCardLabelListOpen,s=n.toggleCardComplete,i=n.position;return t?Object(me.jsxs)("div",{className:"quick-card-editor flex",style:{position:"fixed",top:i.top,left:i.left},children:[Object(me.jsxs)("div",{children:[Object(me.jsxs)("div",{className:"card-preview",style:{width:i.width},children:[t.style&&Object(me.jsx)(_r,{cardStyle:t.style}),Object(me.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(me.jsx)("div",{children:Object(me.jsx)(Lr,{labelIds:t.labelIds,getLabel:o,isCardLabelListOpen:c})}),Object(me.jsx)("textarea",{className:"clean-input",type:"text",value:r,name:"cardTitle",onChange:this.handleChange,autoFocus:!0,onFocus:this.handleFocus}),Object(me.jsx)(Wr,{card:t,groupId:a,toggleCardComplete:s})]})]}),Object(me.jsx)("button",{onClick:this.onSave,className:"card-edit-btn secondary",children:"Save"})]}),Object(me.jsxs)("div",{className:"quick-editor-sidebar flex column",children:[Object(me.jsxs)("button",{onClick:this.openCard,className:"quick-editor-btn flex align-center",children:[Object(me.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(me.jsx)(Qt.a,{})}),Object(me.jsx)("span",{children:"Open card"})]}),Object(me.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(me.jsx)(Ht,{item:{icon:lt.c,title:"Edit labels",component:_t}})}),Object(me.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(me.jsx)(Ht,{item:{icon:Tt.c,title:"Change members",component:At}})}),Object(me.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(me.jsx)(Ht,{item:{icon:Qt.a,title:"Change cover",component:qt}})}),Object(me.jsx)("div",{className:"quick-editor-btn flex align-center datepicker",children:Object(me.jsx)(Ht,{item:{icon:it.k,title:"Edit dates",component:Et}})}),Object(me.jsxs)("div",{className:"quick-editor-btn flex align-center",onClick:this.onArchiveCard,children:[Object(me.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(me.jsx)(dt.a,{})}),Object(me.jsx)("span",{children:"Archive"})]})]})]}):Object(me.jsx)(tt,{})}}]),r}(n.Component);var An={onUpdateCard:Ye,onSetCardId:Ke,onArchiveCard:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=Object(h.a)({},r.groups.find((function(e){return e.id===t}))),o=a.cards.findIndex((function(t){return t.id===e.id})),c=Object(h.a)({},r);e.groupId=t,e.prevIndex=o,a.cards.splice(o,1),c.archivedCards=c.archivedCards?c.archivedCards:[],c.archivedCards.unshift(e);var s={type:"UPDATE_GROUP",group:a};return Qe(s,c,n)}},Bn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),An)(Sn),Mn=r(124);function Un(e){var t=e.tasksPerMemberMap,r=e.labelsColors;console.log("tasksPerMemberMap",t);var n={labels:Object.keys(t),datasets:[{label:"# of Votes",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2}]};return Object(me.jsxs)("div",{className:"chart",children:[Object(me.jsx)("h1",{children:"Tasks per Member"}),Object(me.jsx)(Mn.b,{data:n,options:{plugins:{legend:{labels:{color:"black",padding:10}}}}})]})}function En(e){var t=e.tasksPerLabelMap,r=e.labelsColors,n={labels:Object.keys(t),datasets:[{label:"",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2,fontColor:"black"}]};return Object(me.jsxs)("div",{className:"chart bar-chart-container",style:{maxHeight:400},children:[Object(me.jsx)("h1",{children:"Tasks per Label"}),Object(me.jsx)(Mn.a,{data:n,height:null,width:null,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{fontColor:"black"}}},scales:{y:{ticks:{color:"black"}},x:{ticks:{color:"black"}}}}})]})}var Tn=r(264),Dn=r.n(Tn);function Rn(e){var t=e.tasks;return Object(me.jsx)("div",{className:"time-line-container",children:Object(me.jsx)(Dn.a,{data:t,links:[],config:{header:{top:{style:{background:"linear-gradient( grey, black)",textShadow:"0.5px 0.5px black",fontSize:12}},middle:{style:{background:"linear-gradient( #b686c2, white)",fontSize:9,color:"black"}},bottom:{style:{background:"linear-gradient( grey, black)",fontSize:9,color:"#b686c2"},selectedStyle:{background:"linear-gradient( #d011dd ,#d011dd)",fontWeight:"bold",color:"white"}}},taskList:{title:{label:"Task Todo",style:{background:"linear-gradient( grey, black)"}},task:{style:{backgroundColor:"grey",color:"white"}},verticalSeparator:{style:{backgroundColor:"#fbf9f9"},grip:{style:{backgroundColor:"#b686c2"}}}},dataViewPort:{rows:{style:{backgroundColor:"white",borderBottom:"solid 0.5px silver"}},task:{showLabel:!1,style:{backgroundColor:"#b686c2",borderRadius:1,boxShadow:"2px 2px 8px #888888"}}}}})})}var _n=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={chartsData:null},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.dashboardQuery(this.props.board._id);case 2:t=e.sent,this.setState({chartsData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"labelsColor",get:function(){return this.props.board.labels.map((function(e){return e.color}))}},{key:"render",value:function(){var e=this.state.chartsData,t=this.props.board;return console.log("chartsDate",e),e?Object(me.jsxs)("div",{className:"dashboard-modal flex column align-center",children:[Object(me.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(me.jsx)("button",{className:"close-btn",children:Object(me.jsx)(gt.b,{})})}),Object(me.jsxs)("div",{className:"jeneral-statistics flex",children:[Object(me.jsxs)("div",{className:"stats flex space-between",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)("h3",{children:"All Tasks"}),Object(me.jsx)("span",{children:e.cardsCount})]}),Object(me.jsx)("i",{className:"flex align-center",children:Object(me.jsx)(it.f,{})})]}),Object(me.jsxs)("div",{className:"stats flex space-between",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)("h3",{children:"All Lists"}),Object(me.jsx)("span",{children:e.groupsCount})]}),Object(me.jsx)("i",{className:"flex align-center",children:Object(me.jsx)(Oe.e,{})})]}),Object(me.jsxs)("div",{className:"stats flex space-between",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)("h3",{children:"Members"}),Object(me.jsx)("span",{children:t.members&&t.members.length}),Object(me.jsx)("span",{children:!t.members&&0})]}),Object(me.jsx)("i",{className:"flex align-center",children:Object(me.jsx)(Qt.c,{})})]})]}),Object(me.jsxs)("div",{className:"charts flex",children:[Object(me.jsx)(Un,{className:"chart",tasksPerMemberMap:e.tasksPerMemberMap,labelsColors:this.labelsColor}),Object(me.jsx)(En,{className:"chart",tasksPerLabelMap:e.tasksPerLabelMap,labelsColors:this.labelsColor})]}),Object(me.jsx)(Rn,{tasks:e.tasks})]}):Object(me.jsx)(tt,{})}}]),r}(n.Component);var Ln=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(_n),Pn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isCardLabelListOpen:!1,isAddPopOpen:!1,quickCardEditor:{cardToEdit:null,groupId:"",position:{}}},e.loadBoard=function(t,r){e.props.loadBoard(t,r)},e.openCardEdit=function(t,r){e.props.history.push("".concat(e.props.board._id,"/").concat(t,"/").concat(r))},e.updateBoard=function(t,r){var n=t.board||e.props.board;e.props.onUpdateBoard(t,n,r)},e.onToggleDashboard=function(t){t?e.props.history.push("".concat(e.props.board._id,"/dashboard")):e.props.history.goBack()},e.toggleCardLabelList=function(t){t.stopPropagation(),e.setState({isCardLabelListOpen:!e.state.isCardLabelListOpen})},e.onToggleQuickCardEditor=function(t,r,n){t.stopPropagation();var a=r?t.currentTarget.parentNode:null,o=r?a.getBoundingClientRect():{};e.setState({quickCardEditor:{cardToEdit:r,groupId:n,position:o}})},e.toggleCardComplete=function(t,r,n){if(t.stopPropagation(),!n.isArchive){var a=Object(h.a)({},n);a.isComplete=!n.isComplete;var o=a.isComplete?{txt:Me(),card:a,groupId:r}:{txt:Ue(),card:a,groupId:r};e.props.onUpdateCard(a,r,e.props.board,o)}},e.getLabel=function(t){return e.props.board.labels.find((function(e){return e.id===t}))},e.handleOnDragEnd=function(t){var r=t.destination,n=t.source,a=t.type;if(r){var o=Object(h.a)({},e.props.board);if("group"===a){var c,s=o.groups.splice(n.index,1);return(c=o.groups).splice.apply(c,[r.index,0].concat(Object(p.a)(s))),void e.props.onUpdateBoard({type:""},o)}var i=Object(h.a)({},o.groups.find((function(e){return e.id===n.droppableId}))),l=i.cards.splice(n.index,1);if(n.droppableId===r.droppableId){var d;(d=i.cards).splice.apply(d,[r.index,0].concat(Object(p.a)(l)));var u={type:"UPDATE_GROUP",group:i};e.props.onUpdateBoard(u,o)}else{var b,j=Object(h.a)({},o.groups.find((function(e){return e.id===r.droppableId})));j.cards?(b=j.cards).splice.apply(b,[r.index,0].concat(Object(p.a)(l))):j.cards=[l],o.groups=o.groups.map((function(e){return e.id===n.droppableId?i:e.id===r.droppableId?j:e})),e.props.onUpdateBoard({type:""},o)}}},e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.toggleGroupArchive=function(t){var r=Object(h.a)({},e.props.board.groups.find((function(e){return t===e.id})));r.isArchive=!r.isArchive||!r.isArchive;var n={txt:Be(r.title)},a={type:"UPDATE_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,r,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.boardId,r=this.props.location.search,console.log("from Board details: ",r),e.next=5,this.loadBoard(t,r);case 5:L.emit("member-joined",t),L.on("board-update",(function(e){var t=e.action,r=e.activity,a=t.board||n.props.board;n.props.outputUpdateBoard(t,a,r)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.resetBoard()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.state,n=(r.isDashboardOpen,r.isCardLabelListOpen),a=r.isAddPopOpen,o=r.quickCardEditor;return t?(t.archivedCards&&console.log("board",t),Object(me.jsxs)("div",{className:"board-details flex column",children:[Object(me.jsx)(ce.a,{path:"/board/:boardId/dashboard",component:Ln}),Object(me.jsx)(ce.a,{path:"/board/:boardId/:groupId/:cardId",component:Er}),Object(me.jsx)(In,{onToggleDashboard:this.onToggleDashboard,toggleCardLabelList:this.toggleCardLabelList,toggleCardComplete:this.toggleCardComplete,isCardLabelListOpen:n,getLabel:this.getLabel,openCardEdit:this.openCardEdit}),Object(me.jsx)(ot.a,{onDragEnd:this.handleOnDragEnd,children:Object(me.jsx)("section",{className:"group-list-container flex",children:Object(me.jsx)("div",{className:"group-list-wrapper flex",children:Object(me.jsx)(ot.c,{droppableId:t._id,direction:"horizontal",type:"group",children:function(r,o){return Object(me.jsxs)("div",Object(h.a)(Object(h.a)({},r.droppableProps),{},{ref:r.innerRef,className:"flex",children:[t.groups&&Object(me.jsx)(Xr,{groups:t.groups,openCardEdit:e.openCardEdit,updateBoard:e.updateBoard,toggleCardLabelList:e.toggleCardLabelList,isCardLabelListOpen:n,toggleCardComplete:e.toggleCardComplete,toggleGroupArchive:e.toggleGroupArchive,onToggleQuickCardEditor:e.onToggleQuickCardEditor,getLabel:e.getLabel}),r.placeholder,Object(me.jsxs)("div",{className:"add-group-container",children:[!a&&Object(me.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(me.jsx)("i",{className:"flex align-center",children:Object(me.jsx)(Oe.g,{})}),Object(me.jsx)("span",{children:"Add a list"})]}),a&&Object(me.jsx)(Rr,{onToggleAddPop:e.onToggleAddPop,type:"group"})]})]}))}})})})}),o.cardToEdit&&Object(me.jsx)(Bn,{cardId:o.cardToEdit.id,groupId:o.groupId,position:o.position,getLabel:this.getLabel,toggleCardComplete:this.toggleCardComplete,isCardLabelListOpen:n,onToggleQuickCardEditor:this.onToggleQuickCardEditor,openCardEdit:this.openCardEdit}),o.cardToEdit&&Object(me.jsx)("div",{onClick:function(t){return e.onToggleQuickCardEditor(t,null,"")},children:Object(me.jsx)($e,{})})]})):Object(me.jsx)(tt,{})}}]),r}(n.Component);var Fn={loadBoard:qe,onUpdateBoard:Qe,outputUpdateBoard:function(e,t,r){return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Ze(e,t),n({type:"UPDATE_BOARD",board:a});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},onUpdateCard:Ye,resetBoard:function(){return document.body.style.background="unset",function(e){e({type:"SET_CURR_BOARD",board:null})}}},Gn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Fn)(Pn),zn=r(30),Wn=r(267),Hn=r.p+"static/media/login-svg-right.df08073f.svg",Vn=r.p+"static/media/login-svg-left.ff7c7688.svg",Jn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{username:"",password:"",fullname:""},pageMode:null},e.validate=function(e){var t={};return e.username?e.username.length<6&&(t.username="Please use at least 6 characters"):t.username="Required",e.password.length<4&&(t.password="Password too short"),e.fullname?e.fullname.length<4&&(t.fullname="Please use at least 4 characters"):t.fullname="Required",t},e.onSuccessGoogle=function(t){var r=t.tokenId;(0,e.props.onGoogleLogin)(r),e.props.history.push("/board")},e.onFailureGoogle=function(e){console.log("Login with google failed",e)},e.onSubmit=function(t){var r=e.state.pageMode,n=e.props,a=n.onLogin,o=n.onSignup;"login"===r?a(t):o(t),e.props.history.push("/board")},e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUsers();case 2:t="/login"===this.props.location.pathname?"login":"signup",this.setState({pageMode:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.credentials,r=e.pageMode;return Object(me.jsxs)("section",{className:"login-signup-page main-container",children:[Object(me.jsxs)("div",{className:"login-signup-header",children:[Object(me.jsx)(se.a,{}),Object(me.jsx)("h3",{className:"logo-text",children:"Marshmello"})]}),"login"===r&&Object(me.jsxs)("div",{className:"login-signup flex column",children:[Object(me.jsx)("h3",{children:"Log in to Marshmello"}),Object(me.jsx)(zn.d,{initialValues:t,onSubmit:this.onSubmit,children:Object(me.jsxs)(zn.c,{className:"login-form flex column",children:[Object(me.jsx)(zn.b,{type:"username",placeholder:"Enter user name",name:"username",autoFocus:!0}),Object(me.jsx)(zn.a,{name:"username",component:"div"}),Object(me.jsx)(zn.b,{type:"password",placeholder:"Enter password",name:"password",autoComplete:"off"}),Object(me.jsx)(zn.a,{name:"password",component:"div"}),Object(me.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Log in"})]})}),"OR",Object(me.jsx)("br",{}),Object(me.jsx)(Wn.GoogleLogin,{className:"google-login-btn flex align-center justify-center",clientId:"209268489709-ofnqpgb55aikiprlelkbiafntgld4mhg.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:this.onSuccessGoogle,onFailure:this.onFailureGoogle,cookiePolicy:"single_host_origin"}),Object(me.jsx)(s.b,{to:"/signup",children:"Sign up for an account"})]}),"signup"===r&&Object(me.jsxs)("div",{className:"login-signup flex column",children:[Object(me.jsx)("h3",{children:"Sign up for your account"}),Object(me.jsx)(zn.d,{initialValues:t,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,onSubmit:this.onSubmit,children:Object(me.jsxs)(zn.c,{className:"flex column",children:[Object(me.jsx)(zn.b,{type:"fullname",placeholder:"Enter full name",name:"fullname",autoFocus:!0}),Object(me.jsx)(zn.a,{name:"fullname",component:"p"}),Object(me.jsx)(zn.b,{type:"username",placeholder:"Enter user name",name:"username"}),Object(me.jsx)(zn.a,{name:"username",component:"p"}),Object(me.jsx)(zn.b,{type:"password",placeholder:"Enter password",name:"password"}),Object(me.jsx)(zn.a,{name:"password",component:"p"}),Object(me.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Sign up"})]})}),Object(me.jsx)(s.b,{to:"/login",children:"Already have an account ? Log In"})]}),Object(me.jsx)("div",{className:"right-svg",children:Object(me.jsx)("img",{src:Hn,alt:"right-svg"})}),Object(me.jsx)("div",{className:"left-svg",children:Object(me.jsx)("img",{src:Vn,alt:"left-svg"})})]})}}]),r}(a.a.Component);var qn={loadUsers:de,onLogin:ue,onSignup:be,onGoogleLogin:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.googleLogin(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Qn=Object(i.b)((function(e){return{user:e.userModule.user}}),qn)(Jn),Xn=[{path:"/board/:boardId",component:Gn},{path:"/board",component:at},{path:"/login",component:Qn},{path:"/signup",component:Qn},{path:"/",component:ve}],Yn=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={title:"",style:{imgUrl:"https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"},chosenImgIdx:5},e.targetRef=a.a.createRef(),e.handleClick=function(t){e.targetRef.current.contains(t.target)||e.props.onClose()},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(ct.a)({},r,n)))},e.handleImage=function(t,r){t.preventDefault();var n=t.target.getAttribute("src");e.setState(Object(h.a)(Object(h.a)({},e.state),{},{style:{imgUrl:n},chosenImgIdx:r}))},e.addBoard=function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.onAddBoard(e.state);case 5:n=t.sent,e.props.history.push("/board/".concat(n._id)),e.props.setAddingBoard(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ne.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick),this.props.setAddingBoard(!1)}},{key:"render",value:function(){var e=this,t=["https://images.pexels.com/photos/1914982/pexels-photo-1914982.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/844297/pexels-photo-844297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3293148/pexels-photo-3293148.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/911738/pexels-photo-911738.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3274903/pexels-photo-3274903.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2170473/pexels-photo-2170473.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2529973/pexels-photo-2529973.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1982485/pexels-photo-1982485.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"],r=this.state,n=r.title,a=r.chosenImgIdx;return Object(me.jsxs)("div",{className:"board-add",ref:this.targetRef,children:[Object(me.jsxs)("form",{className:"board-add-form",onSubmit:this.addBoard,style:{background:"#000000",backgroundImage:"url(".concat(t[a],")")},children:[Object(me.jsx)("input",{autoFocus:!0,className:"board-title-input ".concat(n?"editing":""),autoComplete:"off",type:"text",placeholder:"Add board title",name:"title",value:n,onChange:this.handleChange}),Object(me.jsx)("button",{className:"create-btn ".concat(n?"clickable":""),type:"submit",children:"Create Board"})]}),Object(me.jsx)("div",{className:"images-container",children:t.map((function(t,r){return Object(me.jsx)("button",{className:"img-btn ".concat(r===a?"chosen":""),onClick:function(t){return e.handleImage(t,r)},children:Object(me.jsx)("img",{className:"add-board-img",src:t,alt:t})},r)}))})]})}}]),r}(a.a.Component);var Kn={onAddBoard:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fe.save(e);case 3:return n=t.sent,console.log("Added Board",n),r({type:"ADD_BOARD",board:n}),L.emit("update",!0),t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),console.log("Cannot add board",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Xe},Zn=Object(ce.f)(Yn),$n=Object(i.b)((function(e){return{isAddingBoard:e.boardModule.isAddingBoard}}),Kn)(Zn),ea=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onLogoutUser=function(){e.props.history.push("/login"),e.props.onLogout()},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this;return Object(me.jsxs)("div",{className:"mini-user flex column",children:[Object(me.jsxs)("div",{className:"main flex",children:[Object(me.jsx)(Nt,{size:"lg",member:this.props.user}),Object(me.jsxs)("div",{children:[Object(me.jsx)("h3",{className:"mini-user-fullname",children:this.props.user.fullname}),Object(me.jsx)("p",{children:this.props.user.username})]})]}),Object(me.jsx)("p",{className:"remove-member",onClick:function(){return e.onLogoutUser()},children:"Log Out"})]})}}]),r}(a.a.Component);var ta={onLogout:pe},ra=Object(ce.f)(ea),na=Object(i.b)((function(e){return{user:e.userModule.user}}),ta)(ra),aa=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){var e;Object(re.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isPopoverOpen:!1},e.userMenuRef=a.a.createRef(),e.onLogout=function(){e.props.onLogout()},e.setAddBoard=function(t){e.props.setAddingBoard(t)},e.setFavicon=function(){document.getElementById("favicon").href="../../public/favicon.ico"},e}return Object(ne.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.user,n=t.isAddingBoard,a=this.state.isPopoverOpen;return r?Object(me.jsxs)("header",{className:"app-header",children:[Object(me.jsxs)("nav",{className:"nav-links",children:[Object(me.jsxs)("div",{className:"left-links",children:[Object(me.jsx)(s.c,{to:"/",children:Object(me.jsx)("button",{onClick:function(){return e.setFavicon()},className:"home-btn nav-button",children:Object(me.jsx)(Qt.b,{})})}),Object(me.jsx)(s.c,{to:"/board",children:Object(me.jsxs)("button",{onClick:function(){return e.setFavicon()},className:"boards-btn flex nav-button",children:[Object(me.jsx)(se.a,{})," ",Object(me.jsx)("span",{children:"Boards"})]})})]}),Object(me.jsxs)(s.c,{className:"logo",to:"/",children:[Object(me.jsx)(se.a,{})," ",Object(me.jsx)("span",{children:" Marshmello "})]}),Object(me.jsxs)("div",{className:"right-links",children:[Object(me.jsx)("button",{className:"nav-button",onClick:function(){return e.setAddBoard(!0)},children:Object(me.jsx)(Oe.g,{})}),Object(me.jsx)("button",{className:"nav-button",children:Object(me.jsx)(Oe.b,{})}),Object(me.jsxs)("div",{className:"relative",ref:this.userMenuRef,children:[Object(me.jsx)("button",{onClick:function(){return e.setState({isPopoverOpen:!a})},children:Object(me.jsx)(Nt,{member:r},r._id)}),a&&Object(me.jsx)(vt,{onClose:function(){return e.setState({isPopoverOpen:!1})},title:"User Details",ref:this.userMenuRef,children:Object(me.jsx)(na,{member:r,onLogout:this.onLogout})})]})]})]}),n&&Object(me.jsx)($n,{onClose:function(){return e.setAddBoard(!1)}}),n&&Object(me.jsx)($e,{})]}):Object(me.jsx)(tt,{})}}]),r}(a.a.Component);var oa={onLogin:ue,onSignup:be,onLogout:pe,loadUsers:de,removeUser:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.remove(e);case 3:r({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Xe},ca=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user,isAddingBoard:e.boardModule.isAddingBoard}}),oa)(aa),sa=function(e){Object(ae.a)(r,e);var t=Object(oe.a)(r);function r(){return Object(re.a)(this,r),t.apply(this,arguments)}return Object(ne.a)(r,[{key:"isHeaderShown",get:function(){var e=this.props.location.pathname;return e.includes("board")||e.includes("boards")}},{key:"render",value:function(){return Object(me.jsxs)("div",{className:"app flex column",children:[this.isHeaderShown&&Object(me.jsx)(ca,{}),Object(me.jsx)("main",{className:"main-app",children:Object(me.jsx)(ce.c,{children:Xn.map((function(e){return Object(me.jsx)(ce.a,{component:e.component,path:e.path},e.path)}))})})]})}}]),r}(a.a.Component);var ia=Object(ce.f)(sa),la=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(ia);r(533);c.a.render(Object(me.jsxs)(a.a.StrictMode,{children:[Object(me.jsxs)(i.a,{store:te,children:[Object(me.jsx)(s.a,{children:Object(me.jsx)(la,{})})," "]})," "]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}()}},[[534,1,2]]]);
//# sourceMappingURL=main.6e221a1a.chunk.js.map