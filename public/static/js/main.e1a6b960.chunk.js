(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{281:function(e){e.exports=JSON.parse('[{"_id":"b101","title":"Final Project","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u101","fullname":"Summer Smith","imgUrl":"https://static.wikia.nocookie.net/rickandmorty/images/a/ad/Summer_is_cool.jpeg/revision/latest?cb=20160919183158"},"style":{"imgUrl":"https://images.pexels.com/photos/2662116/pexels-photo-2662116.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Important","color":"#FF9F1A"},{"id":"l103","title":"Urgent","color":"#eb5a46"},{"id":"l104","title":"If time permits","color":"#C377E0"},{"id":"l105","title":"On hold","color":"#344563"},{"id":"l106","title":"Design","color":"#FF78CB"}],"members":[{"_id":"u101","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u104","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"groups":[{"id":"g102","title":"Bugs","cards":[{"id":"c103","title":"Notification not sending","description":"Notification on header doesn\'t apear in time","isComplete":false,"attachments":[{"id":"j0dq7e","url":"https://images.pexels.com/photos/1122626/pexels-photo-1122626.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","title":"Attachment","addedAt":1632823545000}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l102"],"createdAt":1590999730348},{"id":"c104","title":"Drag & drop issues","description":"description","isComplete":false,"comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"}}],"checklists":[{"id":"YEhmF","title":"react-beautiful-dnd","todos":[{"id":"212jX","title":"Go over the documentation again","isDone":true}]},{"id":"YEhmS","title":"Droppable & Draggable","todos":[{"id":"212jX","title":"Fix placeholder","isDone":false}]},{"id":"YEhmA","title":"Handle Drag End","todos":[{"id":"212jX","title":"Fix function","isDone":false},{"id":"212jY","title":"Console to check the result","isDone":true}]}],"members":[{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l103"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#5BA4CF"}},{"id":"c105","title":"Download img not working","isComplete":false,"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/2325446/pexels-photo-2325446.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}}],"style":{}},{"id":"g103","title":"In progress","cards":[{"id":"c1010","title":"Home page","isComplete":false},{"id":"c1040","title":"Work on JSON","description":"Make demo data perfect","isComplete":false,"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l101","l102"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@ababmi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}},{"id":"c107","title":"About page","description":"Finish about page","isComplete":true,"members":[{"_id":"u101","username":"summer@smith.com","fullname":"Summer Smith","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif"}],"labelIds":["l101","l105","l106"],"createdAt":1590999730348,"dueDate":1633156788007,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://images.pexels.com/photos/8979724/pexels-photo-8979724.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"}},{"id":"c108","title":"Create test data","description":"Create at least 3 objects for testing","isComplete":false,"checklists":[{"id":"Fkdgngrt12","title":"Test data","todos":[{"id":"212jX","title":"First test","isDone":true},{"id":"ffjenf54f","title":"Second data","isDone":false},{"id":"ggfvdf3d","title":"Third data","isDone":false}]}],"members":[{"_id":"u104","username":"beth@smith.com","fullname":"Beth Smith","imgUrl":"https://i.imgur.com/pUVtIqL.gif"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"},{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"}],"labelIds":["l103"],"createdAt":1590999730348,"byMember":{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv"},"style":{"imgUrl":"https://clickup.com/blog/wp-content/uploads/2020/01/note-taking.png"}},{"id":"c110","title":"Finish basic css","isComplete":false,"members":[{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}],"labelIds":["l105","l106"],"createdAt":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"}}],"style":{}},{"id":"g106","title":"Backend","cards":[{"id":"c101012","title":"Sockets","createdAt":1590999817436,"isComplete":false},{"id":"c10434","title":"Connect mongo","description":"set up data base in mongoDB","isComplete":true,"labelIds":["l105"],"createdAt":1590999730348,"dueDate":1590999730348,"byMember":{"_id":"u105","username":"jerry@smith.com","fullname":"Jerry Smith","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif"},"style":{"bgColor":"#F5DD29"}}],"style":{}},{"id":"ghtrhthfgsf","title":"Next steps","cards":[{"id":"afgfv3ffs","title":"Responsivness"}]},{"id":"g1038yur673y","title":"QA","cards":[]},{"id":"4tesrgfg","title":"Done","cards":[]}],"activities":[]},{"_id":"b102","title":"Marshmello","createdAt":1589983468418,"isStarred":true,"createdBy":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"},"style":{"bgColor":"#26de81"},"labels":[{"id":"l101","title":"Done","color":"#61bd4f"},{"id":"l102","title":"Stuck","color":"#0079BF"},{"id":"l103","title":"In Progress","color":"#61bd4f"},{"id":"l104","title":"With Bugs","color":"#61bd4f"},{"id":"l105","title":"Ready","color":"#61bd4f"}],"members":[{"_id":"u101","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},{"_id":"u102","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}],"groups":[{"id":"g102","title":"Group 1","cards":[{"id":"c103","title":"Do that","description":"description"},{"id":"c104","title":"Help me","description":"description","comments":[{"id":"ZdPnm","txt":"also @yaronb please CR this","createdAt":1590999817436,"byMember":{"_id":"u103","fullname":"Morty Smith","imgUrl":"https://comicvine.gamespot.com/a/uploads/scale_medium/6/66303/4469088-tumblr_inline_n0aleph3fl1r8rr6o.jpg"}}],"checklists":[{"id":"YEhmF","title":"Checklist","todos":[{"id":"212jX","title":"To Do 1","isDone":false},{"id":"212jF","title":"To Do 2","isDone":true},{"id":"212jN","title":"To Do 3","isDone":false}]},{"id":"YEhmR","title":"Checklist 2","todos":[{"id":"232jX","title":"To Do 4","isDone":false},{"id":"232jF","title":"To Do 5","isDone":true},{"id":"232jN","title":"To Do 6","isDone":true}]}],"members":[{"_id":"u102","username":"rick@sanchez.com","fullname":"Rick Sanchez","imgUrl":"https://robohash.org/rick.png?set=set2"},{"_id":"u103","username":"morty@smith.com","fullname":"Morty Smith","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif"}],"labelIds":["l101","l102","l103"],"createdAt":1590999730348,"dueDate":16156215211,"byMember":{"_id":"u101","username":"abi@abambi.com","fullname":"Abi Abambi","imgUrl":"https://robohash.org/abi.png?set=set2"},"style":{"bgColor":"#26de81"}}],"style":{}}],"activities":[]}]')},282:function(e){e.exports=JSON.parse('[{"_id":"u101","fullname":"Summer Smith","username":"summer@Smith.com","password":"summer123","imgUrl":"http://pa1.narvii.com/7560/c8fb90383dd2f95adb3b741f1cd5eb624a6d9275r1-480-270_00.gif","mentions":[{"id":"m101","boardId":"b101","taskId":"t101"}]},{"_id":"u102","fullname":"Rick Sanchez","username":"rick@sanchez.com","password":"rick123","imgUrl":"https://64.media.tumblr.com/fe5fa9731f868bf384972e484179c207/tumblr_onsmw9RiW41utwx86o1_640.gifv","mentions":[{"id":"m102","boardId":"b102","taskId":"t102"}]},{"_id":"u103","fullname":"Morty Smith","username":"morty@smith.com","password":"morty123","imgUrl":"https://media4.giphy.com/media/kE3oHWRe1Td2oLeIX7/giphy.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u104","fullname":"Beth Smith","username":"beth@smith.com","password":"beth123","imgUrl":"https://i.imgur.com/pUVtIqL.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u105","fullname":"Jerry Smith","username":"jerry@smith.com","password":"jerry123","imgUrl":"https://c.tenor.com/K5glSjkHrDkAAAAM/rick-and-morty-adult-swim.gif","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]},{"_id":"u106","fullname":"Bird Person","username":"bird@person.com","password":"bird123","imgUrl":"https://robohash.org/bird.png?set=set2","mentions":[{"id":"m103","boardId":"b103","taskId":"t103"}]}]')},533:function(e,t,r){},534:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),o=r(48),c=r.n(o),s=r(22),i=r(8),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=r(40),b=r(247),p=r(14),h=r(4),j={boards:[],currBoard:null,lastRemovedBoard:null,isAddingBoard:!1,currCardId:null,filterBy:{txt:"",members:[],labels:[]}};var m=r(12),f=r.n(m),g=r(16),v={query:y,get:function(e,t){return y(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=w(),y(e).then((function(r){return r.push(t),k(e,r),t}))},put:function(e,t){return y(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),k(e,r),t}))},remove:function(e,t){return y(e).then((function(r){var n=r.findIndex((function(e){return e._id===t}));r.splice(n,1),k(e,r)}))},postMany:function(e,t){return y(e).then((function(r){return t=t.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{_id:w()})})),r.push.apply(r,Object(p.a)(t)),k(e,r),r}))},dashboardQuery:function(e,t){return C.apply(this,arguments)}},O=r(281),x=r(282);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=JSON.parse(localStorage.getItem(e));return r||k(e,r="board"===e?O:x),new Promise((function(e,n){setTimeout((function(){e(r)}),t)}))}function C(){return C=Object(g.a)(f.a.mark((function e(t,r){var n,a,o,c,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:500,e.next=3,y(t);case 3:return a=e.sent,o=a.find((function(e){return e._id===r})),c={groupsCount:0,cardsCount:0,tasksPerMemberMap:{},tasksPerLabelMap:{}},o.members&&o.members.forEach((function(e){c.tasksPerMemberMap[e.fullname]=0})),o.labels&&o.labels.forEach((function(e){c.tasksPerLabelMap[e.title]=0})),o.groups&&o.groups.forEach((function(e){e.isArchive||(c.groupsCount=c.groupsCount+1,e.cards.forEach((function(e){e.isArchive||(c.cardsCount=c.cardsCount+1),e.members&&e.members.forEach((function(e){c.tasksPerMemberMap[e.fullname]++})),e.labelIds&&e.labelIds.forEach((function(e){var t=N(o.labels,e);c.tasksPerLabelMap[t.title]++}))})))})),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(c)}),n)})));case 10:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function w(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function N(e,t){return e.find((function(e){return e.id===t}))}var I=r(248),S="/api/",B=r.n(I).a.create({withCredentials:!0}),A=function(e,t){return T(e,"GET",t)},M=function(e,t){return T(e,"POST",t)},U=function(e,t){return T(e,"PUT",t)};function T(e){return D.apply(this,arguments)}function D(){return D=Object(g.a)(f.a.mark((function e(t){var r,n,a,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,B({url:"".concat(S).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),D.apply(this,arguments)}var _=r(249),E=r.n(_),R=function(){var e=null,t={setup:function(){e=E()("")},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}();window.socketService=R,R.setup();var L={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],r="";for(;e>0;)e--,r+=t[Math.floor(Math.random()*t.length)]+" ";return r},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},debounce:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];clearTimeout(t),t=setTimeout((function(){e.apply(r,o)}),n)}}};var P="loggedinUser",F={login:function(e){return H.apply(this,arguments)},logout:function(){return J.apply(this,arguments)},signup:function(e){return q.apply(this,arguments)},getLoggedinUser:X,getMiniUser:function(){var e=X()||{_id:L.makeId(),fullname:"Guest"};return{_id:e._id,fullname:e.fullname,imgUrl:e.imgUrl}},getUsers:function(){return G.apply(this,arguments)},getById:function(e){return z.apply(this,arguments)},remove:function(e){return v.remove("user",e)},update:function(e){return W.apply(this,arguments)},getGueastUser:function(){return{_id:L.makeId(),fullname:"Guest"}},googleLogin:function(e){return V.apply(this,arguments)}};function G(){return(G=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("user",t);case 2:return r=e.sent,r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.put("user",t);case 2:return X()._id===t._id&&Q(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/login",t);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",Q(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("auth/googlelogin",{tokenId:t});case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",Q(r));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.imgUrl="",t.mentions=[],t.boards=[],e.next=5,M("auth/signup",t);case 5:return r=e.sent,e.abrupt("return",Q(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.removeItem(P);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return sessionStorage.setItem(P,JSON.stringify(e)),e}function X(){return JSON.parse(sessionStorage.getItem(P)||"null")}window.userService=F;var Y={user:F.getLoggedinUser()||F.getGueastUser(),users:[],watchedUser:null};var K={isLoading:!1};var Z=Object(u.c)({boardModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,r=arguments.length>1?arguments[1]:void 0,n=t;switch(r.type){case"SET_BOARDS":n=Object(h.a)(Object(h.a)({},t),{},{boards:r.boards});break;case"UPDATE_FILTER":n=Object(h.a)(Object(h.a)({},t),{},{filterBy:r.filterBy});break;case"SET_CURR_BOARD":case"UPDATE_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{currBoard:r.board});break;case"REMOVE_BOARD":var a=t.boards.find((function(e){return e._id===r.boardId}));e=t.boards.filter((function(e){return e._id!==r.boardId})),n=Object(h.a)(Object(h.a)({},t),{},{boards:e,lastRemovedBoard:a});break;case"SET_ADDING_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{isAddingBoard:r.isAddingBoard});break;case"ADD_BOARD":n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[r.board])});break;case"SET_CARD_ID":n=Object(h.a)(Object(h.a)({},t),{},{currCardId:r.cardId});break;case"UNDO_REMOVE_BOARD":t.lastRemovedBoard&&(n=Object(h.a)(Object(h.a)({},t),{},{boards:[].concat(Object(p.a)(t.boards),[t.lastRemovedBoard]),lastRemovedBoard:null}))}return n},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,r=e;switch(t.type){case"SET_USER":r=Object(h.a)(Object(h.a)({},e),{},{user:t.user});break;case"SET_WATCHED_USER":r=Object(h.a)(Object(h.a)({},e),{},{watchedUser:t.user});break;case"REMOVE_USER":r=Object(h.a)(Object(h.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});break;case"SET_USERS":r=Object(h.a)(Object(h.a)({},e),{},{users:t.users})}return r},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ee=Object(u.e)(Z,$(Object(u.a)(b.a))),te=r(6),re=r(7),ne=r(10),ae=r(9),oe=r(19),ce=r(56);var se={on:function(e,t){var r=function(e){var r=e.detail;t(r)};return window.addEventListener(e,r),function(){window.removeEventListener(e,r)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";se.emit("show-user-msg",{txt:e,type:t})}function le(){return function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.getUsers();case 3:r=e.sent,t({type:"SET_USERS",users:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function de(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.login(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ue(e){return function(t){F.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}window.myBus=se,window.showUserMsg=ie;var be=r.p+"static/media/hero.e8878a54.png",pe=r.p+"static/media/homepage-product.162d5e7b.jpg",he=r(1),je=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isNavbarBG:!1,innerWidth:""},e.handleResize=function(){e.setState({innerWidth:window.innerWidth})},e.changeHeaderStyle=function(){var t=e.state.isNavbarBG;window.scrollY>50&&!t?e.setState({isNavbarBG:!0}):window.scrollY<50&&t&&e.setState({isNavbarBG:!1})},e.onGuestLogin=function(){e.props.onLogin({username:"rick@sanchez.com",password:"rick123"}),e.props.history.push("/board")},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.changeHeaderStyle),window.addEventListener("resize",this.handleResize),this.handleResize(),document.body.style.overflowY="scroll"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.changeHeaderStyle),window.removeEventListener("resize",this.handleResize),document.body.style.overflowY="hidden"}},{key:"render",value:function(){var e=this,t=this.state.isNavbarBG;return Object(he.jsxs)("section",{className:"home-page main-container",children:[Object(he.jsxs)("header",{className:"home-header ".concat(t?"bg-visible":""),children:[Object(he.jsxs)("span",{className:"logo",children:[" ",Object(he.jsx)(ce.a,{})," Marshmello"]}),Object(he.jsxs)("div",{className:"header-buttons",children:[Object(he.jsx)(s.b,{to:"/login",children:Object(he.jsx)("button",{className:"login-btn nav-button",children:"Log in"})}),Object(he.jsx)(s.b,{to:"/signup",children:Object(he.jsx)("button",{className:"signup-btn nav-button",children:"Sign up"})})]})]}),Object(he.jsxs)("div",{className:"home-first-fold",children:[Object(he.jsxs)("div",{className:"first-fold-text",children:[Object(he.jsx)("h1",{children:"Marshmello helps teams move work forward."}),Object(he.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Marshmello."}),Object(he.jsx)("button",{className:"cta-btn nav-button",onClick:function(){return e.onGuestLogin()},children:"Get Started!"})]}),Object(he.jsx)("div",{className:"first-fold-img",children:Object(he.jsx)("img",{src:be,alt:"hero"})})]}),Object(he.jsxs)("div",{className:"home-second-fold",children:[Object(he.jsxs)("div",{className:"second-fold-text",children:[Object(he.jsx)("h1",{children:"It\u2019s more than work. It\u2019s a way of working together."}),Object(he.jsx)("p",{children:"Start with a Marshmello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place."})]}),Object(he.jsx)("div",{className:"second-fold-img",children:Object(he.jsx)("img",{src:pe,alt:"hero"})})]})]})}}]),r}(a.a.Component);var me={onLogin:de},fe=Object(i.b)((function(e){return{users:e.userModule.users}}),me)(je),ge=r(21);function ve(e){var t=e.board,r=e.toggleStarredBoard,n=e.setFavicon;return Object(he.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(he.jsx)("div",{onClick:function(){return n(t.style)},className:"board-preview",style:t.style.bgColor?{backgroundColor:"".concat(t.style.bgColor)}:{backgroundImage:"url(".concat(t.style.imgUrl,")")},children:Object(he.jsxs)("div",{className:"preview-content",children:[Object(he.jsx)("h4",{className:"board-title",children:t.title}),Object(he.jsx)("button",{className:"star-btn ".concat(t.isStarred?"starred":""),onClick:function(e){return function(e){e.preventDefault(),e.stopPropagation(),r(t)}(e)},children:Object(he.jsx)(ge.g,{})})]})})})}function Oe(e){var t=e.boards,r=e.toggleStarredBoard,n=e.setFavicon;return Object(he.jsx)("div",{className:"board-list flex",children:t.map((function(e){return Object(he.jsx)(ve,{board:e,toggleStarredBoard:r,setFavicon:n},e._id)}))})}var xe=function(e){return"Added list: ".concat(e)},ye=function(){return"Added card:"},Ce=function(e){return"Renamed this board to: ".concat(e)},ke=function(e){return"Invited ".concat(e," to this board")},we=function(){return"Changed the background of this board"},Ne=function(){return"Edited card title: "},Ie=function(e){return"Archived the list: ".concat(e)},Se=function(){return"Marked the following card as complete: "},Be=function(){return"Marked the following card as incomplete: "},Ae=function(){return"Changed the description in card: "},Me=function(e){return"Changed the title in list: ".concat(e)},Ue=function(e){return"Added ".concat(e," to a card")},Te=function(e){return"Removed ".concat(e," from a card")},De=function(e){return"Added the label ".concat(e," to a card")},_e=function(e){return"Removed the label ".concat(e," from a card")},Ee=function(e){return"Added checklist ".concat(e," to a card")},Re="board",Le={query:function(e){return Pe.apply(this,arguments)},getById:function(e,t){return Fe.apply(this,arguments)},save:function(e){return We.apply(this,arguments)},remove:function(e){return ze.apply(this,arguments)},dashboardQuery:function(e){return Ge.apply(this,arguments)}};function Pe(){return(Pe=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("board",t);case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading boards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Fe(){return(Fe=Object(g.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"object"===typeof r&&(r=new URLSearchParams(r).toString()),e.next=4,A("board/".concat(t),r);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("Front: Error loading board with ID: ".concat(t),e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ge(){return(Ge=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("board/dashboard/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log("Front: Error loading chartsData",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ze(){return(ze=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.remove(Re,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return We=Object(g.a)(f.a.mark((function e(t){var r,n,a,o,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,!t._id){e.next=10;break}if(!r){e.next=7;break}return n={txt:r.txt,id:L.makeId(),byMember:F.getMiniUser(),card:r.card?{id:r.card.id,title:r.card.title}:{},groupId:r.groupId?r.groupId:null},e.abrupt("return",U("board/".concat(t._id),{board:t,activity:n}));case 7:return e.abrupt("return",U("board/".concat(t._id),{board:t,activity:null}));case 8:e.next=15;break;case 10:return a={title:t.title,style:t.style,createdBy:F.getMiniUser(),members:[F.getMiniUser()]},e.next=13,M("board",a);case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function He(e,t){return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Le.getById(e,t);case 3:a=r.sent,document.body.style.background=a.style.bgColor?a.style.bgColor:'url("'.concat(a.style.imgUrl,'")'),document.body.style.backgroundSize="cover",n({type:"SET_CURR_BOARD",board:a}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("Cannot load board",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}function Ve(e){return function(t){t({type:"SET_ADDING_BOARD",isAddingBoard:e})}}function qe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("cardToSave",e);var a=r.groups.find((function(e){return e.id===t})),o=a.cards.findIndex((function(t){return t.id===e.id}));a.cards.splice(o,1,e);var c={type:"UPDATE_GROUP",group:a};return Qe(c,r,n)}function Je(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_CARD_ID",cardId:e})}catch(n){console.log("Cannot set card",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Qe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var n=Object(g.a)(f.a.mark((function n(a){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Xe(e,t),a({type:"UPDATE_BOARD",board:o}),n.prev=2,e.type||(e.board=t),R.emit("board-update",{action:e,activity:r}),n.next=7,Le.save(o,r);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log("Cannot save board",n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}function Xe(e,t){var r=Object(h.a)({},t);switch(e.type){case"TOGGLE_STARRED":r.isStarred=e.isStarred;break;case"CHANGE_BOARD_STYLE":r.style=e.style,document.body.style.background=r.style.bgColor?r.style.bgColor:'no-repeat url("'.concat(r.style.imgUrl,'")'),document.body.style.backgroundSize="cover";break;case"CHANGE_TITLE":r.title=e.title;break;case"ADD_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=[].concat(Object(p.a)(r.members),[e.member]);break;case"REMOVE_BOARD_MEMBER":console.log("members from action: ",r.members),r.members=Object(p.a)(r.members.filter((function(t){return t._id!==e.memberId})));break;case"ADD_GROUP":r.groups=[].concat(Object(p.a)(r.groups),[e.group]);break;case"UPDATE_GROUP":r.groups=Object(p.a)(r.groups.map((function(t){return t.id===e.group.id?e.group:t})));break;case"REMOVE_GROUP":r.groups=Object(p.a)(r.groups.filter((function(t){return t.id!==e.group.id})))}return r}function Ye(){return Object(he.jsx)("div",{className:"overlay-screen"})}window.cs=Le;var Ke=r.p+"static/media/loader.1a7da032.svg";function Ze(){return Object(he.jsx)("div",{className:"loader",children:Object(he.jsx)("img",{src:Ke,alt:"loading..."})})}var $e=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.getStarredBoards=function(){return e.props.boards.filter((function(e){return e.isStarred}))},e.toggleStarredBoard=function(t){var r=e.props.onUpdateBoard;t.isStarred=!t.isStarred,r({type:"TOGGLE_STARRED",isStarred:t.isStarred},t),R.emit("update",!0)},e.setFavicon=function(e){var t=document.getElementById("favicon");e.imgUrl?t.href=e.imgUrl:t.href="../../public/favicon.ico"},e.setAddBoard=function(){e.props.setAddingBoard(!0)},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.getMiniUser(),console.log(t),e.next=4,this.props.loadBoards(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,r=t.boards,n=t.isAddingBoard;return r?Object(he.jsxs)("div",{className:"boards-select main-container",children:[Object(he.jsxs)("h2",{children:[" ",Object(he.jsx)(ge.a,{})," Starred Boards"]}),Object(he.jsx)("div",{className:"starred-boards",children:Object(he.jsx)(Oe,{setFavicon:this.setFavicon,boards:this.getStarredBoards(),toggleStarredBoard:this.toggleStarredBoard})}),Object(he.jsxs)("h2",{children:[" ",Object(he.jsx)(ce.a,{})," Workspace"]}),Object(he.jsxs)("div",{className:"workspace",children:[Object(he.jsx)(Oe,{boards:r,toggleStarredBoard:this.toggleStarredBoard,setFavicon:this.setFavicon}),Object(he.jsx)("div",{className:"board-preview create-board-btn",onClick:function(){return e.setAddBoard()},children:Object(he.jsx)("h4",{children:"Create New Board"})})]}),n&&Object(he.jsx)(Ye,{})]}):Object(he.jsx)(Ze,{})}}]),r}(a.a.Component);var et={loadBoards:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Le.query(e);case 3:n=t.sent,r({type:"SET_BOARDS",boards:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot load boards",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Ve,onUpdateBoard:Qe},tt=Object(i.b)((function(e){return{boards:e.boardModule.boards,isAddingBoard:e.boardModule.isAddingBoard,board:e.boardModule.currBoard,user:e.userModule.user}}),et)($e),rt=r(63),nt=r(18),at=r(17),ot=r(20),ct=r(60),st=r(115),it=function(e,t){return ee.getState().boardModule.currBoard.groups.find((function(e){return e.id===t})).cards.find((function(t){return t.id===e}))},lt=function(e){var t;return null===(t=ee.getState().boardModule.currBoard.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})))||void 0===t?void 0:t.id},dt={handleChecklistChange:function(e,t,r,n){var a=ee.getState().boardModule.currCardId,o=ee.getState().boardModule.currBoard,c=lt(a),s=it(a,c);if(t){var i=s.checklists.find((function(e){return e.id===t}));if("addTodo"===e)i.todos.push(r);else if("markTodo"===e){var l=i.todos.find((function(e){return e.id===r}));l.isDone=!l.isDone}else if("removeTodo"===e){var d=i.todos.findIndex((function(e){return e.id===r}));i.todos.splice(d,1)}else if("changeTitle"===e){var u=i.todos.find((function(e){return e.id===r}));u.title=n}else if("removeChecklist"===e){var b=s.checklists.findIndex((function(e){return e.id===t}));s.checklists.splice(b,1)}}else"addChecklist"===e&&(s.checklists||(s.checklists=[]),s.checklists.push({id:L.makeId(),title:r,todos:[]}));return[s,c,o]},handleMemberChange:function(e){var t,r,n,a=ee.getState().boardModule.currCardId,o=ee.getState().boardModule.currBoard,c=lt(a),s=it(a,c);if(s.members||(s.members=[]),null===(t=s)||void 0===t||null===(r=t.members)||void 0===r?void 0:r.some((function(t){return t._id===e})))s=Object(h.a)(Object(h.a)({},s),{},{members:null===(n=s)||void 0===n?void 0:n.members.filter((function(t){return t._id!==e}))});else{var i=o.members.find((function(t){return t._id===e}));s.members.push(i)}return[s,c,o]},getGroupId:lt,getCardById:it,handleLabelChange:function(e){var t,r,n=ee.getState().boardModule.currCardId,a=ee.getState().boardModule.currBoard,o=lt(n),c=it(n,o);if(c.labelIds||(c.labelIds=[]),null===(t=c)||void 0===t?void 0:t.labelIds.some((function(t){return t===e})))c=Object(h.a)(Object(h.a)({},c),{},{labelIds:null===(r=c)||void 0===r?void 0:r.labelIds.filter((function(t){return t!==e}))});else{var s=a.labels.find((function(t){return t.id===e}));c.labelIds.push(s.id)}return[c,o,a]},handleDueDateChange:function(e){var t=ee.getState().boardModule.currCardId,r=ee.getState().boardModule.currBoard,n=lt(t),a=it(t,n);return a.dueDate=e,[a,n,r]},getFormattedTime:function(e){if(!e)return"";var t=e-Date.now();if(t<0){var r=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getMonth()],a=r.getDate();return"".concat(n," ").concat(a," at 12:00 AM")}if(t<=864e5)return"tomorrow at 12:00 AM";var o=new Date(e),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],s=o.getDate();return"".concat(c," ").concat(s," at 12:00 AM")},getUploadTime:function(e){var t=Date.now()-e;if(t<6e4)return"Added a few seconds ago";if(t<12e4)return"Added 1 minute ago";if(t<36e5){var r=Math.floor(t/1e3/60);return"Added ".concat(r," minutes ago")}if(t<468e5){var n=Math.floor(t/1e3/60/60);return"Added ".concat(n," hours ago")}var a=new Date(e),o=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();if(t<864e5)return"Added today at ".concat(a.getHours(),":").concat(o," ");if(t<1728e5)return"Added yesterday at ".concat(a.getHours(),":").concat(o);var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=a.getDate();return"Added ".concat(c," ").concat(s," at ").concat(a.getHours(),":").concat(o)},handleFileAdd:function(e){var t=ee.getState().boardModule.currCardId,r=ee.getState().boardModule.currBoard,n=lt(t),a=it(t,n);return a.attachments||(a.attachments=[]),a.attachments.push({url:e,title:"Attachment",addedAt:Date.now()}),[a,n,r]},handleFileRemove:function(e){var t=ee.getState().boardModule.currCardId,r=ee.getState().boardModule.currBoard,n=lt(t),a=it(t,n),o=a.attachments.findIndex((function(t){return t.id===e}));return a.attachments.splice(o,1),[a,n,r]},getGroupById:function(e){return ee.getState().boardModule.currBoard.groups.find((function(t){return t.cards.find((function(t){return t.id===e}))}))},handleMoveCard:function(e,t,r){var n=ee.getState().boardModule.currBoard,a=n.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),o=it(e,a.id),c=a.cards.findIndex((function(t){return t.id===e}));return a.cards.splice(c,1),n.groups.find((function(e){return e.id===t})).cards.splice(r,0,o),n},handleCopyCard:function(e,t,r,n){var a=ee.getState().boardModule.currBoard,o=a.groups.find((function(t){return t.cards.some((function(t){return t.id===e}))})),c=it(e,o.id);return a.groups.find((function(e){return e.id===t})).cards.splice(r,0,Object(h.a)(Object(h.a)({},c),{},{id:L.makeId(),title:n})),a},handleToggleArchive:function(e){var t=ee.getState().boardModule.currBoard,r=lt(e),n=it(e,r);return n.isArchive=!n.isArchive,[n,r,t]},handleRemoveCard:function(e){var t=Object(h.a)({},ee.getState().boardModule.currBoard).groups.find((function(t){return t.cards.some((function(t){return t.id===e}))}));t.cards=t.cards.filter((function(t){return t.id!==e}))}};var ut={onUpdateBoard:Qe},bt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),ut)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,o=e.onClose,c=Object(n.useState)(null),s=Object(at.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(at.a)(d,2),b=u[0],p=u[1];Object(n.useEffect)((function(){var e=dt.getGroupById(r,t._id);l(e);var n=e.cards.findIndex((function(e){return e.id===r}));p(n+1)}),[t]);var h=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var o=t.groups.find((function(e){return e.id===a}));l(o),p(o.cards.length+1)}else"position"===n&&p(a)};return i?Object(he.jsxs)("div",{className:"move-card",children:[Object(he.jsx)("h4",{children:"Select destination"}),Object(he.jsxs)("div",{className:"select-board",children:[Object(he.jsx)("span",{className:"label",children:"Board"}),Object(he.jsx)("span",{className:"select-value",children:t.title}),Object(he.jsx)("select",{name:"board",onChange:h,children:Object(he.jsx)("option",{value:t._id,children:t.title})})]}),Object(he.jsxs)("div",{className:"flex bottom-container",children:[Object(he.jsxs)("div",{className:"select-group",children:[Object(he.jsx)("span",{className:"label",children:"List"}),Object(he.jsx)("span",{className:"select-value",children:i.title}),Object(he.jsx)("select",{name:"group",onChange:h,children:t.groups.map((function(e){return Object(he.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(he.jsxs)("div",{className:"select-position",children:[Object(he.jsx)("span",{className:"label",children:"Position"}),Object(he.jsx)("span",{className:"select-value",children:b}),Object(he.jsx)("select",{name:"position",onChange:h,children:function(){for(var e=i.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(he.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(he.jsx)("button",{className:"move-btn card-edit-btn secondary",onClick:function(){var e=i.id,t=b-1,n=dt.handleMoveCard(r,e,t);a({type:""},n),o()},children:"Move"})]}):null}));var pt={onUpdateBoard:Qe},ht=Object(i.b)((function(e){return{board:e.boardModule.currBoard,boards:e.boardModule.boards,currCardId:e.boardModule.currCardId}}),pt)((function(e){var t=e.board,r=e.currCardId,a=e.onUpdateBoard,o=e.onClose,c=Object(n.useState)(""),s=Object(at.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),u=Object(at.a)(d,2),b=u[0],p=u[1],h=Object(n.useState)(null),j=Object(at.a)(h,2),m=j[0],f=j[1];Object(n.useEffect)((function(){var e=dt.getGroupById(r,t._id),n=dt.getCardById(r,e.id);l(n.title),p(e);var a=e.cards.findIndex((function(e){return e.id===r}));f(a+1)}),[t]);var g=function(e){var r=e.target,n=r.name,a=r.value;if("group"===n){var o=t.groups.find((function(e){return e.id===a}));p(o),f(o.cards.length+1)}else"position"===n?f(a):"title"===n&&l(a)};return b?Object(he.jsxs)("div",{className:"copy-card",children:[Object(he.jsx)("label",{children:"Title"}),Object(he.jsx)("textarea",{name:"title",className:"search-input",autoFocus:!0,value:i,onChange:g}),Object(he.jsx)("label",{children:"Copy to..."}),Object(he.jsxs)("div",{className:"select-board",children:[Object(he.jsx)("span",{className:"label",children:"Board"}),Object(he.jsx)("span",{className:"select-value",children:t.title}),Object(he.jsx)("select",{name:"board",onChange:g,children:Object(he.jsx)("option",{value:t._id,children:t.title})})]}),Object(he.jsxs)("div",{className:"flex bottom-container",children:[Object(he.jsxs)("div",{className:"select-group",children:[Object(he.jsx)("span",{className:"label",children:"List"}),Object(he.jsx)("span",{className:"select-value",children:b.title}),Object(he.jsx)("select",{name:"group",onChange:g,children:t.groups.map((function(e){return Object(he.jsx)("option",{value:e.id,children:e.title},e.id)}))})]}),Object(he.jsxs)("div",{className:"select-position",children:[Object(he.jsx)("span",{className:"label",children:"Position"}),Object(he.jsx)("span",{className:"select-value",children:m}),Object(he.jsx)("select",{name:"position",onChange:g,children:function(){for(var e=b.cards.length+1,t=[],r=1;r<=e;r++)t.push(r);return t}().map((function(e,t){return Object(he.jsx)("option",{value:e,children:e},t)}))})]})]}),Object(he.jsx)("button",{className:"copy-btn card-edit-btn secondary",onClick:function(){var e=b.id,t=m-1,n=dt.handleCopyCard(r,e,t,i);a({type:""},n),o()},children:"Create card"})]}):null})),jt=r(24),mt=a.a.forwardRef((function(e,t){var r=e.onClose,a=e.title,o=e.children,c=Object(n.useRef)(),s=Object(n.useState)({width:0,height:0}),i=Object(at.a)(s,2),l=i[0],d=i[1];Object(n.useLayoutEffect)((function(){c.current&&d({width:c.current.offsetWidth,height:c.current.offsetHeight})}),[]),Object(n.useEffect)((function(){var e=function(e){var n,a=c.current;(null===a||void 0===a?void 0:a.contains(e.target))||(null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.contains(e.target))||r()};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[r,t]);return Object(he.jsxs)("div",{ref:function(e){return c.current=e},className:"dynamic-popover",style:Object(h.a)({position:"absolute"},function(){var e,r=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect();if(r){var n,a=window.innerHeight-(r.bottom+l.height)<20,o=window.innerHeight-(r.bottom+l.height)<20,c=window.innerWidth-(r.left+l.width)<100;return a?(n=a&&o?"-400%":o?"-100%":r.height+8,c?{bottom:n,right:0}:{bottom:n,left:0}):c?{top:r.height+8,right:0}:{left:0,top:r.height+8}}}()),children:[a?Object(he.jsxs)("div",{className:"popover-header",children:[Object(he.jsx)("p",{children:a}),Object(he.jsx)("span",{onClick:r,children:Object(he.jsx)(jt.b,{})})]}):Object(he.jsx)("div",{className:"relative",style:{height:16},children:Object(he.jsx)("span",{className:"close-popover-icon",onClick:r,children:Object(he.jsx)(jt.b,{})})}),Object(he.jsx)("div",{className:"popover-content",children:o})]})}));function ft(e){var t=e.Icon,r=e.title;return Object(he.jsx)("div",{children:Object(he.jsxs)("button",{className:"card-edit-btn sidebar-btn",style:Object(h.a)({position:"relative"},"Delete"===r?{backgroundColor:"#b04632",color:"#fff"}:{}),children:[Object(he.jsx)("div",{className:"list-item-layover"}),Object(he.jsxs)("div",{className:"btn-label-container flex",children:[Object(he.jsx)(t,{}),Object(he.jsx)("p",{children:r})]})]})})}function gt(e){var t=e.item,r=Object(n.useState)(!1),a=Object(at.a)(r,2),o=a[0],c=a[1],s=Object(n.useRef)(),i=Object(n.useMemo)((function(){return t.component}),[t]);return Object(he.jsx)("div",{children:Object(he.jsxs)("div",{ref:s,className:"relative ".concat(o?"popover-open":""),children:[Object(he.jsx)("span",{onClick:function(){return c(!o)},children:Object(he.jsx)(ft,{Icon:t.icon,title:t.title})}),o&&Object(he.jsx)(mt,{onClose:function(){return c(!1)},title:t.title,ref:s,children:Object(he.jsx)(i,{onClose:function(){return c(!1)}})})]})})}var vt=[{icon:ot.d,title:"Move",component:bt},{icon:ct.a,title:"Copy",component:ht},{icon:ge.c,title:"Watch"}],Ot={onUpdateCard:qe,onUpdateBoard:Qe},xt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Ot)((function(e){var t=e.currCardId,r=(e.board,e.onUpdateCard),a=(e.goBack,e.onUpdateBoard,Object(n.useState)(!1)),o=Object(at.a)(a,2),c=o[0],s=o[1];Object(n.useEffect)((function(){var e=dt.getGroupId(t),r=dt.getCardById(t,e);s(r.isArchive||!1)}),[]);var i=function(){s(!c);var e=dt.handleToggleArchive(t);r.apply(void 0,Object(p.a)(e))};return Object(he.jsx)("div",{style:{position:"relative"},children:Object(he.jsxs)("div",{className:"card-edit-actions",children:[Object(he.jsx)("h3",{className:"sidebar-title",children:"Actions"}),vt.map((function(e,t){return Object(he.jsx)(gt,{item:e},e.title+t)})),!c&&Object(he.jsx)("div",{onClick:i,children:Object(he.jsx)(ft,{Icon:st.a,title:"Archive"})}),c&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("div",{onClick:i,children:Object(he.jsx)(ft,{Icon:ot.c,title:"Send to board"})}),Object(he.jsx)("div",{children:Object(he.jsx)(ft,{Icon:ge.e,title:"Delete"})})]})]})})})),yt=r(268);function Ct(e){var t=e.member,r=e.size,n=e.style,a=void 0===n?{}:n;return Object(he.jsx)(yt.a,{name:t.fullname,src:t.imgUrl,size:function(){switch(r){case"sm":return 20;case"lg":return 50;default:return 32}}(),style:a,round:!0})}var kt={onUpdateCard:qe},wt=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),kt)((function(e){var t=e.member,r=e.currCardId,a=e.onUpdateCard,o=Object(n.useState)(!1),c=Object(at.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var e,n=dt.getGroupId(r),a=null===(e=dt.getCardById(r,n).members)||void 0===e?void 0:e.find((function(e){return e._id===t._id}));i(a)}),[r,t._id]),Object(he.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){i(!s);var e=dt.handleMemberChange(t._id),n=s?{txt:Te(t.fullname),currCardId:r}:{txt:Ue(t.fullname),currCardId:r};a.apply(void 0,Object(p.a)(e).concat([n]))},children:[Object(he.jsx)("div",{className:"list-item-layover"}),Object(he.jsx)("div",{style:{width:32},children:Object(he.jsx)(Ct,{member:t})}),Object(he.jsx)("div",{className:"popper-member-name",children:Object(he.jsx)("p",{children:t.fullname})}),s&&Object(he.jsx)("div",{className:"popper-member-check",children:Object(he.jsx)(ot.g,{})})]})})),Nt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board;return Object(he.jsxs)("div",{className:"member-list",children:[Object(he.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search..."}),Object(he.jsx)("h4",{children:"Board Members"}),Object(he.jsx)("div",{className:"flex column",children:t.members.map((function(e){return Object(he.jsx)(wt,{member:e},e._id)}))})]})})),It=r(253),St=r.n(It),Bt=(r(370),{onUpdateCard:qe}),At=Object(i.b)(null,Bt)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useState)(new Date),o=Object(at.a)(a,1)[0],c=Object(n.useState)(null),s=Object(at.a)(c,1)[0],i=Object(n.useState)(null),l=Object(at.a)(i,2),d=l[0],u=l[1],b=function(){var e=dt.handleDueDateChange(d);t.apply(void 0,Object(p.a)(e)),r()};return Object(he.jsxs)("div",{className:"date-picker",children:[Object(he.jsx)(St.a,{selected:o,onChange:function(e){u(e.getTime())},startDate:o,endDate:s,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(he.jsxs)("div",{className:"picker-btns flex column",children:[Object(he.jsx)("button",{className:"card-edit-btn secondary long",onClick:b,children:"Save"}),Object(he.jsx)("button",{className:"card-edit-btn long",onClick:function(){u(null),b()},children:"Remove"})]})]})})),Mt=r(61);var Ut={onUpdateCard:qe},Tt=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),Ut)((function(e){var t=e.label,r=e.currCardId,a=e.onUpdateCard,o=Object(n.useState)(!1),c=Object(at.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var e,n=dt.getGroupId(r),a=null===(e=dt.getCardById(r,n).labelIds)||void 0===e?void 0:e.some((function(e){return e===t.id}));i(a)}),[r,t.id]),Object(he.jsx)("div",{className:"label-preview flex",onClick:function(){i(!s);var e=dt.handleLabelChange(t.id),n=dt.getGroupId(r),o=s?{txt:_e(t.title),groupId:n}:{txt:De(t.title),groupId:n};a.apply(void 0,Object(p.a)(e).concat([o]))},children:Object(he.jsxs)("div",{className:"label-preview flex",children:[Object(he.jsxs)("div",{className:"popper-label ",style:{backgroundColor:t.color},children:[Object(he.jsxs)("span",{children:[" ",t.title||""]}),s&&Object(he.jsx)("div",{className:"popper-label-check",children:Object(he.jsx)(ot.g,{})})]}),Object(he.jsx)("div",{className:"icon-wrapper",children:Object(he.jsx)(Mt.a,{})})]})})}));var Dt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.board.labels;return Object(he.jsxs)("div",{className:"label-list-container",children:[Object(he.jsx)("input",{className:"search-input",type:"text",autoFocus:!0,placeholder:"Search labels..."}),Object(he.jsx)("h4",{children:"Labels"}),Object(he.jsx)("div",{className:"flex column label-list",children:t.map((function(e){return Object(he.jsx)(Tt,{label:e},e.id)}))})]})})),_t=r(82);var Et={onUpdateCard:qe},Rt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Et)((function(e){var t=e.onUpdateCard,r=e.onClose,a=Object(n.useRef)(),o=Object(n.useState)("Checklist"),c=Object(at.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){a.current.focus(),a.current.select()}),[]),Object(he.jsxs)("form",{className:"popover-checklist",onSubmit:function(e){e.preventDefault();var n=dt.handleChecklistChange("addChecklist",null,s),a={txt:Ee(s)};t.apply(void 0,Object(p.a)(n).concat([a])),i(""),r()},children:[Object(he.jsx)("label",{htmlFor:"checklist-title",children:"Title"}),Object(he.jsx)("input",{className:"search-input",ref:a,value:s,onChange:function(e){var t=e.target.value;i(t)}}),Object(he.jsx)("button",{className:"card-edit-btn secondary",children:"Add"})]})}));var Lt={onUpdateCard:qe},Pt=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Lt)((function(e){var t=e.onUpdateCard,r=e.onClose,n=function(e){e.preventDefault();var n=dt.handleFileAdd(e.target[0].value);t.apply(void 0,Object(p.a)(n)),r()};return Object(he.jsxs)("div",{className:"popover-attach-file",children:[Object(he.jsx)("div",{className:"attach-from",children:Object(he.jsxs)("label",{htmlFor:"upload",children:[Object(he.jsx)("span",{"aria-hidden":"true",children:"Computer"}),Object(he.jsx)("input",{type:"file",id:"upload",style:{display:"none"},onChange:n})]})}),Object(he.jsxs)("form",{onSubmit:n,className:"attach-link",children:[Object(he.jsx)("label",{children:"Attach a link"}),Object(he.jsx)("input",{className:"search-input",placeholder:"Paste any link here..."}),Object(he.jsx)("button",{className:"card-edit-btn",children:"Attach"})]})]})}));var Ft=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.item,r=e.currCardId,a=Object(n.useState)(!1),o=Object(at.a)(a,2),c=o[0],s=o[1],i=Object(n.useRef)(),l=Object(n.useMemo)((function(){return t.component}),[t]),d=dt.getGroupId(r),u=dt.getCardById(r,d);return Object(he.jsx)("div",{children:function(){var e,r;return"Cover"!==t.title||!(null===u||void 0===u||null===(e=u.style)||void 0===e?void 0:e.bgColor)&&!(null===u||void 0===u||null===(r=u.style)||void 0===r?void 0:r.imgUrl)}()&&Object(he.jsxs)("div",{ref:i,className:"relative ".concat(c?"popover-open":""),children:[Object(he.jsx)("span",{onClick:function(){return s(!c)},children:Object(he.jsx)(ft,{Icon:t.icon,title:t.title})}),c&&Object(he.jsx)(mt,{onClose:function(){return s(!1)},title:t.title,ref:i,children:Object(he.jsx)(l,{onClose:function(){return s(!1)}})})]})})})),Gt=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currCard:null,groupId:null,selectedEl:null,initialStyle:null},e.handleClick=function(t,r,n){var a;t.target.classList.add("selected"),null===(a=e.state.selectedEl)||void 0===a||a.classList.remove("selected"),e.setState({selectedEl:t.target});var o=e.props,c=o.board,s=(o.currCardId,o.onUpdateCard),i=e.state,l=i.currCard,d=i.groupId;l.style="color"===n?{bgColor:r}:{imgUrl:r},s(l,d,c)},e.handleCoverRemove=function(){var t=e.props,r=t.board,n=(t.currCardId,t.onUpdateCard),a=e.state,o=a.currCard,c=a.groupId;o.style=null,n(o,c,r)},e.handleInitialSelect=function(){},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.currCardId;console.log(e);var t=dt.getGroupId(e),r=dt.getCardById(e,t);console.log(r),this.setState({currCard:r,groupId:t})}},{key:"render",value:function(){var e=this,t=this.state.currCard;if(!t)return"";return Object(he.jsxs)("section",{className:"modal-cover-edit flex column",children:[Object(he.jsxs)("div",{className:"size-container flex column",children:[Object(he.jsx)("h4",{children:"Size"}),Object(he.jsxs)("div",{className:"size-options flex",children:[Object(he.jsx)("div",{className:"size-option"}),Object(he.jsx)("div",{className:"size-option"})]}),Object(he.jsx)("button",{className:"card-edit-btn",onClick:this.handleCoverRemove,children:"Remove cover"})]}),Object(he.jsxs)("div",{className:"flex column",children:[Object(he.jsx)("h4",{children:"Colors"}),Object(he.jsx)("div",{className:"color-container flex",children:["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#517dab","#29cce5","#6deca9","#ff8ed4","#172b4d"].map((function(t,r){return Object(he.jsx)("div",{className:"cover-color-option",style:{backgroundColor:t},onClick:function(r){return e.handleClick(r,t,"color")}},r)}))})]}),t.attachments&&Boolean(t.attachments.length)&&Object(he.jsxs)("div",{className:"flex column",children:[Object(he.jsx)("h4",{children:"Attachments"}),Object(he.jsx)("div",{className:"attachments-container flex",children:t.attachments.map((function(t){return Object(he.jsx)("div",{className:"cover-image-option",style:{backgroundImage:"url(".concat(t.url,")")},onClick:function(r){return e.handleClick(r,t.url,"img")}},t.id)}))})]})]})}}]),r}(n.Component),zt={onUpdateCard:qe},Wt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),zt)(Gt),Ht=r(35),Vt=function(){return Object(he.jsx)("div",{style:{position:"relative"},children:Object(he.jsxs)("div",{className:"add-to-card",children:[Object(he.jsx)("h3",{className:"sidebar-title",children:"Add to card"}),qt.map((function(e,t){return Object(he.jsx)(Ft,{item:e},e.title+t)}))]})})},qt=[{icon:Mt.c,title:"Members",component:Nt},{icon:ct.c,title:"Labels",component:Dt},{icon:ot.e,title:"Checklist",component:Rt},{icon:ot.j,title:"Dates",component:At},{icon:_t.b,title:"Attachment",component:Pt},{icon:Ht.a,title:"Cover",component:Wt}],Jt=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){return Object(te.a)(this,r),t.apply(this,arguments)}return Object(re.a)(r,[{key:"render",value:function(){return Object(he.jsxs)("div",{className:"sidebar",children:[Object(he.jsx)(Vt,{}),Object(he.jsx)(xt,{goBack:this.props.goBack})]})}}]),r}(n.Component),Qt={onUpdateCard:qe},Xt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),Qt)((function(e){var t=e.currCardId,r=e.onUpdateCard,a=e.board,o=Object(n.useState)(!1),c=Object(at.a)(o,2),s=c[0],i=c[1],l=Object(n.useRef)(),d=dt.getGroupId(t),u=dt.getCardById(t,d),b=null===u||void 0===u?void 0:u.dueDate,p=dt.getFormattedTime(b),h=function(){return u.isComplete?{title:"Complete",bgColor:"#61bd4f"}:b-Date.now()<0?{title:"Overdue",bgColor:"#eb5a46"}:b-Date.now()<=864e5?{title:"Due soon",bgColor:"#f2d600"}:{title:"",bgColor:""}};return Object(he.jsx)(he.Fragment,{children:b&&Object(he.jsxs)("div",{className:"due-date-container",children:[Object(he.jsx)("h3",{className:"small-title",children:"Due date"}),Object(he.jsxs)("div",{className:"due-date",children:[Object(he.jsx)("input",{type:"checkbox",className:"main-checkbox",checked:u.isComplete,onChange:function(){u.isComplete=!u.isComplete,r(u,d,a)}}),Object(he.jsxs)("div",{className:"card-edit-btn",ref:l,children:[Object(he.jsx)("span",{className:"due-date-time",children:p}),Object(he.jsx)("span",{style:{backgroundColor:h().bgColor,textTransform:"uppercase",fontSize:12,padding:"0 3px",borderRadius:2},children:h().title}),Object(he.jsx)("span",{className:"due-date-icon",children:Object(he.jsx)(ot.i,{})}),Object(he.jsx)("div",{className:"list-item-layover",onClick:function(){return i(!s)}}),s&&Object(he.jsx)(mt,{onClose:function(){return i(!1)},title:"Dates",ref:l,children:Object(he.jsx)(At,{onClose:function(){return i(!1)}})})]})]})]})})})),Yt=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t=e.currCardId,r=e.board,a=Object(n.useState)(!1),o=Object(at.a)(a,2),c=o[0],s=o[1],i=Object(n.useRef)(),l=dt.getGroupId(t),d=dt.getCardById(t,l).labelIds,u=function(e){return null===e||void 0===e?void 0:e.map((function(e){return r.labels.find((function(t){return t.id===e}))}))}(d);return Object(he.jsx)(he.Fragment,{children:(null===d||void 0===d?void 0:d.length)?Object(he.jsxs)("div",{className:"labels-container",children:[Object(he.jsx)("h3",{className:"small-title",children:"Labels"}),Object(he.jsxs)("div",{className:"labels",children:[u.map((function(e){return Object(he.jsx)("div",{className:"card-label",style:{backgroundColor:e.color},children:e.title||""},e.id)})),Object(he.jsxs)("div",{ref:i,className:"card-label add-label relative",children:[Object(he.jsx)("div",{className:"list-item-layover",onClick:function(){return s(!c)}}),Object(he.jsx)(ge.f,{}),c&&Object(he.jsx)(mt,{onClose:function(){return s(!1)},title:"Labels",ref:i,children:Object(he.jsx)(Dt,{})})]})]})]}):null})})),Kt={onUpdateCard:qe},Zt=Object(i.b)(null,Kt)((function(e){var t=e.member,r=e.onUpdateCard;return Object(he.jsxs)("div",{className:"mini-user flex column",children:[Object(he.jsxs)("div",{className:"main flex",children:[Object(he.jsx)(Ct,{size:"lg",member:t}),Object(he.jsxs)("div",{children:[Object(he.jsx)("h3",{className:"mini-user-fullname",children:t.fullname}),Object(he.jsx)("p",{children:t.username}),Object(he.jsx)("p",{children:"Edit profile info"})]})]}),Object(he.jsx)("p",{className:"remove-member",onClick:function(){var e=dt.handleMemberChange(t._id);r.apply(void 0,Object(p.a)(e))},children:"Remove from card"})]})}));function $t(e){var t=e.member,r=Object(n.useState)(!1),a=Object(at.a)(r,2),o=a[0],c=a[1],s=Object(n.useRef)();return Object(he.jsxs)("div",{className:"card-member relative",ref:s,children:[Object(he.jsxs)("span",{style:{cursor:"pointer"},children:[Object(he.jsx)("div",{className:"list-item-layover",onClick:function(){return c(!o)}}),Object(he.jsx)(Ct,{member:t})]}),o&&Object(he.jsx)(mt,{onClose:function(){return c(!1)},title:null,ref:s,children:Object(he.jsx)(Zt,{member:t})})]},t._id)}var er=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),null)((function(e){var t,r,a=e.currCardId,o=Object(n.useState)(!1),c=Object(at.a)(o,2),s=c[0],i=c[1],l=Object(n.useRef)(),d=dt.getGroupId(a);return r=dt.getCardById(a,d).members,Object(he.jsx)(he.Fragment,{children:(null===(t=r)||void 0===t?void 0:t.length)?Object(he.jsxs)("div",{className:"members-container",children:[Object(he.jsx)("h3",{className:"small-title",children:"Members"}),Object(he.jsxs)("div",{className:"members",children:[r.map((function(e){return Object(he.jsx)($t,{member:e},e._id)})),Object(he.jsxs)("div",{ref:l,className:"card-member add-member relative",children:[Object(he.jsx)("div",{className:"list-item-layover round",onClick:function(){return i(!s)}}),Object(he.jsx)(ge.f,{}),s&&Object(he.jsx)(mt,{onClose:function(){return i(!1)},title:"Members",ref:l,children:Object(he.jsx)(Nt,{})})]})]})]}):null})})),tr=function(){return Object(he.jsxs)("div",{className:"members-labels-container",children:[Object(he.jsx)(er,{}),Object(he.jsx)(Yt,{}),Object(he.jsx)(Xt,{})]})};function rr(e){var t=e.bgColor,r=e.completed,n={height:"100%",width:"".concat(r,"%"),backgroundColor:t,borderRadius:"inherit",textAlign:"right",transition:"width .5s ease-in-out"};return Object(he.jsx)("div",{className:"outer-container",style:{height:8,width:"100%",backgroundColor:"#e0e0de",borderRadius:50,margin:"10px 0 10px 0px"},children:Object(he.jsx)("div",{style:n})})}var nr=r(256),ar=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={todoTitle:"",isEditTodo:!1},e.todoTextareaRef=a.a.createRef(),e.saveTodoBtnRef=a.a.createRef(),e.handleClick=function(t){var r,n,a,o,c,s;(null===(r=e.todoTextareaRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.saveTodoBtnRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.contains(t.target))||(null===(c=e.newTodoTextarea)||void 0===c||null===(s=c.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isEditTodo:!1,todoTitle:""})},e.handleMarkTodo=function(){var t,r=dt.handleChecklistChange("markTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleRemoveTodo=function(){var t,r=dt.handleChecklistChange("removeTodo",e.props.checklistId,e.props.todo.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e.handleTitleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(nt.a)({},n,a))},e.onChangeTitle=function(t){t.preventDefault();var r=e.props,n=r.checklistId,a=r.todo,o=r.onUpdateCard,c=e.state.todoTitle,s=dt.handleChecklistChange("changeTitle",n,a.id,c);o.apply(void 0,Object(p.a)(s)),e.setState({isEditTodo:!1,todoTitle:""})},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.todo,r=this.state,n=r.isEditTodo,a=r.todoTitle;return Object(he.jsxs)("div",{className:"flex align-center todo-item",children:[Object(he.jsx)("input",{className:"main-checkbox",type:"checkbox",name:t.id,checked:t.isDone,onChange:this.handleMarkTodo,onClick:function(){return e.setState({todoTitle:t.title})},style:{alignSelf:n?"flex-start":"center"}}),n?Object(he.jsxs)("form",{onSubmit:this.onChangeTitle,style:{paddingBottom:9},children:[Object(he.jsx)("textarea",{className:"description-textarea edit-todo",onFocus:function(){return e.setState({todoTitle:t.title})},autoFocus:!0,name:"todoTitle",value:a,ref:this.todoTextareaRef,onChange:this.handleTitleChange}),Object(he.jsxs)("div",{className:"description-btns",children:[Object(he.jsx)("button",{ref:this.saveTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(he.jsx)("button",{onClick:function(){return e.setState({isEditTodo:!1,todoTitle:""})},children:Object(he.jsx)(jt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(he.jsxs)("div",{children:[Object(he.jsx)("span",{className:t.isDone?"done":"",onClick:function(){return e.setState({isEditTodo:!0})},children:t.title}),Object(he.jsx)("span",{className:"remove-todo-icon",onClick:this.handleRemoveTodo,children:Object(he.jsx)(nr.a,{})})]})]})}}]),r}(n.Component),or={onUpdateCard:qe},cr=Object(i.b)((function(e){return{currCardId:e.boardModule.currCardId}}),or)(ar),sr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={percentage:0,isAddTodo:!1,newTodo:""},e.saveTodoBtnRef=a.a.createRef(),e.addTodoBtnRef=a.a.createRef(),e.newTodoTextarea=a.a.createRef(),e.handleClick=function(t){var r,n,a,o,c,s;(null===(r=e.saveTodoBtnRef)||void 0===r||null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||(null===(a=e.addTodoBtnRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.contains(t.target))||(null===(c=e.newTodoTextarea)||void 0===c||null===(s=c.current)||void 0===s?void 0:s.contains(t.target))||e.setState({isAddTodo:!1,newTodo:""})},e.setTodoPercentage=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.checklist.todos;if((null===r||void 0===r?void 0:r.length)||(null===(t=e.props.checklist)||void 0===t?void 0:t.todos.length)){var n=r.filter((function(e){return e.isDone})),a=n.length/r.length*100,o=Number.isInteger(a)?a:a.toFixed(0);e.setState({percentage:o})}else e.setState({percentage:0})},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState(Object(nt.a)({},n,a))},e.onAddTodo=function(t){var r;t.preventDefault(),e.setState({isAddTodo:!1,newTodo:""});var n=dt.handleChecklistChange("addTodo",e.props.checklist.id,{id:L.makeId(),title:t.target[0].value,isDone:!1});(r=e.props).onUpdateCard.apply(r,Object(p.a)(n))},e.onRemoveChecklist=function(){var t,r=dt.handleChecklistChange("removeChecklist",e.props.checklist.id);(t=e.props).onUpdateCard.apply(t,Object(p.a)(r))},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick),this.props.checklist.todos&&this.setTodoPercentage()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick)}},{key:"componentDidUpdate",value:function(e){e.board!==this.props.board&&this.setTodoPercentage()}},{key:"render",value:function(){var e,t=this,r=this.props.checklist,n=this.state,a=n.percentage,o=n.isAddTodo;return Object(he.jsxs)("section",{className:"checklist-preview flex column",children:[Object(he.jsxs)("section",{className:"flex space-between",children:[Object(he.jsxs)("div",{className:"card-edit-title",children:[Object(he.jsx)("span",{children:Object(he.jsx)(ot.e,{})}),Object(he.jsx)("h3",{children:r.title})]}),Object(he.jsx)("button",{className:"card-edit-btn",onClick:this.onRemoveChecklist,children:"Delete"})]}),Object(he.jsxs)("div",{className:"flex align-center",children:[Object(he.jsxs)("span",{style:{fontSize:11,width:32,maxWidth:32,minWidth:32},children:[a,"%"]}),Object(he.jsx)(rr,{completed:a,bgColor:100===a?"#61bd4f":"#5ba4cf"})]}),null===(e=r.todos)||void 0===e?void 0:e.map((function(e){return Object(he.jsx)("div",{className:"todos-container",children:Object(he.jsx)(cr,{todo:e,checklistId:r.id})},e.id)})),o?Object(he.jsxs)("form",{onSubmit:this.onAddTodo,children:[Object(he.jsx)("textarea",{rows:"2",className:"description-textarea add-todo",ref:this.newTodoTextarea,autoFocus:!0,name:"newTodo",placeholder:"Add an item",onChange:this.handleInputChange}),Object(he.jsxs)("div",{className:"description-btns add-todo-btns",children:[Object(he.jsx)("button",{ref:this.addTodoBtnRef,className:"card-edit-btn secondary",children:"Save"}),Object(he.jsx)("button",{onClick:function(){return t.setState({isAddTodo:!1,newTodo:""})},children:Object(he.jsx)(jt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]}):Object(he.jsx)("button",{className:"card-edit-btn add-todo-btn",style:{alignSelf:"flex-start"},onClick:function(){return t.setState({isAddTodo:!0})},children:"Add an item"})]})}}]),r}(n.Component),ir={onUpdateCard:qe},lr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),ir)(sr),dr=r(257),ur=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={currCard:{},isDescriptionOpen:!1},e.descriptionRef=a.a.createRef(),e.setDescriptionTextarea=function(){e.setState({isDescriptionOpen:!e.state.isDescriptionOpen})},e.handleDescriptionChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=dt.getGroupId(e.props.currCardId),a={txt:Ae(),card:t,groupId:n};e.props.onUpdateCard(t,n,r,a)},e.handleInputChange=function(t){var r=t.target.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},{description:r})})},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=dt.getGroupId(this.props.currCardId),t=dt.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.currCard,n=t.isDescriptionOpen;return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("div",{className:"description-container card-edit-title",children:[Object(he.jsx)("span",{children:Object(he.jsx)(jt.c,{})}),Object(he.jsx)("h3",{children:"Description"}),r.description&&!n&&Object(he.jsx)("button",{className:"card-edit-btn",onClick:function(){e.setDescriptionTextarea(),e.descriptionRef.current.focus()},children:" Edit"})]}),Object(he.jsxs)("div",{className:"card-description",children:[Object(he.jsx)("textarea",{ref:this.descriptionRef,className:"description-textarea ".concat(n?"open":""," ").concat(r.description?"filled":""),rows:n?"6":"3",onFocus:this.setDescriptionTextarea,onBlur:function(){e.setDescriptionTextarea(),e.handleDescriptionChange()},value:r.description,onChange:this.handleInputChange,placeholder:"Add a more detailed description..."}),n&&Object(he.jsxs)("div",{className:"description-btns",children:[Object(he.jsx)("button",{className:"card-edit-btn secondary",onClick:function(){return e.handleDescriptionChange()},children:"Save"}),Object(he.jsx)("button",{onClick:this.setDescriptionTextarea,children:Object(he.jsx)(jt.b,{style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})]})}}]),r}(n.Component),br={onUpdateCard:qe},pr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),br)(ur),hr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){return Object(te.a)(this,r),t.apply(this,arguments)}return Object(re.a)(r,[{key:"render",value:function(){return Object(he.jsxs)("section",{className:"flex space-between",children:[Object(he.jsxs)("div",{className:"card-edit-title",children:[Object(he.jsx)("span",{children:Object(he.jsx)(ct.b,{})}),Object(he.jsx)("h3",{children:"Activity"})]}),Object(he.jsx)("button",{className:"card-edit-btn",children:"Show details"})]})}}]),r}(n.Component);var jr={onUpdateCard:qe},mr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),jr)((function(e){var t=e.attachment,r=e.currCardId,n=e.board,a=e.onUpdateCard,o=dt.getGroupId(r),c=dt.getCardById(r,o),s=dt.getUploadTime(t.addedAt);return Object(he.jsxs)("div",{className:"attachment-preview flex",children:[Object(he.jsx)("div",{className:"image-container",children:Object(he.jsx)("img",{src:t.url,alt:t.title})}),Object(he.jsxs)("div",{className:"right-section flex column",children:[Object(he.jsx)("span",{className:"attachment-title",children:t.title}),Object(he.jsxs)("div",{className:"middle-line",children:[Object(he.jsx)("span",{children:s}),"-",Object(he.jsx)("span",{children:"Comment"}),"-",Object(he.jsx)("span",{onClick:function(){var e=dt.handleFileRemove(t.id);a.apply(void 0,Object(p.a)(e))},children:"Delete"}),"-",Object(he.jsx)("span",{children:"Edit"})]}),Object(he.jsxs)("div",{className:"attachment-cover",children:[Object(he.jsx)("span",{children:Object(he.jsx)(Ht.a,{})}),Object(he.jsx)("span",{onClick:function(){var e;(null===c||void 0===c||null===(e=c.style)||void 0===e?void 0:e.imgUrl)===t.url?c.style=null:c.style={imgUrl:t.url},a(c,o,n)},children:function(){var e;return(null===c||void 0===c||null===(e=c.style)||void 0===e?void 0:e.imgUrl)===t.url}()?"Remove cover":"Make cover"})]})]})]})})),fr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currCard:{}},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=dt.getGroupId(this.props.currCardId),t=dt.getCardById(this.props.currCardId,e);this.setState({currCard:t})}},{key:"render",value:function(){var e,t=this.state.currCard;return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("div",{className:"attachment-container card-edit-title",children:[Object(he.jsx)("span",{children:Object(he.jsx)(_t.b,{})}),Object(he.jsx)("h3",{children:"Attachments"})]}),Object(he.jsx)("div",{className:"card-attachments",children:null===t||void 0===t||null===(e=t.attachments)||void 0===e?void 0:e.map((function(e,t){return Object(he.jsx)(mr,{attachment:e},e.title+t)}))})]})}}]),r}(n.Component),gr={onUpdateCard:qe},vr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,currCardId:e.boardModule.currCardId}}),gr)(fr),Or=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={currCard:null,currGroup:null,isOpen:!1},e.modalRef=a.a.createRef(),e.coverRef=a.a.createRef(),e.handleLoad=function(){var t,r,n=e.props.match.params,a=n.cardId,o=n.groupId;console.log("39",a),e.props.onSetCardId(a),e.props.board.groups&&(t=e.getDataById(a,o).currentCard,r=e.getDataById(a,o).currentGroup),e.setState({currCard:t,currGroup:r})},e.getDataById=function(t,r){var n=e.props.board.groups.find((function(e){return e.id===r})),a=n.cards.find((function(e){return e.id===t}));return{currentGroup:n,currentCard:a}},e.handleInputChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState({currCard:Object(h.a)(Object(h.a)({},e.state.currCard),{},Object(nt.a)({},n,a))})},e.handlePropertyChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currCard,r=e.props.board,n=e.props.match.params.groupId;e.props.onUpdateCard(t,n,r)},e.checkCardBackground=function(){var t=e.state.currCard;if(t.style)return t.style.bgColor?{backgroundColor:t.style.bgColor,minHeight:116,height:116}:t.style.imgUrl?{background:"center / contain no-repeat url(".concat(t.style.imgUrl,")"),objectFit:"cover",minHeight:160,height:160}:void 0},e.goBack=function(){e.props.history.goBack()},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){this.handleLoad()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){e.board!==this.props.board&&this.handleLoad()}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.currCard,a=r.currGroup,o=this.props.board;if(!n)return Object(he.jsx)(Ze,{});var c=this.checkCardBackground();return Object(he.jsxs)("div",{className:"edit-modal-container",children:[Object(he.jsx)(s.b,{to:"/board/".concat(o._id),children:Object(he.jsx)(Ye,{})}),Object(he.jsxs)("section",{className:"card-edit",ref:this.modalRef,children:[n.style&&Object(he.jsx)("div",{className:"card-edit-bg",style:c}),Object(he.jsx)(s.b,{to:"/board/".concat(o._id),children:Object(he.jsx)("button",{className:"close-modal-btn",children:Object(he.jsx)(jt.b,{})})}),n.style&&Object(he.jsxs)("div",{ref:this.coverRef,className:"btn-wrapper relative",children:[Object(he.jsxs)("button",{className:"change-cover-btn",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},children:[Object(he.jsx)("span",{className:"cover-icon",children:Object(he.jsx)(dr.a,{})}),Object(he.jsx)("span",{children:"Cover"})]}),this.state.isOpen&&Object(he.jsx)(mt,{onClose:function(){return t.setState({isOpen:!1})},title:"Cover",ref:this.coverRef,children:Object(he.jsx)(Wt,{onClose:function(){return t.setState({isOpen:!1})}})})]}),n.isArchive&&Object(he.jsxs)("div",{className:"archive-msg",children:[Object(he.jsx)("span",{children:Object(he.jsx)(ot.a,{})}),Object(he.jsx)("p",{children:"This card is archived"})]}),Object(he.jsxs)("div",{className:"card-edit-header card-title-container",children:[Object(he.jsx)("span",{children:Object(he.jsx)(Ht.a,{})}),Object(he.jsx)("input",{className:"title-input",type:"text",value:n.title,name:"title",onChange:this.handleInputChange,onBlur:function(){return t.handlePropertyChange()}})]}),Object(he.jsx)("div",{className:"list-name-container",children:Object(he.jsxs)("p",{children:["in list ",Object(he.jsx)("span",{className:"list-name",children:a.title})]})}),Object(he.jsxs)("div",{className:"card-edit-main-container flex",children:[Object(he.jsxs)("div",{className:"card-edit-main",children:[Object(he.jsx)(tr,{}),Object(he.jsx)(pr,{}),n.attachments&&n.attachments.length>0&&Object(he.jsx)(vr,{}),null===(e=n.checklists)||void 0===e?void 0:e.map((function(e){return Object(he.jsx)("div",{className:"checklists-container flex column",children:Object(he.jsx)(lr,{checklist:e,currCard:n,handlePropertyChange:t.handlePropertyChange})},e.id)})),Object(he.jsx)(hr,{})]}),Object(he.jsx)(Jt,{goBack:this.goBack})]})]})]})}}]),r}(n.Component),xr={onUpdateCard:qe,onSetCardId:Je},yr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),xr)(Or),Cr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={newItem:{title:""}},e.handleChange=function(t){var r=t.target,n=e.state.newItem;n[r.name]=r.value,e.setState({newItem:n})},e.onKeyUpEnter=function(t){"Enter"===t.key&&e.onAddItem(t)},e.onAddItem=function(t){t.preventDefault();var r=e.state.newItem;if(r.title){if(r.id=L.makeId(),"group"===e.props.type){r.cards||(r.cards=[]);var n={txt:xe(r.title)},a={type:"ADD_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)}else if("card"===e.props.type){var o=Object(h.a)(Object(h.a)({},r),{},{isComplete:!1}),c={txt:ye(o.title),card:o,groupId:e.props.groupId};e.props.onAddCard(o,e.props.groupId,e.props.board,c)}e.setState({newItem:{title:""}})}},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.textInput.focus();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.newItem.title,r=this.props.onToggleAddPop,n="card"===this.props.type?this.props.type:"list";return Object(he.jsx)("section",{className:"add-board-item",children:Object(he.jsxs)("form",{onSubmit:this.onAddItem,onKeyUp:this.onKeyUpEnter,children:[Object(he.jsx)("textarea",{placeholder:"Enter a title for this ".concat(n),ref:function(t){e.textInput=t},value:t,name:"title",onChange:this.handleChange,onBlur:this.onAddItem}),Object(he.jsxs)("div",{className:"form-btns flex align-center",children:[Object(he.jsxs)("button",{type:"submit",children:["Add ",n]}),Object(he.jsx)("button",{onClick:r,children:Object(he.jsx)(jt.b,{className:"icon",style:{color:"#42526e",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})})}}]),r}(a.a.Component);var kr={onUpdateBoard:Qe,onUpdateCard:qe,onAddCard:function(e,t,r,n){var a=r.groups.find((function(e){return e.id===t}));return e=Object(h.a)(Object(h.a)({},e),{},{createdAt:Date.now(),isComplete:!1}),a.cards=a.cards?[].concat(Object(p.a)(a.cards),[e]):[e],Qe({type:"UPDATE_GROUP",group:a},r,n)}},wr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),kr)(Cr),Nr=r(120);function Ir(e){var t=e.cardStyle;return Object(he.jsxs)("div",{className:"card-preview-header",children:[t.bgColor&&Object(he.jsx)("div",{className:"header-color",style:{backgroundColor:t.bgColor}}),t.imgUrl&&Object(he.jsx)("div",{className:"image-wrapper",children:Object(he.jsx)("img",{src:t.imgUrl})})]})}function Sr(e){var t=e.labelIds,r=e.getLabel,n=e.isCardLabelListOpen;return Object(he.jsx)("ul",{className:"label-bar-list flex clean-list ".concat(n?"open":"close"),children:t.map((function(e){var t=r(e);return Object(he.jsx)("li",{className:"label-bar",style:{backgroundColor:t.color},children:n&&t.title&&Object(he.jsx)("span",{children:t.title})},t.id)}))})}var Br=r(38),Ar=r(258);function Mr(e){var t=e.checklists;return Object(he.jsxs)("div",{className:"checklist-box flex align-center",children:[Object(he.jsx)(ot.h,{}),Object(he.jsx)("span",{children:function(){var e=0,r=0;return t.forEach((function(t){t.todos.forEach((function(t){e++,t.isDone&&r++}))})),r+"/"+e}()})]})}function Ur(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(he.jsxs)("div",{className:"due-date-box flex align-center",style:function(e){return e.isComplete?{backgroundColor:"#61BD4F"}:e.dueDate-Date.now()>0&&e.dueDate-Date.now()<864e5?{backgroundColor:"#F2D600"}:e.dueDate-Date.now()<0?{backgroundColor:"#EB5A46"}:{backgroundColor:"inherit",color:"unset"}}(t),onClick:function(e){return n(e,r,t)},children:[Object(he.jsx)("span",{className:"clock-icon flex align-center",children:Object(he.jsx)(_t.a,{})}),Object(he.jsx)("span",{className:"check-icon",children:t.isComplete?Object(he.jsx)(Br.b,{color:"inherit"}):Object(he.jsx)(Br.a,{})}),Object(he.jsx)("span",{children:function(e){var t=new Date(e),r=t.getDate();return t.toLocaleString("en",{month:"short"})+" "+r}(t.dueDate)})]})}function Tr(e){var t=e.card,r=e.groupId,n=e.toggleCardComplete;return Object(he.jsxs)("div",{className:"card-preview-footer flex align-center",children:[t.dueDate&&Object(he.jsx)(Ur,{card:t,groupId:r,toggleCardComplete:n}),t.description&&Object(he.jsx)(Br.d,{title:"This card has a description"}),t.attachments&&t.attachments.length>0&&Object(he.jsxs)("div",{className:"attachment-box flex align-center",children:[Object(he.jsx)("span",{className:"flex align-center",children:Object(he.jsx)(Ar.a,{})}),Object(he.jsx)("span",{children:t.attachments.length})]}),t.checklists&&Object(he.jsx)(Mr,{checklists:t.checklists}),t.members&&Object(he.jsx)("div",{className:"card-members-list flex",children:t.members.map((function(e,t){return Object(he.jsx)(Ct,{member:e,size:"md"},t)}))})]})}var Dr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))((function(e){var t=e.card,r=e.groupId,n=e.openCardEdit,a=e.isCardLabelListOpen,o=e.toggleCardLabelList,c=e.toggleCardComplete,s=e.onToggleQuickCardEditor,i=e.index,l=e.getLabel;return Object(he.jsx)("div",{className:"card-wrapper",style:{display:t.isArchive?"none":"unset"},children:Object(he.jsx)(rt.b,{draggableId:t.id,index:i,children:function(e){return Object(he.jsx)("li",Object(h.a)(Object(h.a)(Object(h.a)({ref:e.innerRef},e.dragHandleProps),e.draggableProps),{},{children:Object(he.jsxs)("div",{className:"card-preview flex space-between",onClick:function(){return n(r,t.id)},children:[Object(he.jsx)("button",{className:"hover-edit-btn",onClick:function(e){return s(e,t,r)},children:Object(he.jsx)(Nr.b,{})}),t.style&&Object(he.jsx)(Ir,{cardStyle:t.style}),Object(he.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(he.jsx)("div",{onClick:o,children:Object(he.jsx)(Sr,{labelIds:t.labelIds,getLabel:l,isCardLabelListOpen:a})}),Object(he.jsx)("p",{children:t.title}),Object(he.jsx)(Tr,{card:t,groupId:r,toggleCardComplete:c})]})]})}))}})})}));function _r(e){var t=e.groupId,r=e.onToggleAddPop,n=e.toggleGroupArchive;return Object(he.jsxs)("div",{className:"group-actions flex column",children:[Object(he.jsx)("button",{onClick:r,children:"Add card..."}),Object(he.jsx)("button",{onClick:function(){return n(t)},children:"Archive this list..."})]})}var Er=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isAddPopOpen:!1,groupTitle:"",isPopoverOpen:!1},e.groupEditRef=a.a.createRef(),e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(nt.a)({},n,a))}))},e.onChangeGroupTitle=function(){var t=e.props.group;t.title=e.state.groupTitle;var r={type:"UPDATE_GROUP",group:t},n={txt:Me(t.title)};e.props.updateBoard(r,n)},e.blurFocus=function(e){e.target.blur()},e.setFocus=function(e){e.target.focus()},e.handleFocus=function(e){e.target.select()},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"componentDidUpdate",value:function(e){e.group!==this.props.group&&this.setState(Object(h.a)(Object(h.a)({},this.state),{},{groupTitle:this.props.group.title}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.group,n=t.openCardEdit,a=t.toggleCardLabelList,o=t.isCardLabelListOpen,c=t.index,s=t.toggleCardComplete,i=t.toggleGroupArchive,l=t.onToggleQuickCardEditor,d=t.getLabel,u=this.state,b=u.isAddPopOpen,p=u.groupTitle,j=u.isPopoverOpen;return Object(he.jsx)("div",{className:"group-wrapper",style:{display:r.isArchive?"none":"unset"},children:Object(he.jsx)(rt.b,{draggableId:r.id,index:c,children:function(t,c){return Object(he.jsxs)("div",Object(h.a)(Object(h.a)(Object(h.a)({className:"group-preview flex column"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:[Object(he.jsxs)("div",{className:"group-header flex space-between align-center",children:[Object(he.jsx)("input",{className:"clean-input",type:"text",value:p,name:"groupTitle",onMouseDown:e.blurFocus,onMouseUp:e.setFocus,onChange:e.handleChange,onBlur:e.onChangeGroupTitle}),Object(he.jsxs)("div",{className:"relative",ref:e.groupEditRef,onClick:function(){return e.setState({isPopoverOpen:!j})},children:[Object(he.jsx)("button",{children:Object(he.jsx)(ot.k,{})}),j&&Object(he.jsx)(mt,{onClose:function(){return e.setState({isPopoverOpen:!1})},ref:e.groupEditRef,title:"List actions",children:Object(he.jsx)(_r,{groupId:r.id,onToggleAddPop:e.onToggleAddPop,toggleGroupArchive:i})})]})]}),Object(he.jsx)(rt.c,{droppableId:r.id,children:function(t){return Object(he.jsxs)("ul",Object(h.a)(Object(h.a)({className:"card-list clean-list"},t.droppableProps),{},{ref:t.innerRef,children:[r.cards&&r.cards.map((function(e,t){return Object(he.jsx)(Dr,{card:e,index:t,groupId:r.id,openCardEdit:n,toggleCardLabelList:a,isCardLabelListOpen:o,toggleCardComplete:s,onToggleQuickCardEditor:l,getLabel:d},e.id)})),t.placeholder,b&&Object(he.jsx)(wr,{onToggleAddPop:e.onToggleAddPop,type:"card",groupId:r.id})]}))}}),!b&&Object(he.jsx)("div",{className:"group-footer flex space-between align-center",children:Object(he.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(he.jsx)("i",{className:"flex align-center",children:Object(he.jsx)(ge.f,{})}),Object(he.jsx)("span",{children:"Add a card"})]})})]}))}})})}}]),r}(n.Component);function Rr(e){var t=e.groups,r=e.openCardEdit,n=e.updateBoard,a=e.toggleCardLabelList,o=e.isCardLabelListOpen,c=e.toggleCardComplete,s=e.toggleGroupArchive,i=e.onToggleQuickCardEditor,l=e.getLabel;return Object(he.jsx)("ul",{className:"group-list clean-list flex",children:t.map((function(e,t){return Object(he.jsx)(Er,{index:t,group:e,openCardEdit:r,updateBoard:n,toggleCardLabelList:a,isCardLabelListOpen:o,toggleCardComplete:c,toggleGroupArchive:s,onToggleQuickCardEditor:i,getLabel:l},e.id)}))})}var Lr=r(261),Pr=r(260),Fr=r(70),Gr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.getMembersIds=function(){return e.props.board.members.map((function(e){return e._id}))},e.inviteToBoard=function(t){var r=e.props,n=r.board,a=r.onUpdateBoard,o=e.getMembersIds(),c={_id:t._id,fullname:t.fullname,imgUrl:t.imgUrl};o.includes(c._id)||(a({type:"ADD_BOARD_MEMBER",member:c},n,{txt:ke(t.fullname)}),console.log(n.members))},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(nt.a)({},r,n)))},e}return Object(re.a)(r,[{key:"render",value:function(){var e=this,t=this.state.search,r=this.props.users,n=this.getMembersIds(),a=r.filter((function(e){return!n.includes(e._id)}));return Object(he.jsxs)("div",{className:"invite-members",children:[Object(he.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"search",value:t,autoFocus:!0,placeholder:"Search..."}),Object(he.jsx)("ul",{className:"member-list clean-list",children:a.filter((function(e){return e.fullname.includes(t)})).map((function(t){return Object(he.jsxs)("li",{className:"user-preview",onClick:function(){return e.inviteToBoard(t)},children:[Object(he.jsxs)("div",{className:"user-details",children:[Object(he.jsx)(Ct,{member:t}),Object(he.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(he.jsx)("span",{children:n.includes(t._id)?Object(he.jsx)(Fr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var zr={onUpdateBoard:Qe},Wr=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),zr)(Gr),Hr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setBoardBG=function(t){var r=e.props,n=r.board;(0,r.onUpdateBoard)({type:"CHANGE_BOARD_STYLE",style:"#"===t[0]?{bgColor:t}:{imgUrl:t}},n,{txt:we()})},e}return Object(re.a)(r,[{key:"render",value:function(){var e=this;return Object(he.jsxs)("div",{className:"change-bg",children:[Object(he.jsx)("div",{className:"images",children:["https://images.pexels.com/photos/1914982/pexels-photo-1914982.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/844297/pexels-photo-844297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3293148/pexels-photo-3293148.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/911738/pexels-photo-911738.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3274903/pexels-photo-3274903.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2170473/pexels-photo-2170473.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2529973/pexels-photo-2529973.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1982485/pexels-photo-1982485.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1408221/pexels-photo-1408221.jpeg?cs=srgb&dl=pexels-irina-iriser-1408221.jpg&fm=jpg"].map((function(t,r){return Object(he.jsx)("div",{className:"img-container",onClick:function(){return e.setBoardBG(t)},children:Object(he.jsx)("img",{src:t,alt:t})},r)}))}),Object(he.jsx)("hr",{}),Object(he.jsx)("div",{className:"colors",children:["#82E0AA","#F1948A","#AAB7B8 ","#C39BD3","#85C1E9","#F8C471"].map((function(t,r){return Object(he.jsx)("div",{style:{backgroundColor:"".concat(t)},className:"color-container",onClick:function(){return e.setBoardBG(t)}},r)}))})]})}}]),r}(a.a.Component);var Vr={onUpdateBoard:Qe},qr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),Vr)(Hr),Jr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){return Object(te.a)(this,r),t.apply(this,arguments)}return Object(re.a)(r,[{key:"render",value:function(){var e=this.props.board;return Object(he.jsx)("div",{className:"icon",style:e.style.bgColor?{backgroundColor:e.style.bgColor}:{},children:e.style.imgUrl&&Object(he.jsx)("img",{src:e.style.imgUrl,alt:""})})}}]),r}(a.a.Component);var Qr=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(Jr),Xr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{txt:"",members:[],labels:[]}},e.updateUrlSearchParams=function(t){var r=e.props,n=r.history,a=r.location,o=Object(h.a)({},t);for(var c in o){var s=o[c];(!s||Array.isArray(s)&&!s.length)&&delete o[c]}var i=new URLSearchParams(o);n.replace("".concat(a.pathname,"?").concat(i.toString()))},e.handleChange=function(t){var r=t.target.name,n=t.target.value,a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},Object(nt.a)({},r,n));e.props.onUpdateFilter(a)},e.getFilteredBoard=L.debounce((function(){var t=Object(h.a)({},e.props.filterBy);for(var r in t){var n=t[r];(!n||Array.isArray(n)&&!n.length)&&delete t[r]}e.props.loadBoard(e.props.match.params.boardId,t)}),100),e.handleUserClick=function(t){if(e.props.filterBy.members.includes(t._id)){var r=e.props.filterBy.members.findIndex((function(e){return e===t._id}));e.props.filterBy.members.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:Object(p.a)(e.props.filterBy.members)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{members:[].concat(Object(p.a)(e.props.filterBy.members),[t._id])});e.props.onUpdateFilter(a)}},e.handleLabelClick=function(t){if(e.props.filterBy.labels.includes(t.id)){var r=e.props.filterBy.labels.findIndex((function(e){return e===e}));e.props.filterBy.labels.splice(r,1);var n=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:Object(p.a)(e.props.filterBy.labels)});e.props.onUpdateFilter(n)}else{var a=Object(h.a)(Object(h.a)({},e.props.filterBy),{},{labels:[].concat(Object(p.a)(e.props.filterBy.labels),[t.id])});e.props.onUpdateFilter(a)}},e}return Object(re.a)(r,[{key:"componentDidUpdate",value:function(e){var t=e.filterBy,r=this.props.filterBy;t!==r&&(this.updateUrlSearchParams(r),this.getFilteredBoard.bind(this)())}},{key:"componentWillUnmount",value:function(){this.props.onUpdateFilter({txt:"",members:[],labels:[]}),this.updateUrlSearchParams(this.props.filterBy),this.getFilteredBoard.bind(this)()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.props.filterBy;return Object(he.jsxs)("div",{className:"search-cards",children:[Object(he.jsx)("input",{className:"search-input",type:"text",onChange:this.handleChange,name:"txt",value:r.txt,autoFocus:!0,placeholder:"Search..."}),Object(he.jsx)("p",{className:"search-desc",children:"Search by term, label, member, or due time"}),Object(he.jsx)("hr",{}),Object(he.jsx)("ul",{className:"label-list clean-list",children:t.labels.map((function(t){return Object(he.jsxs)("li",{className:"label-preview",onClick:function(){return e.handleLabelClick(t)},children:[Object(he.jsxs)("div",{className:"label-details",children:[Object(he.jsx)("div",{className:"label-color",style:{backgroundColor:t.color}}),Object(he.jsx)("p",{children:t.title})]}),Object(he.jsx)("span",{children:r.labels.includes(t.id)?Object(he.jsx)(Fr.a,{}):""})]},t.id)}))}),Object(he.jsx)("hr",{}),Object(he.jsx)("ul",{className:"member-list clean-list",children:t.members.map((function(t){return Object(he.jsxs)("li",{className:"user-preview",onClick:function(){return e.handleUserClick(t)},children:[Object(he.jsxs)("div",{className:"user-details",children:[Object(he.jsx)(Ct,{member:t}),Object(he.jsx)("span",{className:"user-name",children:t.fullname})]}),Object(he.jsx)("span",{children:r.members.includes(t._id)?Object(he.jsx)(Fr.a,{}):""})]},t._id)}))})]})}}]),r}(a.a.Component);var Yr={onUpdateFilter:function(e){return function(t){t({type:"UPDATE_FILTER",filterBy:e})}},loadBoard:He},Kr=Object(i.b)((function(e){return{board:e.boardModule.currBoard,filterBy:e.boardModule.filterBy}}),Yr)(Object(oe.f)(Xr)),Zr=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){return Object(te.a)(this,r),t.apply(this,arguments)}return Object(re.a)(r,[{key:"render",value:function(){return Object(he.jsx)("div",{children:Object(he.jsx)("p",{children:"Archive"})})}}]),r}(a.a.Component);var $r=Object(i.b)((function(e){return{board:e.boardModule.currBoard,filterBy:e.boardModule.filterBy}}))(Zr),en=r(259),tn=r.n(en),rn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getGroupTitle=function(t){return e.props.board.groups.find((function(e){return e.id===t})).title},e}return Object(re.a)(r,[{key:"render",value:function(){var e=this,t=this.props.board;return 0===t.activities.length?Object(he.jsxs)("div",{className:"activity",children:[Object(he.jsxs)("div",{className:"activity-header",children:[Object(he.jsx)(Br.c,{}),Object(he.jsx)("p",{children:"Activity"})]}),Object(he.jsx)("p",{children:"No Activities in this board yet"})]}):Object(he.jsxs)("div",{className:"activity",children:[Object(he.jsxs)("div",{className:"activity-header",children:[Object(he.jsx)(Br.c,{}),Object(he.jsx)("p",{children:"Activity"})]}),Object(he.jsx)("ul",{className:"activity-list clean-list",children:t.activities.map((function(r){return Object(he.jsxs)("li",{className:"activity-preview",children:[Object(he.jsx)("span",{className:"member-avatar",children:Object(he.jsx)(Ct,{member:r.byMember})}),Object(he.jsxs)("div",{className:"activity-text",children:[Object(he.jsxs)("span",{className:"user-fullname",children:[r.byMember.fullname," "]}),Object(he.jsx)("p",{children:r.txt}),r.groupId&&Object(he.jsxs)(s.b,{to:"/board/".concat(t._id,"/").concat(r.groupId,"/").concat(r.card.id),children:[" ",r.card.title]}),r.groupId&&Object(he.jsxs)("p",{children:["in list: ",e.getGroupTitle(r.groupId)]}),Object(he.jsx)(tn.a,{className:"publish-time",fromNow:!0,children:r.createdAt})]})]},r.id)}))})]})}}]),r}(a.a.Component);var nn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(rn),an=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currViewIdx:-1},e._cmpsToRender=[{id:"c101",title:"Change Background",icon:Object(he.jsx)(Qr,{}),component:qr},{id:"c102",title:"Search Cards",icon:Object(he.jsx)(Mt.b,{}),component:Kr},{id:"c103",title:"Archive - Under Construction \ud83d\udea7",icon:Object(he.jsx)(ot.b,{}),component:$r}],e.onSelectView=function(t){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:t})}))},e.getViewById=function(){var t=e.state.currViewIdx,r=e._cmpsToRender[t];return console.log("selected view: ",r),r.component},e.onBack=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))},e._CurrView=function(t){var r=e._cmpsToRender[e.state.currViewIdx].component;return Object(he.jsx)(r,Object(h.a)({},t))},e._DefaultView=function(){return Object(he.jsxs)("div",{children:[Object(he.jsx)("ul",{className:"default-menu clean-list",children:e._cmpsToRender.map((function(t,r){return Object(he.jsxs)("li",{onClick:function(){return e.onSelectView(r)},children:[Object(he.jsx)("div",{className:"icon",children:t.icon}),Object(he.jsx)("p",{children:t.title})]},t.id)}))}),Object(he.jsx)("hr",{}),Object(he.jsx)(nn,{})]})},e}return Object(re.a)(r,[{key:"componentWillUnmount",value:function(){this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{currViewIdx:-1})}))}},{key:"render",value:function(){var e=this,t=this.props.onClose,r=this.state.currViewIdx;return Object(he.jsxs)("div",{className:"side-menu ".concat(this.props.isMenuOpen?"menu-open":""),children:[Object(he.jsxs)("div",{className:"title",children:[Object(he.jsx)("span",{className:"back-btn ".concat(-1!==r?"show-btn":""," "),onClick:function(){return e.onBack()},children:Object(he.jsx)(jt.a,{})}),Object(he.jsx)("p",{className:"menu-title",children:-1===r?"Menu":this._cmpsToRender[r].title}),Object(he.jsx)("span",{className:"close-btn",onClick:t,children:Object(he.jsx)(jt.b,{})})]}),Object(he.jsx)("hr",{}),Object(he.jsx)("div",{className:"rendered-cmp",children:-1===r?Object(he.jsx)(this._DefaultView,{}):Object(he.jsx)(this._CurrView,{})})]})}}]),r}(a.a.Component);var on=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(an);var cn={onUpdateBoard:Qe},sn=Object(i.b)((function(e){return{users:e.userModule.users,board:e.boardModule.currBoard}}),cn)((function(e){var t=e.members,r=e.board,a=e.onUpdateBoard,o=e.onClose;Object(n.useEffect)((function(){return function(){o()}}),[o]);return Object(he.jsx)("div",{className:"member-list",style:{color:"#172b4d"},children:t.map((function(e){return Object(he.jsxs)("div",{className:"popper-member-preview flex",onClick:function(){return t=e._id,void a({type:"REMOVE_BOARD_MEMBER",memberId:t},r);var t},children:[Object(he.jsx)("div",{className:"list-item-layover"}),Object(he.jsx)("div",{style:{width:32},children:Object(he.jsx)(Ct,{member:e})}),Object(he.jsx)("div",{className:"popper-member-name",children:Object(he.jsx)("p",{children:e.fullname})}),Object(he.jsx)("div",{className:"popper-member-check",children:Object(he.jsx)(Fr.a,{})})]},e._id)}))})})),ln=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isInviteOpen:!1,rect:null,element:null,boardTitle:e.props.board.title,isMenuOpen:!1,numOfShownMembers:7,isMembersOpen:!1},e.inviteRef=a.a.createRef(),e.membersRef=a.a.createRef(),e.handleResize=function(){var t=e.state.numOfShownMembers;if(window.innerWidth<800){if(3===t)return;e.setState({numOfShownMembers:3})}else if(window.innerWidth>800&&window.innerWidth<1300){if(7===t)return;e.setState({numOfShownMembers:7})}else{if(10===t)return;e.setState({numOfShownMembers:10})}},e.toggleStarredBoard=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.isStarred=!r.isStarred,n({type:"TOGGLE_STARRED",isStarred:r.isStarred},r)},e.handleFocus=function(e){return e.target.select()},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(nt.a)({},n,a))}))},e.onChangeBoardTitle=function(){var t=e.props,r=t.board,n=t.onUpdateBoard;r.title=e.state.boardTitle;var a={txt:Ce(r.title)};n({type:"CHANGE_TITLE",title:r.title},r,a)},e.toggleMenu=function(){e.setState((function(t){return Object(h.a)(Object(h.a)({},t),{},{isMenuOpen:!e.state.isMenuOpen})}))},e.getRemainingMembers=function(){var t=Object(p.a)(e.props.board.members);return t.splice(e.state.numOfShownMembers),t},e.getExtraMembersLength=function(){return e.props.board.members.length-e.state.numOfShownMembers},e.onMembersClose=function(){return e.setState({isMembersOpen:!1})},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.props.loadUsers()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){e.board.title!==this.props.board.title&&this.setState({boardTitle:this.props.board.title})}},{key:"render",value:function(){var e=this,t=this.props,r=t.board,n=t.onToggleDashboard,a=this.state,o=a.boardTitle,c=a.isMenuOpen,s=a.isInviteOpen,i=(a.numOfShownMembers,a.isMembersOpen),l=this.getRemainingMembers(),d=this.getExtraMembersLength();return Object(he.jsxs)("section",{className:"board-header",children:[Object(he.jsxs)("div",{className:"left-btns",children:[Object(he.jsx)("button",{className:"board-title nav-button",children:Object(he.jsx)("input",{className:"clean-input",type:"text",value:o,name:"boardTitle",onFocus:this.handleFocus,onChange:this.handleChange,onBlur:this.onChangeBoardTitle})}),Object(he.jsx)("button",{className:"starred-btn nav-button ".concat(r.isStarred?"starred":""),onClick:function(){return e.toggleStarredBoard()},children:Object(he.jsx)(ge.g,{})})," |",Object(he.jsxs)("div",{className:"members-container flex",children:[Object(he.jsxs)("div",{className:"user-previews",children:[l.map((function(e,t){return Object(he.jsx)(Ct,{member:e,style:{left:-5*t}},e._id)})),d>0&&Object(he.jsxs)("div",{ref:this.membersRef,children:[Object(he.jsx)("div",{className:"list-item-layover round",style:{transform:"translateX(".concat(-5*l.length,"px)")},onClick:function(){return e.setState({isMembersOpen:!i})}}),Object(he.jsx)("div",{className:"show-more-btn",style:{transform:"translateX(".concat(-5*l.length,"px)")},children:"+".concat(d)}),i&&Object(he.jsx)(mt,{onClose:function(){return e.setState({isMembersOpen:!1})},title:"Members",ref:this.membersRef,children:Object(he.jsx)(sn,{members:r.members.filter((function(e){return e._id})),onClose:this.onMembersClose})})]})]}),Object(he.jsxs)("div",{className:"relative",ref:this.inviteRef,children:[Object(he.jsx)("button",{onClick:function(){return e.setState({isInviteOpen:!s})},className:"invite-btn nav-button",children:"Invite"}),s&&Object(he.jsx)(mt,{onClose:function(){return e.setState({isInviteOpen:!1})},title:"Invite Members",ref:this.inviteRef,children:Object(he.jsx)(Wr,{})})]})]})]}),Object(he.jsx)("div",{className:"right-btns",children:!c&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("button",{className:"nav-button members-btn",children:Object(he.jsx)(Pr.a,{})}),Object(he.jsxs)("button",{onClick:function(){return n(!0)},className:"dashboard-btn nav-button ".concat(c?"menu-open":""),children:[Object(he.jsx)(Lr.a,{})," ",window.innerWidth>1100&&Object(he.jsx)("span",{children:"Dashboard"})]}),Object(he.jsxs)("button",{onClick:function(){return e.toggleMenu()},className:"right-menu-btn nav-button",children:[Object(he.jsx)(Nr.a,{})," ",window.innerWidth>1100&&Object(he.jsx)("span",{children:"Show Menu"})]})]})}),Object(he.jsx)(on,{isMenuOpen:c,onClose:function(){e.toggleMenu()}})]})}}]),r}(a.a.Component);var dn={loadUsers:le,onUpdateBoard:Qe},un=Object(i.b)((function(e){return{board:e.boardModule.currBoard,users:e.userModule.users}}),dn)(ln),bn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={card:null,cardTitle:"",isArchive:!1},e.uploadCard=function(t,r){var n=dt.getCardById(t,r);e.setState({card:n,cardTitle:n.title})},e.handleChange=function(t){var r=t.target,n=r.name,a=r.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(nt.a)({},n,a))}))},e.handleFocus=function(e){e.target.select()},e.onSave=function(t){var r=Object(h.a)({},e.state.card);r.title=e.state.cardTitle,r.isArchive=e.state.isArchive;var n={txt:Ne(),card:r,groupId:e.props.groupId};e.props.onUpdateCard(r,e.props.groupId,e.props.board,n),e.props.onToggleQuickCardEditor(t,null,"")},e.openCard=function(t){e.props.onToggleQuickCardEditor(t,null,""),e.props.openCardEdit(e.props.groupId,e.props.cardId)},e.onArchiveCard=function(t){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{isArchive:!0})}),(function(){console.log("this state",this.state),this.onSave(t)}))},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cardId,r=e.groupId;this.props.onSetCardId(t),this.uploadCard(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.board!==this.props.board){var t=this.props,r=t.cardId,n=t.groupId;this.uploadCard(r,n)}}},{key:"render",value:function(){var e=this.state,t=e.card,r=e.cardTitle,n=this.props,a=n.groupId,o=n.getLabel,c=n.isCardLabelListOpen,s=n.toggleCardComplete,i=n.position;return t?Object(he.jsxs)("div",{className:"quick-card-editor flex",style:{position:"fixed",top:i.top,left:i.left},children:[Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{className:"card-preview",style:{width:i.width},children:[t.style&&Object(he.jsx)(Ir,{cardStyle:t.style}),Object(he.jsxs)("div",{className:"card-details",children:[t.labelIds&&Object(he.jsx)("div",{children:Object(he.jsx)(Sr,{labelIds:t.labelIds,getLabel:o,isCardLabelListOpen:c})}),Object(he.jsx)("textarea",{className:"clean-input",type:"text",value:r,name:"cardTitle",onChange:this.handleChange,autoFocus:!0,onFocus:this.handleFocus}),Object(he.jsx)(Tr,{card:t,groupId:a,toggleCardComplete:s})]})]}),Object(he.jsx)("button",{onClick:this.onSave,className:"card-edit-btn secondary",children:"Save"})]}),Object(he.jsxs)("div",{className:"quick-editor-sidebar flex column",children:[Object(he.jsxs)("button",{onClick:this.openCard,className:"quick-editor-btn flex align-center",children:[Object(he.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(he.jsx)(Ht.a,{})}),Object(he.jsx)("span",{children:"Open card"})]}),Object(he.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(he.jsx)(Ft,{item:{icon:ct.c,title:"Edit labels",component:Dt}})}),Object(he.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(he.jsx)(Ft,{item:{icon:Mt.c,title:"Change members",component:Nt}})}),Object(he.jsx)("div",{className:"quick-editor-btn flex align-center",children:Object(he.jsx)(Ft,{item:{icon:Ht.a,title:"Change cover",component:Wt}})}),Object(he.jsx)("div",{className:"quick-editor-btn flex align-center datepicker",children:Object(he.jsx)(Ft,{item:{icon:ot.j,title:"Edit dates",component:At}})}),Object(he.jsxs)("div",{className:"quick-editor-btn flex align-center",onClick:this.onArchiveCard,children:[Object(he.jsx)("span",{className:"quick-editor-btn-icon flex align-center",children:Object(he.jsx)(st.a,{})}),Object(he.jsx)("span",{children:"Archive"})]})]})]}):Object(he.jsx)(Ze,{})}}]),r}(n.Component);var pn={onUpdateCard:qe,onSetCardId:Je},hn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),pn)(bn),jn=r(124);function mn(e){var t=e.tasksPerMemberMap,r=e.labelsColors;console.log("tasksPerMemberMap",t);var n={labels:Object.keys(t),datasets:[{label:"# of Votes",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2}]};return Object(he.jsxs)("div",{className:"chart",children:[Object(he.jsx)("h1",{children:"Tasks per Member"}),Object(he.jsx)(jn.b,{data:n,options:{plugins:{legend:{labels:{color:"white",padding:10}}}}})]})}function fn(e){var t=e.tasksPerLabelMap,r=e.labelsColors,n={labels:Object.keys(t),datasets:[{label:"",data:Object.values(t),backgroundColor:r,borderWidth:2,hoverOffset:2,fontColor:"white"}]};return Object(he.jsxs)("div",{className:"chart",children:[Object(he.jsx)("h1",{children:"Tasks per Label"}),Object(he.jsx)(jn.a,{data:n,height:null,width:null,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{fontColor:"#f00"}}},scales:{y:{ticks:{color:"white"}},x:{ticks:{color:"white"}}}}})]})}var gn=r(264),vn=r.n(gn);function On(e){var t=e.tasks;return Object(he.jsx)("div",{className:"time-line-container",children:Object(he.jsx)(vn.a,{data:t,links:[],config:{header:{top:{style:{background:"linear-gradient( grey, black)",textShadow:"0.5px 0.5px black",fontSize:12}},middle:{style:{background:"linear-gradient( #b686c2, white)",fontSize:9,color:"black"}},bottom:{style:{background:"linear-gradient( grey, black)",fontSize:9,color:"#b686c2"},selectedStyle:{background:"linear-gradient( #d011dd ,#d011dd)",fontWeight:"bold",color:"white"}}},taskList:{title:{label:"Task Todo",style:{background:"linear-gradient( grey, black)"}},task:{style:{backgroundColor:"grey",color:"white"}},verticalSeparator:{style:{backgroundColor:"#fbf9f9"},grip:{style:{backgroundColor:"#b686c2"}}}},dataViewPort:{rows:{style:{backgroundColor:"white",borderBottom:"solid 0.5px silver"}},task:{showLabel:!0,style:{backgroundColor:"#b686c2",borderRadius:1,boxShadow:"2px 2px 8px #888888"}}}}})})}var xn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={chartsData:null},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.dashboardQuery(this.props.board._id);case 2:t=e.sent,this.setState({chartsData:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"labelsColor",get:function(){return this.props.board.labels.map((function(e){return e.color}))}},{key:"render",value:function(){var e=this.state.chartsData,t=this.props.board;return console.log("chartsDate",e),e?Object(he.jsxs)("div",{className:"dashboard-modal flex column align-center",children:[Object(he.jsx)(s.b,{to:"/board/".concat(t._id),children:Object(he.jsx)("button",{className:"close-btn",children:Object(he.jsx)(jt.b,{})})}),Object(he.jsxs)("div",{className:"jeneral-statistics flex",children:[Object(he.jsxs)("div",{className:"stats flex space-between",children:[Object(he.jsxs)("div",{children:[Object(he.jsx)("h3",{children:"All Tasks"}),Object(he.jsx)("span",{children:e.cardsCount})]}),Object(he.jsx)("i",{className:"flex align-center",children:Object(he.jsx)(ot.f,{})})]}),Object(he.jsxs)("div",{className:"stats flex space-between",children:[Object(he.jsxs)("div",{children:[Object(he.jsx)("h3",{children:"All Lists"}),Object(he.jsx)("span",{children:e.groupsCount})]}),Object(he.jsx)("i",{className:"flex align-center",children:Object(he.jsx)(ge.d,{})})]}),Object(he.jsxs)("div",{className:"stats flex space-between",children:[Object(he.jsxs)("div",{children:[Object(he.jsx)("h3",{children:"Members"}),Object(he.jsx)("span",{children:t.members&&t.members.length}),Object(he.jsx)("span",{children:!t.members&&0})]}),Object(he.jsx)("i",{className:"flex align-center",children:Object(he.jsx)(Ht.c,{})})]})]}),Object(he.jsxs)("div",{className:"charts flex",children:[Object(he.jsx)(mn,{className:"chart",tasksPerMemberMap:e.tasksPerMemberMap,labelsColors:this.labelsColor}),Object(he.jsx)(fn,{className:"chart",tasksPerLabelMap:e.tasksPerLabelMap,labelsColors:this.labelsColor})]}),Object(he.jsx)(On,{tasks:e.tasks})]}):Object(he.jsx)(Ze,{})}}]),r}(n.Component);var yn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),{})(xn),Cn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isCardLabelListOpen:!1,isAddPopOpen:!1,quickCardEditor:{cardToEdit:null,groupId:"",position:{}}},e.loadBoard=function(t,r){e.props.loadBoard(t,r)},e.openCardEdit=function(t,r){e.props.history.push("".concat(e.props.board._id,"/").concat(t,"/").concat(r))},e.updateBoard=function(t,r){var n=t.board||e.props.board;e.props.onUpdateBoard(t,n,r)},e.onToggleDashboard=function(t){t?e.props.history.push("".concat(e.props.board._id,"/dashboard")):e.props.history.goBack()},e.toggleCardLabelList=function(t){t.stopPropagation(),e.setState({isCardLabelListOpen:!e.state.isCardLabelListOpen})},e.onToggleQuickCardEditor=function(t,r,n){if(t.stopPropagation(),r)var a=t.currentTarget.parentNode.getBoundingClientRect();else;e.setState({quickCardEditor:{cardToEdit:r,groupId:n,position:a}})},e.toggleCardComplete=function(t,r,n){t.stopPropagation();var a=Object(h.a)({},n);a.isComplete=!n.isComplete;var o=a.isComplete?{txt:Se(),card:a,groupId:r}:{txt:Be(),card:a,groupId:r};e.props.onUpdateCard(a,r,e.props.board,o)},e.getLabel=function(t){return e.props.board.labels.find((function(e){return e.id===t}))},e.handleOnDragEnd=function(t){var r=t.destination,n=t.source,a=t.type;if(r){var o=Object(h.a)({},e.props.board);if("group"===a){var c,s=o.groups.splice(n.index,1);return(c=o.groups).splice.apply(c,[r.index,0].concat(Object(p.a)(s))),void e.props.onUpdateBoard({type:""},o)}var i=Object(h.a)({},o.groups.find((function(e){return e.id===n.droppableId}))),l=i.cards.splice(n.index,1);if(n.droppableId===r.droppableId){var d;(d=i.cards).splice.apply(d,[r.index,0].concat(Object(p.a)(l)));var u={type:"UPDATE_GROUP",group:i};e.props.onUpdateBoard(u,o)}else{var b,j=Object(h.a)({},o.groups.find((function(e){return e.id===r.droppableId})));j.cards?(b=j.cards).splice.apply(b,[r.index,0].concat(Object(p.a)(l))):j.cards=[l],o.groups=o.groups.map((function(e){return e.id===n.droppableId?i:e.id===r.droppableId?j:e})),e.props.onUpdateBoard({type:""},o)}}},e.onToggleAddPop=function(){e.setState({isAddPopOpen:!e.state.isAddPopOpen})},e.toggleGroupArchive=function(t){var r=Object(h.a)({},e.props.board.groups.find((function(e){return t===e.id})));r.isArchive=!r.isArchive||!r.isArchive;var n={txt:Ie(r.title)},a={type:"UPDATE_GROUP",group:r};e.props.onUpdateBoard(a,e.props.board,n)},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,r,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.boardId,r=this.props.location.search,console.log("from Board details: ",r),e.next=5,this.loadBoard(t,r);case 5:R.emit("member-joined",t),R.on("board-update",(function(e){var t=e.action,r=e.activity,a=t.board||n.props.board;n.props.outputUpdateBoard(t,a,r)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.resetBoard()}},{key:"render",value:function(){var e=this,t=this.props.board,r=this.state,n=(r.isDashboardOpen,r.isCardLabelListOpen),a=r.isAddPopOpen,o=r.quickCardEditor;return t?Object(he.jsxs)("div",{className:"board-details flex column",children:[Object(he.jsx)(oe.a,{path:"/board/:boardId/dashboard",component:yn}),Object(he.jsx)(oe.a,{path:"/board/:boardId/:groupId/:cardId",component:yr}),Object(he.jsx)(un,{onToggleDashboard:this.onToggleDashboard}),Object(he.jsx)(rt.a,{onDragEnd:this.handleOnDragEnd,children:Object(he.jsx)("section",{className:"group-list-container flex",children:Object(he.jsx)("div",{className:"group-list-wrapper flex",children:Object(he.jsx)(rt.c,{droppableId:t._id,direction:"horizontal",type:"group",children:function(r,o){return Object(he.jsxs)("div",Object(h.a)(Object(h.a)({},r.droppableProps),{},{ref:r.innerRef,className:"flex",children:[t.groups&&Object(he.jsx)(Rr,{groups:t.groups,openCardEdit:e.openCardEdit,updateBoard:e.updateBoard,toggleCardLabelList:e.toggleCardLabelList,isCardLabelListOpen:n,toggleCardComplete:e.toggleCardComplete,toggleGroupArchive:e.toggleGroupArchive,onToggleQuickCardEditor:e.onToggleQuickCardEditor,getLabel:e.getLabel}),r.placeholder,Object(he.jsxs)("div",{className:"add-group-container",children:[!a&&Object(he.jsxs)("button",{className:"add-boarditem-btn flex align-center",onClick:e.onToggleAddPop,children:[Object(he.jsx)("i",{className:"flex align-center",children:Object(he.jsx)(ge.f,{})}),Object(he.jsx)("span",{children:"Add a list"})]}),a&&Object(he.jsx)(wr,{onToggleAddPop:e.onToggleAddPop,type:"group"})]})]}))}})})})}),o.cardToEdit&&Object(he.jsx)(hn,{cardId:o.cardToEdit.id,groupId:o.groupId,position:o.position,getLabel:this.getLabel,toggleCardComplete:this.toggleCardComplete,isCardLabelListOpen:n,onToggleQuickCardEditor:this.onToggleQuickCardEditor,openCardEdit:this.openCardEdit}),o.cardToEdit&&Object(he.jsx)("div",{onClick:function(t){return e.onToggleQuickCardEditor(t,null,"")},children:Object(he.jsx)(Ye,{})})]}):Object(he.jsx)(Ze,{})}}]),r}(n.Component);var kn={loadBoard:He,onUpdateBoard:Qe,outputUpdateBoard:function(e,t,r){return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Xe(e,t),n({type:"UPDATE_BOARD",board:a});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},onUpdateCard:qe,resetBoard:function(){return document.body.style.background="unset",function(e){e({type:"SET_CURR_BOARD",board:null})}}},wn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}),kn)(Cn),Nn=r(30),In=r(267),Sn=r.p+"static/media/login-svg-right.df08073f.svg",Bn=r.p+"static/media/login-svg-left.ff7c7688.svg",An=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{username:"",password:"",fullname:""},pageMode:null},e.validate=function(e){var t={};return e.username?e.username.length<6&&(t.username="Please use at least 6 characters"):t.username="Required",e.password.length<4&&(t.password="Password too short"),e.fullname?e.fullname.length<4&&(t.fullname="Please use at least 4 characters"):t.fullname="Required",t},e.onSuccessGoogle=function(t){var r=t.tokenId;(0,e.props.onGoogleLogin)(r)},e.onFailureGoogle=function(e){console.log("Login with google failed",e)},e.onSubmit=function(t){var r=e.state.pageMode,n=e.props,a=n.onLogin,o=n.onSignup;"login"===r?a(t):o(t),e.props.history.push("/board")},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUsers();case 2:t="/login"===this.props.location.pathname?"login":"signup",this.setState({pageMode:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.credentials,r=e.pageMode;return Object(he.jsxs)("section",{className:"login-signup-page main-container",children:[Object(he.jsxs)("div",{className:"login-signup-header",children:[Object(he.jsx)(ce.a,{}),Object(he.jsx)("h3",{className:"logo-text",children:"Marshmello"})]}),"login"===r&&Object(he.jsxs)("div",{className:"login-signup flex column",children:[Object(he.jsx)("h3",{children:"Log in to Marshmello"}),Object(he.jsx)(Nn.d,{initialValues:t,onSubmit:this.onSubmit,children:Object(he.jsxs)(Nn.c,{className:"login-form flex column",children:[Object(he.jsx)(Nn.b,{type:"username",placeholder:"Enter user name",name:"username",autoFocus:!0}),Object(he.jsx)(Nn.a,{name:"username",component:"div"}),Object(he.jsx)(Nn.b,{type:"password",placeholder:"Enter password",name:"password",autoComplete:"off"}),Object(he.jsx)(Nn.a,{name:"password",component:"div"}),Object(he.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Log in"})]})}),"OR",Object(he.jsx)("br",{}),Object(he.jsx)(In.GoogleLogin,{className:"google-login-btn flex align-center justify-center",clientId:"640315421255-e4mv3dirnt2lbm4ati92b1euclri0j8d.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:this.onSuccessGoogle,onFailure:this.onFailureGoogle,cookiePolicy:"single_host_origin"}),Object(he.jsx)("hr",{}),Object(he.jsx)(s.b,{to:"/signup",children:"Sign up for an account"})]}),"signup"===r&&Object(he.jsxs)("div",{className:"login-signup flex column",children:[Object(he.jsx)("h3",{children:"Sign up for your account"}),Object(he.jsx)(Nn.d,{initialValues:t,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,onSubmit:this.onSubmit,children:Object(he.jsxs)(Nn.c,{className:"flex column",children:[Object(he.jsx)(Nn.b,{type:"fullname",placeholder:"Enter full name",name:"fullname",autoFocus:!0}),Object(he.jsx)(Nn.a,{name:"fullname",component:"p"}),Object(he.jsx)(Nn.b,{type:"username",placeholder:"Enter user name",name:"username"}),Object(he.jsx)(Nn.a,{name:"username",component:"p"}),Object(he.jsx)(Nn.b,{type:"password",placeholder:"Enter password",name:"password"}),Object(he.jsx)(Nn.a,{name:"password",component:"p"}),Object(he.jsx)("button",{type:"submit",className:"login-signup-btn nav-button",style:{color:"#172b4d"},children:"Sign up"})]})}),Object(he.jsx)("hr",{}),Object(he.jsx)(s.b,{to:"/login",children:"Already have an account ? Log In"})]}),Object(he.jsx)("div",{className:"right-svg",children:Object(he.jsx)("img",{src:Sn,alt:"right-svg"})}),Object(he.jsx)("div",{className:"left-svg",children:Object(he.jsx)("img",{src:Bn,alt:"left-svg"})})]})}}]),r}(a.a.Component);var Mn={loadUsers:le,onLogin:de,onSignup:ue,onGoogleLogin:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.googleLogin(e);case 3:n=t.sent,r({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Un=Object(i.b)((function(e){return{user:e.userModule.user}}),Mn)(An),Tn=[{path:"/board/:boardId",component:wn},{path:"/board",component:tt},{path:"/login",component:Un},{path:"/signup",component:Un},{path:"/",component:fe}],Dn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={title:"",style:{imgUrl:"https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"},chosenImgIdx:5},e.targetRef=a.a.createRef(),e.handleClick=function(t){e.targetRef.current.contains(t.target)||e.props.onClose()},e.handleChange=function(t){var r=t.target.name,n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(nt.a)({},r,n)))},e.handleImage=function(t,r){t.preventDefault();var n=t.target.getAttribute("src");e.setState(Object(h.a)(Object(h.a)({},e.state),{},{style:{imgUrl:n},chosenImgIdx:r}))},e.addBoard=function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),e.state.title){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.props.onAddBoard(e.state);case 5:n=t.sent,e.props.history.push("/board/".concat(n._id)),e.props.setAddingBoard(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick),this.props.setAddingBoard(!1)}},{key:"render",value:function(){var e=this,t=["https://images.pexels.com/photos/1914982/pexels-photo-1914982.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/844297/pexels-photo-844297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3293148/pexels-photo-3293148.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/911738/pexels-photo-911738.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3274903/pexels-photo-3274903.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/3683056/pexels-photo-3683056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2170473/pexels-photo-2170473.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/2529973/pexels-photo-2529973.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","https://images.pexels.com/photos/1982485/pexels-photo-1982485.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"],r=this.state,n=r.title,a=r.chosenImgIdx;return Object(he.jsxs)("div",{className:"board-add",ref:this.targetRef,children:[Object(he.jsxs)("form",{className:"board-add-form",onSubmit:this.addBoard,style:{backgroundImage:"url(".concat(t[a],")")},children:[Object(he.jsx)("input",{autoFocus:!0,className:"board-title-input ".concat(n?"editing":""),autoComplete:"off",type:"text",placeholder:"Add board title",name:"title",value:n,onChange:this.handleChange}),Object(he.jsx)("button",{className:"create-btn ".concat(n?"clickable":""),type:"submit",children:"Create Board"})]}),Object(he.jsx)("div",{className:"images-container",children:t.map((function(t,r){return Object(he.jsx)("button",{className:"img-btn ".concat(r===a?"chosen":""),onClick:function(t){return e.handleImage(t,r)},children:Object(he.jsx)("img",{className:"add-board-img",src:t,alt:t})},r)}))})]})}}]),r}(a.a.Component);var _n={onAddBoard:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Le.save(e);case 3:return n=t.sent,console.log("Added Board",n),r({type:"ADD_BOARD",board:n}),R.emit("update",!0),t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),console.log("Cannot add board",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Ve},En=Object(oe.f)(Dn),Rn=Object(i.b)((function(e){return{isAddingBoard:e.boardModule.isAddingBoard}}),_n)(En),Ln=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){var e;Object(te.a)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isPopoverOpen:!1},e.userMenuRef=a.a.createRef(),e.onLogout=function(){e.props.onLogout()},e.setAddBoard=function(t){e.props.setAddingBoard(t)},e.setFavicon=function(){document.getElementById("favicon").href="../../public/favicon.ico"},e}return Object(re.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,r=t.user,n=t.isAddingBoard,a=this.state.isPopoverOpen;return Object(he.jsxs)("header",{className:"app-header",children:[Object(he.jsxs)("nav",{className:"nav-links",children:[Object(he.jsxs)("div",{className:"left-links",children:[Object(he.jsx)(s.c,{to:"/",children:Object(he.jsx)("button",{onClick:function(){return e.setFavicon()},className:"home-btn nav-button",children:Object(he.jsx)(Ht.b,{})})}),Object(he.jsx)(s.c,{to:"/board",children:Object(he.jsxs)("button",{onClick:function(){return e.setFavicon()},className:"boards-btn flex nav-button",children:[Object(he.jsx)(ce.a,{})," ",Object(he.jsx)("span",{children:"Boards"})]})})]}),Object(he.jsxs)(s.c,{className:"logo",to:"/",children:[Object(he.jsx)(ce.a,{})," ",Object(he.jsx)("span",{children:" Marshmello "})]}),Object(he.jsxs)("div",{className:"right-links",children:[Object(he.jsx)("button",{className:"nav-button",onClick:function(){return e.setAddBoard(!0)},children:Object(he.jsx)(ge.f,{})}),Object(he.jsx)("button",{className:"nav-button",children:Object(he.jsx)(ge.b,{})}),Object(he.jsx)(Ct,{member:r,onClick:function(){return e.setState({isPopoverOpen:!a})}},r._id)]})]}),n&&Object(he.jsx)(Rn,{onClose:function(){return e.setAddBoard(!1)}}),n&&Object(he.jsx)(Ye,{})]})}}]),r}(a.a.Component);var Pn={onLogin:de,onSignup:ue,onLogout:function(){return function(e){F.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}},loadUsers:le,removeUser:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.remove(e);case 3:r({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},setAddingBoard:Ve},Fn=Object(i.b)((function(e){return{board:e.boardModule.currBoard,user:e.userModule.user,isAddingBoard:e.boardModule.isAddingBoard}}),Pn)(Ln),Gn=function(e){Object(ne.a)(r,e);var t=Object(ae.a)(r);function r(){return Object(te.a)(this,r),t.apply(this,arguments)}return Object(re.a)(r,[{key:"isHeaderShown",get:function(){var e=this.props.location.pathname;return e.includes("board")||e.includes("boards")}},{key:"render",value:function(){return Object(he.jsxs)("div",{className:"app flex column",children:[this.isHeaderShown&&Object(he.jsx)(Fn,{}),Object(he.jsx)("main",{className:"main-app",children:Object(he.jsx)(oe.c,{children:Tn.map((function(e){return Object(he.jsx)(oe.a,{component:e.component,path:e.path},e.path)}))})})]})}}]),r}(a.a.Component);var zn=Object(oe.f)(Gn),Wn=Object(i.b)((function(e){return{board:e.boardModule.currBoard}}))(zn);r(533);c.a.render(Object(he.jsxs)(a.a.StrictMode,{children:[Object(he.jsxs)(i.a,{store:ee,children:[Object(he.jsx)(s.a,{children:Object(he.jsx)(Wn,{})})," "]})," "]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):d(t,e)}))}}()}},[[534,1,2]]]);
//# sourceMappingURL=main.e1a6b960.chunk.js.map